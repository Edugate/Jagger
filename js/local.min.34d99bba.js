function nl2br(a,b){"use strict";var c=b||"undefined"==typeof b?"<br />":"<br>";return(a+"").replace(/([^>\r\n]?)(\r\n|\n\r|\r|\n)/g,"$1"+c+"$2")}function revealAlert(a,b){"use strict";var c='<div class="row text-right"><button class="small modal-close">'+b+"</button></div>",d=$("#malert");d.empty().append('<div class="row text-center"><p><h4>'+a+"</h4></p></div>").append(c).foundation("reveal","open")}function mapInitialize(){window.console.log("map init");var a=[],b={zoom:4,center:new google.maps.LatLng(50.019036,13.007813),mapTypeId:google.maps.MapTypeId.ROADMAP,mapTypeControl:!0,mapTypeControlOptions:{style:google.maps.MapTypeControlStyle.DEFAULT}};map=new google.maps.Map(document.getElementById("map-canvas"),b),google.maps.event.addListener(map,"click",function(a){$("#latlng").val(a.latLng.lat().toFixed(6)+","+a.latLng.lng().toFixed(6))}),mapSearchInput=document.getElementById("map-search"),map.controls[google.maps.ControlPosition.TOP_LEFT].push(mapSearchInput);var c=new google.maps.places.SearchBox(mapSearchInput);google.maps.event.addListener(c,"places_changed",function(){var b=c.getPlaces();if(0!==b.length){for(var d,e=0;d=a[e];e++)d.setMap(null);a=[];for(var f,g=new google.maps.LatLngBounds,h=0;f=b[h];h++){var i={url:f.icon,size:new google.maps.Size(71,71),origin:new google.maps.Point(0,0),anchor:new google.maps.Point(17,34),scaledSize:new google.maps.Size(25,25)};d=new google.maps.Marker({map:map,icon:i,title:f.name,position:f.geometry.location}),a.push(d),g.extend(f.geometry.location)}map.fitBounds(g);var j=google.maps.event.addListener(map,"idle",function(){map.getZoom()>16&&map.setZoom(16),google.maps.event.removeListener(j)})}}),google.maps.event.addListener(map,"bounds_changed",function(){var a=map.getBounds();c.setBounds(a)})}function go_to_private_page(){window.location.reload()}$.fn.dataTable.ext.search.push(function(a,b,c){var d=$("#entityc").val(),e=b[0];return void 0===d||""===d||"1"===e&&"local"===d||"0"===e&&"external"===d?!0:!1}),function(){var a;a=this.jQuery,a.fn.extend({confirmWithReveal:function(b){var c,d,e,f;return null===b&&(b={}),c={modal_class:"small",title:"Are you sure?",title_class:"",body:"This action cannot be undone.",body_class:"",password:!1,prompt:"Type <strong>%s</strong> to continue:",footer_class:"",ok:"Confirm",ok_class:"button small",cancel:"Cancel",cancel_class:"button small alert"},f=a.extend({},c,b),d=function(b){var c,d,e,g,h,i,j,k;return g=b.data("confirm"),null===b.attr("data-confirm")?!0:"string"==typeof g&&g.length>0?((null!==(k=a.rails)?k.confirm:void 0)||window.confirm).call(window,g):(i=function(a){return g[a]||f[a]},h=a("<div data-reveal class='reveal-modal "+i("modal_class")+"'>\n  <h2 data-confirm-title class='"+i("title_class")+"'></h2>\n  <p data-confirm-body class='"+i("body_class")+"'></p>\n  <div data-confirm-footer class='"+i("footer_class")+"'>\n    <a data-confirm-cancel class='"+i("cancel_class")+"'></a>\n  </div>\n</div>"),c=b.is("a")?b.clone():a("<a/>"),c.removeAttr("data-confirm").attr("class",i("ok_class")).html(i("ok")).on("click",function(c){return a(this).prop("disabled")?!1:(b.trigger("confirm.reveal",c),b.is("form, :input")?b.closest("form").removeAttr("data-confirm").submit():void 0)}),h.find("[data-confirm-title]").html(i("title")),h.find("[data-confirm-body]").html(i("body")),h.find("[data-confirm-cancel]").html(i("cancel")).on("click",function(a){return h.foundation("reveal","close"),b.trigger("cancel.reveal",a)}),h.find("[data-confirm-footer]").append(c),j===i("password")&&(e=i("prompt").replace("%s",j),d="<label>\n  "+e+"\n  <input data-confirm-password type='text'/>\n</label>",h.find("[data-confirm-body]").after(a(d)),h.find("[data-confirm-password]").on("keyup",function(b){var d;return d=a(this).val()!==j,c.toggleClass("disabled",d).prop("disabled",d)}).trigger("keyup")),h.appendTo(a("body")).foundation().foundation("reveal","open").on("closed.fndtn.reveal",function(a){return h.remove()}),!1)},a.rails?(a.rails.allowAction=function(b){return d(a(b))},a(this)):(e=function(b){return d(a(this))?void 0:(b.preventDefault(),b.stopImmediatePropagation())},this.each(function(){var b;return b=a(this),b.on("click","a[data-confirm], :input[data-confirm]",e),b.on("submit","form[data-confirm]",e),b}))}})}.call(this),jQuery.uiTableFilter=function(a,b,c,d){"use strict";var e,f,g,h,i,j,k,l,m=!1;if(this.last_phrase===b)return!1;if(g=b.length,i=b.toLowerCase().split(" "),j=function(a){a.show()},k=function(a){a.hide(),m=!0},l=function(a){return a.text()},c){if(f=null,a.find("thead > tr:last > th").each(function(a){return $(this).text()===c?(f=a,!1):void 0}),null===f)throw"given column: "+c+" not found";l=function(a){return jQuery(a.find("td:eq("+f+")")).text()}}if(i.size>1&&b.substr(0,g-1)===this.last_phrase){if(" "===b[-1])return this.last_phrase=b,!1;i=i[-1],j=function(a){},e=a.find("tbody > tr:visible")}else m=!0,e=a.find("tbody > tr");return e.each(function(){var a=jQuery(this);jQuery.uiTableFilter.has_words(l(a),i,!1)?j(a):k(a)}),h=b,d&&m&&d(),a},jQuery.uiTableFilter.last_phrase="",jQuery.uiTableFilter.has_words=function(a,b,c){"use strict";var d,e=c?a:a.toLowerCase();for(d=0;d<b.length;d++)if(-1===e.indexOf(b[d]))return!1;return!0};var jlettersdigits="abcdefghijklmnopqrstuvwxyz0123456789",jLetters="abcdefghijklmnopqrstuvwxyz",jDigits="0123456789",genRandomStr=function(a){"use strict";var b,c="",d=jlettersdigits.length;for(b=0;a>b;b++)c+=jlettersdigits.charAt(Math.floor(Math.random()*d));return c},map,mapSearchInput;jQuery.fn.toggleOption=function(a){if(jQuery(this).toggle(a),a)for(;jQuery(this).parent("span.toggleOption").length;)jQuery(this).unwrap();else jQuery(this).wrap('<span class="toggleOption" style="display: none;" />')};var createRowWithLangRm=function(a,b,c,d){return console.log("createRowWithLangRm fired"),$('<div class="large-12 small-12 columns"><div class="small-3 columns"><label for="'+c+'" class="right inline">'+b+'</label></div><div class="small-6 large-7 columns"><input id="'+c+'" name="'+c+'" type="text" class="validurl"/></div><div class="small-3 large-2 columns"> <button type="button" class="btn langinputrm button inline tiny left alert" name="langrm" value="'+a+'">'+d+"</button></div></div>")},createRowTaskParams=function(a,b){for(var c="z",d="0123456789",e=0;5>e;e++)c+=d.charAt(Math.floor(Math.random()*d.length));return $('<div class="row"><div class="small-6 column"><label>'+a+'<input name="params['+c+'][name]" type="text" value=""/></label></div><div class="small-6 column"><label>'+b+'<input name="params['+c+'][value]" type="text"  value=""/></label></div></div>')},BINIT={initFvalidators:function(){console.log("BININT"),$("ul.validatorbuttons button").on("click",function(a){var b=$(this).attr("value"),c=$("#fvform"),d=$("#spinner");$.ajax({type:"GET",url:b,timeout:2500,cache:!0,success:function(a){d.hide();var b=$.parseJSON(a);if(b){var e=b.fedid,f=b.id,g=b.name,h=b.desc;c.find('input[name="fedid"]').first().val(e),c.find('input[name="fvid"]').first().val(f),$("#fvalidesc").replaceWith('<div id="fvalidesc"><b>'+g+"</b><p>"+h+"</p></div>"),c.show()}},beforeSend:function(){$("#fvresult").hide(),d.show()},error:function(){d.hide(),c.hide(),$("#fvresult").hide()}})})}},GINIT={initialize:function(){"use strict";var a=$(".pjagger");if(a.length>0){var b,c;a.each(function(){if(b=$(this),b.hasClass("piegraph")&&b.hasClass("fedgraph")){c=b.attr("data-jagger-link");var a=[];a.idp=0,a.sp=0,a.both=0,$.ajax({url:c,type:"GET",cache:!0,dataType:"json",success:function(a){if(a){var c=[{value:a.idp,color:"#F7464A",highlight:"#FF5A5E",label:a.definitions.idp},{value:a.sp,color:"#46BFBD",highlight:"#5AD3D1",label:a.definitions.sp},{value:a.both,color:"#FDB45C",highlight:"#FFC870",label:a.definitions.both}],d=b.find("canvas").get(0).getContext("2d");if(d){var e=new Chart(d).Pie(c,{responsive:!0,legendTemplate:'<div class="<%=name.toLowerCase()%>-legend"><% for (var i=0; i<segments.length; i++){%><div><span style="background-color:<%=segments[i].fillColor%>">&nbsp;&nbsp;&nbsp;</span> <%if(segments[i].label){%><%=segments[i].label%><%}%></div><%}%></div>'}),f=e.generateLegend();b.find("div.plegend").first().html(f)}}}})}})}var d=$("#membership2").first();if(void 0!==d&&d.length>0){var e,f=$(d).attr("data-jagger-link"),g=["idp","sp","both"],h=[];h.idp=0,h.sp=0,h.both=0,$.ajax({url:f,type:"GET",cache:!0,dataType:"json",success:function(a){if(a){var b,c=a.definitions.preurl,f=[],i=-1;f[++i]="<table><tbody>";for(var j=0,k=g.length;k>j;j++)e=g[j],a[e]&&(f[++i]='<tr><td colspan="2" class="highlight">'+a.definitions[e]+"</td></tr>",f[++i]='<tr><td colspan="2"><div class="zebramembers">',b=0,h[e]=a[e].length,$.each(a[e],function(a,d){++b,b%2?f[++i]='<div class="small-12 column odd">':f[++i]='<div class="small-12 column even">',f[++i]='<div class="large-5 column">'+b+'. <a href="'+c+d.pid+'">'+d.pname+"</a></div>",f[++i]='<div class="large-5 column">'+d.entityid+"</div>",f[++i]='<div class="large-2 column"></div>',f[++i]="</div>"}),f[++i]="</div></td></tr>");f[++i]="</tbody></table>",d.hasClass("fake")||$(d).html(f.join(""));var l=[{value:h.idp,color:"#F7464A",highlight:"#FF5A5E",label:a.definitions.idp},{value:h.sp,color:"#46BFBD",highlight:"#5AD3D1",label:a.definitions.sp},{value:h.both,color:"#FDB45C",highlight:"#FFC870",label:a.definitions.both}],m=document.getElementById("fedpiechart").getContext("2d");if(m&&(h.idp>0||h.sp>0||h.both>0)){var n=new Chart(m).Pie(l,{responsive:!0,legendTemplate:'<div class="<%=name.toLowerCase()%>-legend"><% for (var i=0; i<segments.length; i++){%><div><span style="background-color:<%=segments[i].fillColor%>">&nbsp;<%=segments[i].value %>&nbsp;</span> <%if(segments[i].label){%><%=segments[i].label%><%}%></div><%}%></div>'}),o=n.generateLegend();$("#fedpiechartlegend").html(o)}}}})}$("div[data-jagger-getmoreajax]").each(function(a){var b=$(this).attr("data-jagger-getmoreajax"),c=$(this).attr("data-jagger-response-msg"),d=$(this).attr("data-jagger-refreshurl"),e="";if(void 0===c||null===c)return console.log('attribute data-jagger-response-msg not found in element with data-jagger-getmoreajax="'+b+'" - exiting'),!1;console.log('attribute data-jagger-response-msg="'+c+'" in element data-jagger-getmoreajax="'+b+'"');var f=$("div#"+c);return void 0===f||null===f||0===$(f).length?(console.log('div with id="'+c+'" not found'),!1):(console.log('div with id="'+c+'" found'),void $.ajax({dataType:"json",type:"GET",url:b,cache:!0,success:function(a){if(!a)return console.log("no json got from "+b),!1;var c=a.length;if(1>c)return!1;var g,h=$("<div/>");$.each(a,function(a,b){g="<div>"+b.msg+"</div>",h.append(g)}),null!==d&&(e='<a class="refreshurl right" href="#"  data-jagger-getmoreajaxonclick= "'+d+'" data-jagger-response-msg="prdetails"><i class="fi-refresh" ></i></a>'),f.empty().append(e).append(h).show()}}))}),$("#taskformaddparam").on("click",function(a){var b=$(this).closest("div.row"),c=createRowTaskParams("","");return c.insertBefore(b),!1}),$("#password").on("keypress",function(a){var b=a.keyCode?a.keyCode:a.which,c=a.shiftKey?a.shiftKey:16===b;b>=65&&90>=b&&!c||b>=97&&122>=b&&c?$("#capswarn").show():$("#capswarn").hide()}),$("table.sortable").tablesorter();var i=$("[name='baseurl']").val();void 0===i&&(i=""),$("#loginbtn").on("click",function(a){a.preventDefault();var b=$(this).attr("href"),c=$("#loginform"),d=$(c).find(":submit").first(),e=$(c).find("div.usernamerow").first(),f=$(c).find("div.passwordrow").first(),g=$(c).find("div.secondfactorrow").first(),h=$("#loginresponse");return $.ajax({type:"GET",url:b,dataType:"json",cache:!1,success:function(a){if(1!==a.logged){if(0===a.partiallogged)return d.prop("disabled",!1),e.show(),f.show(),h.hide(),c.foundation("reveal","open"),!1;if(1===a.twofactor&&null!==a.secondfactor)return d.prop("disabled",!0),e.show(),$("#password").val(null),f.show(),h.hide(),a.html&&g.html(a.html).show(),c.foundation("reveal","open"),!1}else{var b=$("[name='baseurl']").val();void 0!==b&&(window.location.href=b)}e.show(),f.show(),h.hide(),c.foundation("reveal","open")}}),!1}),$(document).on("click",".modal-close",function(a){$(this).foundation("reveal","close")}),$("#providerlogtab").on("toggled",function(a,b){console.log(b);var c=$(this).attr("data-reveal-ajax-tab");void 0!==c&&$.ajax({cache:!0,type:"GET",url:c,success:function(a){$("#providerlogtab").empty().append(a),$(document).foundation("accordion","reflow")}})}),$("#newusermodal").on("submit","form",function(a){a.preventDefault();var b=$(this),c=b.attr("action"),d=b.find("div.message").first();$.ajax({url:c,type:"POST",data:b.serializeArray(),beforeSend:function(){d.hide().empty()},success:function(a){a&&"OK"===a?($("#newusermodal").foundation("reveal","close"),d.hide().empty(),location.reload()):d.html(a).show()}})}),$("button.cleartarget").on("click",function(a){a.preventDefault();var b=$(this).attr("data-jagger-textarea"),c=$(this).attr("data-jagger-input");return void 0!==b&&$("textarea[name='"+b+"']").val(""),void 0!==c&&$("input[name='"+c+"']").val(""),!1}),$("button.postajax").on("click",function(a){a.preventDefault();var b=$(this).closest("form"),c=$(this).attr("data-jagger-response-msg"),d=$("div#"+c),e=b.attr("action");return $.ajax({type:"POST",url:e,data:b.serializeArray(),beforeSend:function(){d.empty()},success:function(a){a?d.append(a):d.append("no result")},error:function(a,b,c){var e="<div>"+c+"</div>";return d.append(e),!1}}),!1}),$(".policymembers").on("click",function(a){var b=$(this).attr("data-jagger-jsource"),c=$("#regpolmembers"),d=c.find(".datacontent").first();$.ajax({type:"GET",url:b,beforeSend:function(){d.empty()},success:function(a){if(a){var b=$("<ul/>");b.addClass("no-bullet");var e=[],f=0;$.each(a,function(a,b){e[f++]='<li><a href="'+i+"providers/detail/show/"+b.provid+'">'+b.name+" </a><small>("+b.entityid+")</small></li>"}),b.append(e.join("")),d.append(b),c.foundation("reveal","open")}}})}),$(document).on("click",".ecmembers",function(a){var b=$(this).attr("data-jagger-jsource"),c=$("#ecmembers"),d=c.find(".datacontent").first();$.ajax({type:"GET",url:b,beforeSend:function(){d.empty()},success:function(a){if(a){var b=$("<ul/>");b.addClass("no-bullet");var e=[],f=0;$.each(a,function(a,b){e[f++]='<li><a href="'+i+"providers/detail/show/"+b.provid+'">'+b.name+" </a><small>("+b.entityid+")</small></li>"}),b.append(e.join("")),d.append(b),c.foundation("reveal","open")}}})}),$(".rmusericon").on("click",function(a){var b=$("#removeusermodal"),c=b.find("#removeusermodalmsg").first(),d=$(this).attr("data-jagger-username"),e=$(this).attr("data-jagger-encodeduser"),f=b.find("#usernameval").first(),g=b.find("#encodedusr").first(),h=b.find("button[name='close']"),i=b.find("button[name='cancel']"),j=b.find("button[name='remove']"),k=b.find("input[name='username']");return k.val(""),g.val(e),f.html(d),c.html("").hide().removeClass("alert").removeClass("success"),j.show(),i.show(),h.hide(),b.foundation("reveal","open"),!1}),$("#removeusermodal").on("submit",function(a){a.preventDefault();var b=$(this),c=b.find("form").first(),d=c.serializeArray(),e=b.find("#removeusermodalmsg").first(),f=b.find("#encodedusr").first(),g=c.attr("action"),h=b.find("button[name='close']"),i=b.find("button[name='cancel']"),j=b.find("button[name='remove']");$.ajax({type:"POST",url:g,data:d,beforeSend:function(){e.html("").hide().removeClass("alert").removeClass("success"),j.show(),i.show(),h.hide()},success:function(a){var b=$(document).find('a[data-jagger-encodeduser="'+f.val()+'"]');return b&&b.closest("tr").hide(),e.html(a).addClass("success").show(),j.hide(),i.hide(),h.show(),!1},error:function(a,b,c){return e.html(a.responseText).addClass("alert").show(),!1}})}),$("#confirmremover").on("click",".yes",function(a){a.preventDefault();var b=$(this).closest("form"),c=b.attr("action"),d=b.attr("data-jagger-regpolicy"),e=b.attr("data-jagger-ec");$.ajax({type:"POST",url:c,data:b.serializeArray(),success:function(a){void 0!==d&&null!==d?$('a[data-jagger-regpolicy="'+d+'"]').closest("tr").hide():$('a[data-jagger-ec="'+e+'"]').closest("tr").hide(),$("#confirmremover").foundation("reveal","close")},error:function(a,b,c){var d=""+c;return window.alert(d),!1}})}),$("a.withconfirm").on("click",function(a){a.preventDefault();var b=$(this).attr("href"),c=$(this).attr("data-jagger-regpolicy"),d=$(this).attr("data-jagger-ec"),e=$(this).attr("data-jagger-counter"),f=$(this).attr("data-jagger-fieldname");if(void 0===b)return!1;var g=$("#confirmremover"),h=g.find("span.data-fieldname").first(),i=g.find("span.data-counter").first();h.html(f),i.html(e);var j=g.find("form").first();j.attr("action",b),void 0!==d&&null!==d?j.attr("data-jagger-ec",d):j.attr("data-jagger-regpolicy",c),g.foundation("reveal","open")}),$(".dhelp").click(function(){var a=parseInt($(this).css("font-size"));10>=a?$(this).css("font-size",a+5).removeClass("zoomin").addClass("zoomout"):$(this).css("font-size",a-5).removeClass("zoomout").addClass("zoomin")}),$("form#availablelogos input[name='filename']").click(function(){$(this).after($("form#availablelogos div.buttons").show())}),$("button.reqattrrm").click(function(){var a=$(this).closest("fieldset");a.remove()}),$("form#availablelogos").on("submit",function(a){a.preventDefault();var b=$("div.uploadresult"),c=$("div.assignedlogosgrid").text();$("#uploadlogo").unbind(),$.ajax({type:"POST",url:$(this).attr("action"),data:$("form#availablelogos").serializeArray(),dataType:"html",cache:!1,beforeSend:function(){$("form#availablelogos div.buttons").hide().appendTo("form#availablelogos")},success:function(a){$("form#availablelogos #filename").prop("checked",!1),$.ajax({type:"GET",url:c,cache:!1,success:function(a){$("#uploadlogo").unbind(),$("div#t1").empty().append(a),$("#assignedlogos").unbind(),$("#availablelogos").unbind(),GINIT.initialize()}}),$("#spinner").hide(),revealAlert(a,"OK")},error:function(a,c,d){$("#spinner").hide(),b.css("color","red"),revealAlert('<div data-alert class="alert-box alert">'+a.responseText+"</div>","OK")}})}),$("#uploadlogo").on("submit",function(a){a.preventDefault();var b=new FormData(document.forms.namedItem("uploadlogo")),c=$("div.uploadresult"),d=$("div.availablelogosgrid").text(),e=$("div.assignedlogosgrid").text();$.ajax({type:"POST",url:$(this).attr("action"),data:b,dataType:"html",cache:!1,processData:!1,contentType:!1,beforeSend:function(){c.html(""),c.css("color","black"),$("form#availablelogos div.buttons").hide().appendTo("form#availablelogos"),$("#spinner").show()},success:function(a){$("#spinner").hide(),c.html(a),revealAlert($("div.uploadresult").text(),"OK"),$.ajax({type:"GET",url:e,cache:!1,success:function(a){var b=$("form#assignedlogos");b.replaceWith(a),$("#availablelogos").unbind(),b.unbind(),$("#uploadlogo").unbind(),$("table#details").unbind(),$("form#availablelogos input[name='filename']").unbind("click"),GINIT.initialize()},error:function(a,b,c){$("#spinner").hide(),$("#availablelogos").unbind(),$("#assignedlogos").unbind(),$("#uploadlogo").unbind(),$("table#details").unbind(),$("form#availablelogos input[name='filename']").unbind("click"),GINIT.initialize()}}),$.ajax({type:"GET",url:d,cache:!1,success:function(a){$("form#availablelogos").replaceWith(a),$("form#availablelogos").unbind(),$("form#assignedlogos").unbind(),$("#uploadlogo").unbind(),$("table#details").unbind(),$("form#availablelogos input[name='filename']").unbind("click"),GINIT.initialize()},error:function(a,b,c){$("#spinner").hide(),$("#availablelogos").unbind(),$("#uploadlogo").unbind(),$("table#details").unbind(),$("form#availablelogos input[name='filename']").off("click"),revealAlert('<div data-alert class="alert-box alert">'+a.responseText+"</div>","OK"),GINIT.initialize()}})},error:function(a,b,c){$("#spinner").hide(),revealAlert('<div data-alert class="alert-box alert">'+a.responseText+"</div>","OK")}}).done(function(){})}),$("li.fromprevtoright").each(function(){var a=$(this).prev(),b=a.offset().left,c=$(this).prev().find("input,textarea").last(),d=c.offset().left,e=c.width(),f=d+e-b;$(this).css("text-align","right").width(f)}),$("form#assignedlogos input[name='logoid']").click(function(){$(this).after($("div#unsignlogosbtn").show())}),$("form#applyforaccount").on("submit",function(a){a.preventDefault();var b=$("div.result"),c=$("form#applyforaccount").serializeArray();$.ajax({type:"POST",url:$(this).attr("action"),data:c,dataType:"html",cache:!1,beforeSend:function(){b.html(""),$("#spinner").show()},success:function(a){$("#spinner").hide(),b.html(a),$("form#applyforaccount").remove()},error:function(a,c,d){$("#spinner").hide(),b.html(a.responseText),b.css("color","red"),$("form#applyforaccount").remove()}})}),$("form#assignedlogos").on("submit",function(a){a.preventDefault();var b=$("div.uploadresult"),c=$("form#assignedlogos").serializeArray(),d=$("input[name=logoid]:radio:checked"),e=$("#messagereveal"),f=e.find("p.infomsg");$.ajax({type:"POST",url:$(this).attr("action"),data:c,dataType:"html",cache:!1,beforeSend:function(){$("div#unsignlogosbtn").hide().appendTo("form#assignedlogos"),b.html(""),$("#spinner").show()},success:function(a){$("#spinner").hide(),f.html(a),e.foundation("reveal","open"),d.parent().remove()},error:function(a,b,c){$("#spinner").hide(),f.html(a.responseText),e.foundation("reveal","open")}})}),$(".updatenotifactionstatus").click(function(a){a.preventDefault();var b=$("#notificationupdateform"),c=$(this).attr("value"),d=($(this).closest("tbody"),$(this).closest("tr")),e=(d.find("div.subscrstatus:first"),i+"notifications/subscriber/updatestatus/"+c);b.attr("action",e),b.find("#noteid").first().val(c)}),$("#fvform").submit(function(a){a.preventDefault();var b=$(this),c=b.serializeArray(),d=b.attr("action");b.find("button:focus").attr("id");$.ajax({type:"POST",url:d,cache:!1,data:c,timeout:12e4,success:function(a){$("#spinner").hide();var c=$.parseJSON(a);if(c){if(c.returncode&&($("span#fvreturncode").append(c.returncode),$("div#fvresult").show()),"success"===c.returncode?(b.find("button:focus").css("background-color","#00aa00"),b.find("button:focus").data("passed","true"),b.find("button:focus").attr("disabled","true")):"error"===c.returncode&&(b.find("button:focus").css("background-color","#aa0000"),b.find("button:focus").data("passed","false")),c.message){var d;$.each(c.message,function(a,b){$.each(b,function(b,c){d="<div>"+a+": "+c+"</div>",$("div#fvmessages").append(d)})})}}else alert("no data received from upstream server")},beforeSend:function(){$("span#fvreturncode").text(""),$("div#fvmessages").text(""),$("#spinner").show()},error:function(a,b,c){$("#spinner").hide(),"timeout"===b?window.alert("got timeout from validation server"):window.alert("unknown problem with receiving data")}})}),$("form#approvequeue").submit(function(a){var b=0,c=0;$("button[name='mandatory']").each(function(a){"true"===$(this).data("passed")&&(b+=1),c+=1}),c!==b&&(window.alert("All mandatory validations have to pass successfully!"),a.preventDefault())}),$(document).on("click",".fmembers","a",function(){var a=$(this),b=a.attr("href"),c=$(this).parent().parent();if($(c).hasClass("opened")===!0)$(c).next().remove(),$(c).removeClass("opened").removeClass("highlight");else{var d=$("<ul/>");$.ajax({url:b,timeout:9500,cache:!0,success:function(a){$("#spinner").hide();var b,e,f;if($(c).addClass("opened").addClass("highlight"),a)if(a.idp||a.sp||a.both){var g=a.definitions.preurl;a.idp&&(b=$("<div>"+a.definitions.idp+"</div>"),e=$("<ol/>"),$.each(a.idp,function(a,b){f='<li class="homeorg"><a href="'+g+b.pid+'">'+b.pname+"</a> ("+b.entityid+") </li>",e.append(f)}),b.append(e),d.append(b)),a.sp&&(b=$("<div>"+a.definitions.sp+"</div>"),e=$("<ol/>"),$.each(a.sp,function(a,b){f='<li class="resource"><a href="'+g+b.pid+'">'+b.pname+"</a> ("+b.entityid+") </li>",e.append(f)}),b.append(e),d.append(b)),a.both&&(b=$("<div>"+a.definitions.both+"</div>"),e=$("<ol/>"),$.each(a.both,function(a,b){f='<li class="both"><a href="'+g+b.pid+'">'+b.pname+"</a> ("+b.entityid+") </li>",e.append(f)}),b.append(e),d.append(b))}else f="<div>"+a.definitions.nomembers+"</div>",d.append(f);else window.alert("no data")},beforeSend:function(){$("#spinner").show()},error:function(){$("#spinner").hide(),window.alert("problem with loading data")}}).done(function(){var a='<tr class="feddetails"><td colspan="7"><ul class="feddetails">'+d.html()+"</ul></td></tr>";$(a).insertAfter(c)})}return!1}),$("#getmembers").click(function(){var a=$(this),b=a.attr("href"),c=$("<ul/>");return $.ajax({url:b,timeout:22500,cache:!0,dataType:"json",success:function(a){if($("#spinner").hide(),a){var b=$("<div/>");b.addClass("zebralist row"),b.css("list-style-type","decimal");var d,e=1,f=1;$.each(a,function(a,c){var g=$("<span/>");$.each(c.feds,function(a,b){var c='<span class="label">'+b+"</span>&nbsp;";g.append(c)}),d='<div class="large-12 columns" style="margin-top: 2px; margin-bottom: 2px"><div class="large-9 columns">'+f+'. <a href="'+c.url+'">'+c.name+"</a> <i> ("+c.entityid+') </i></div><div class="fedlbl large-3 end text-right columns">'+g.html()+"</div></div>",b.append(d),e+=1,f+=1}),c.append(b)}else window.alert("no data")},beforeSend:function(){$("#spinner").show()},error:function(){$("#spinner").hide(),window.alert("problem with loading data")}}).done(function(){var a=c.html();$("div#membership").replaceWith(a)}),!1}),$(".accordionButton").addClass("off").mouseover(function(){$(this).addClass("over")}).mouseout(function(){$(this).removeClass("over")}).click(function(){$(this).removeClass("on").addClass("off"),$(".accordionContent").slideUp("fast"),$(this).next().is(":hidden")===!0&&($(this).addClass("on"),$(this).removeClass("off"),$(this).next().slideDown("fast"))}),$(".accordionContent").hide()}};$(document).ready(function(){var a=$("#spinner");$(window).scroll(function(){$(this).scrollTop()>=100?$("#return-to-top").fadeIn(200):$("#return-to-top").fadeOut(200)}),$("#return-to-top").click(function(){$("body,html").animate({scrollTop:0},400)}),GINIT.initialize();var b,c=$("#accessmngmt");if(c.length){b=c.closest("form");var d=c.attr("data-jagger-jsource");$.ajax({type:"GET",url:d,dataTypa:"json",beforeSend:function(){a.show()},success:function(b){var d=b.definitions.admin,e=b.definitions.dictionary.allow,f=b.definitions.dictionary.deny,g=b.definitions.dictionary.hasaccess,h=b.definitions.dictionary.hasnoaccess,i=b.definitions.dictionary.username,j="Administrator",k="You";a.hide();var l=[];l.push("<table><thead><tr><th>"+i+"</th>"),$.each(b.definitions.actions,function(a,b){l.push("<th>"+b+"</th>")}),l.push("</tr></thead>"),l.push("<tbody>"),$.each(b.data,function(a,c){l.push("<tr><td>");var i="",m="",n="";c.isyou===!0&&(i=i+' <span class="label warning">'+k+"</span>",m=' disabled="disabled" '),c.isadmin===!0&&(i=i+' <span class="label">'+j+"</span>"),l.push(""+a+" ("+c.fullname+")"+i),l.push("</td>"),$.each(b.definitions.actions,function(b,i){n="",c.isadmin===!0?l.push("<td>"+g+"</td>"):("approve"===i&&d!==!0&&(m=' disabled="disabled" ',n="secondary"),c.perms[i]===!0?l.push("<td>"+g+" <div><button "+m+' class="tiny alert '+n+'" value="'+a+"$|$"+i+'$|$deny" name="changeaccess" type="submit" >'+f+"</button></div></td>"):l.push("<td>"+h+" <div><button "+m+' class="tiny '+n+'" value="'+a+"$|$"+i+'$|$allow" name="changeaccess" type="submit">'+e+"</button></div></td>"))}),l.push("</tr>")}),l.push("</tbody>"),l.push("</table>");var m=l.join("");c.html(m)},error:function(b,c,d){a.hide(),window.alert(b.responseText)}}),b.on("click","button",function(a){var c=$(this),d=b.serializeArray();return d.push({name:c.attr("name"),value:c.val()}),console.log(d),$.ajax({method:"POST",data:d,url:b.attr("action"),success:function(a){window.location.href=window.location.href},error:function(a,b,c){}}),!1})}var e=/^-?([0-8]?[0-9]|90)\.[0-9]{1,6},-?((1?[0-7]?|[0-9]?)[0-9]|180)\.[0-9]{1,6}$/,f=$("#providereditform");if(f.length){var g=$("#uihints"),h=$("#addlatlng"),i=[],j=[],k=f.find("#map-canvas");if(k.length)if("object"==typeof google&&"object"==typeof google.maps){google.maps.event.addDomListener(window,"load",mapInitialize);var l=$("#geogroup").first();i=[],l.find("input").each(function(a){var b=$(this).val().split(",");i.push(b)});var m=!1;g.on("toggled",function(a,b){if(m===!1){for(var c=new google.maps.LatLngBounds,d=0,e=i.length;e>d;d++){var f=new google.maps.LatLng(i[d][0],i[d][1]),g=new google.maps.Marker({position:f,map:map,title:""});g.setMap(map),j.push(g),c.extend(g.position)}m=!0;var h=map.getCenter();google.maps.event.trigger(map,"resize"),map.setCenter(h),i.length>0&&map.fitBounds(c)}var k=google.maps.event.addListener(map,"idle",function(){map.getZoom()>16&&map.setZoom(16),google.maps.event.removeListener(k)})})}else k.append('<div data-alert class="alert-box alert">Map could not be loaded</div>');f.on("click","a.rmgeo",function(a){for(var b=$(this).closest("div.georow").find("input").first().val(),c=b.split(","),d=0,e=j.length;e>d;d++){var f=j[d];console.log(f.position.lat()+" ?? "+c[0]),parseFloat(f.position.lat())===parseFloat(c[0])&&(f.setMap(null),j.splice(d,1))}return $(this).closest("div.georow").remove(),!1}),h.on("click",function(a){a.preventDefault();var b=$("#latlng").val();if(e.test(b)){for(var c="z",d="0123456789",f=0;5>f;f++)c+=d.charAt(Math.floor(Math.random()*d.length));var g='<div class="small-12 column collapse georow"><div class="small-11 column"><input name="f[uii][idpsso][geo]['+c+']" type="text" value="'+b+'" readonly="readonly"></div><div class="small-1 column"><a href="#" class="rmgeo"><i class="fi-trash alert" style="color: red"></i></a></div></div>';if($(g).appendTo($("#geogroup")),"object"==typeof google&&"object"==typeof google.maps){var h=new google.maps.LatLngBounds,i=b.split(","),k=new google.maps.LatLng(i[0],i[1]),l=new google.maps.Marker({position:k,map:map,title:""});l.setMap(map),j.push(l),h.extend(l.position)}}else window.alert("incorrect value")});var n;f.find("div.group").each(function(){var a=$(this).find("select").first();$(this).find("button.langinputrm").each(function(){n=$(this).attr("value"),a.find("option[value="+n+"]").each(function(){$(this).toggleOption(!0),$(this).attr("disabled",!0)})})}),$("button#idpssoadddomainhint").click(function(){for(var a="",b="0123456789",c=0;5>c;c++)a+=b.charAt(Math.floor(Math.random()*b.length));var d=$("button#helperbutttonrm").html(),e=($(this).attr("value"),"f[uii][idpsso][domainhint][n"+a+"]"),f=createRowWithLangRm("Domain Hint","Domain Hint",e,d);f.insertBefore($(this).closest("span").parent())}),$("button#idpssoaddiphint").click(function(){for(var a="",b="0123456789",c=0;5>c;c++)a+=b.charAt(Math.floor(Math.random()*b.length));var d=$("button#helperbutttonrm").html(),e=($(this).attr("value"),"f[uii][idpsso][iphint][n"+a+"]"),f=createRowWithLangRm("IP Hint","IP Hint",e,d);f.insertBefore($(this).closest("span").parent())}),$("button#addlhelpdesk").click(function(){var a=$("span.lhelpdeskadd option:selected").first(),b=a.val(),c=$("button#helperbutttonrm").html();if("undefined"==typeof b)return!1;var d=a.text();$(this).attr("value");a.attr("disabled",!0).attr("selected",!1);var e="f[lhelpdesk]["+b+"]",f=createRowWithLangRm(b,d,e,c);f.insertBefore($(this).closest("span").parent())}),$("button#addldisplayname").click(function(){var a=$("span.ldisplaynameadd option:selected").first(),b=a.val(),c=$("button#helperbutttonrm").html();if("undefined"==typeof b)return!1;var d=a.text();$(this).attr("value");a.attr("disabled",!0).attr("selected",!1);var e="f[ldisplayname]["+b+"]",f=createRowWithLangRm(b,d,e,c);f.insertBefore($(this).closest("span").parent())}),$("button#idpadduiidisplay").click(function(){var a=$("span.idpuiidisplayadd option:selected").first(),b=a.val(),c=$("button#helperbutttonrm").html();if("undefined"==typeof b)return!1;var d=a.text();$(this).attr("value");a.attr("disabled",!0).attr("selected",!1);var e="f[uii][idpsso][displayname]["+b+"]",f=createRowWithLangRm(b,d,e,c);f.insertBefore($(this).closest("span").parent())}),$("button#idpadduiihelpdesk").click(function(){var a=$("span.idpuiihelpdeskadd option:selected").first(),b=a.val();if("undefined"==typeof b)return!1;
var c=$("button#helperbutttonrm").html(),d=a.text();$(this).attr("value");a.attr("disabled",!0).attr("selected",!1);var e="f[uii][idpsso][helpdesk]["+b+"]",f=createRowWithLangRm(b,d,e,c);f.insertBefore($(this).closest("span").parent())}),$("button#spadduiidisplay").click(function(){var a=$("span.spuiidisplayadd option:selected").first(),b=a.val();if("undefined"==typeof b)return!1;var c=a.text(),d=$("button#helperbutttonrm").html();a.attr("disabled",!0).attr("selected",!1);var e="f[uii][spsso][displayname]["+b+"]",f=createRowWithLangRm(b,c,e,d);f.insertBefore($(this).closest("span").parent())}),$("button#spadduiihelpdesk").click(function(){var a=$("span.spuiihelpdeskadd option:selected").first(),b=a.val();if("undefined"==typeof b)return!1;var c=a.text(),d=$("button#helperbutttonrm").html();a.attr("disabled",!0).attr("selected",!1);var e="f[uii][spsso][helpdesk]["+b+"]",f=createRowWithLangRm(b,c,e,d);f.insertBefore($(this).closest("span").parent())}),$("button#spadduiidesc").click(function(){var a=$("span.spuiidescadd option:selected").first(),b=a.val();if("undefined"==typeof b)return!1;var c=a.text(),d=$("button#helperbutttonrm").html();a.attr("disabled",!0).attr("selected",!1),$('<div class="small-12 columns"><div class="small-3 columns"><label for="f[uii][spsso][desc]['+b+']" class="right inline">'+c+'</label></div><div class="small-6 large-7 columns"><textarea id="f[uii][spsso][desc]['+b+']" name="f[uii][spsso][desc]['+b+']" rows="5" cols="40"/></textarea></div><div class="small-3 large-2 columns"><button type="button" class="btn langinputrm button tiny left inline alert" name="uiispdescrm" value="'+b+'">'+d+"</button></div></div>").insertBefore($(this).closest("span").parent())}),$("button#addlname").click(function(){var a=$("span.lnameadd option:selected").first(),b=a.val();if("undefined"==typeof b)return!1;var c=$("button#helperbutttonrm").html(),d=a.text();$(this).attr("value");a.attr("disabled",!0).attr("selected",!1);var e="f[lname]["+b+"]",f=createRowWithLangRm(b,d,e,c);f.insertBefore($(this).closest("span").parent())});var o=$("button[name='addinnewlang']");o.on("click",function(a){var b=$(this),c=(b.closest("fieldset"),b.closest("span"));if(0===c.length)return!1;var d=c.find(":selected").first();if(0===d.length)return!1;var e=d.attr("disabled");if(null!==e&&"disabled"===e)return!1;var f=d.val(),g=d.text();if("undefined"==typeof f||""===f)return!1;var h=$("button#helperbutttonrm").html(),i=b.attr("value").replace("XXX",f);d.attr("disabled",!0).attr("selected",!1);var j=createRowWithLangRm(f,g,i,h);j.insertBefore($(this).closest("span").parent())}),$("button#idpadduiidesc").click(function(){var a=$("span.idpuiidescadd option:selected").first(),b=a.val();if("undefined"==typeof b)return!1;var c=$("button#helperbutttonrm").html(),d=a.text();$(this).attr("value");a.attr("disabled",!0).attr("selected",!1),$('<div class="small-12 columns"><div class="small-3 columns"><label for="f[uii][idpsso][desc]['+b+']" class="right inline">'+d+' </label></div><div class="small-6 large-7 columns"><textarea id="f[uii][idpsso][desc]['+b+']" name="f[uii][idpsso][desc]['+b+']" rows="5" cols="40"/></textarea></div><div class="small-3 large-2 columns"> <button type="button" class="btn langinputrm button tiny left inline" name="ldesc" value="'+b+'">'+c+"</button></div></div>").insertBefore($(this).closest("span").parent())}),$("button#addlprivacyurlspsso").click(function(){var a=$("span.addlprivacyurlspsso option:selected").first(),b=a.val();if("undefined"==typeof b)return!1;var c=a.text(),d=$("button#helperbutttonrm").html();$(this).attr("value");a.attr("disabled",!0).attr("selected",!1);var e="f[prvurl][spsso]["+b+"]",f=createRowWithLangRm(b,c,e,d);f.insertBefore($(this).closest("span").parent())}),$("button#addlprivacyurlidpsso").click(function(){var a=$("span.addlprivacyurlidpsso option:selected").first(),b=a.val(),c=$("button#helperbutttonrm").html();if("undefined"==typeof b)return!1;var d=a.text();$(this).attr("value");a.attr("disabled",!0).attr("selected",!1);var e="f[prvurl][idpsso]["+b+"]",f=createRowWithLangRm(b,d,e,c);f.insertBefore($(this).closest("span").parent())}),$("#ncontactbtn").click(function(){var a=genRandomStr(5),b=$(this).attr("value").split("|"),c='<div class="group"><div class="small-12 columns"><fieldset><legend>'+b[5]+'</legend><div><div class="small-12 columns"><div class="small-3 columns"><label for="f[contact][n_'+a+'][type]" class="right inline">'+b[1]+'</label></div><div class="small-8 large-7 columns inline"><select name="f[contact][n_'+a+'][type]"> <option value="administrative">Administrative</option> <option value="technical">Technical</option> <option value="support" selected="selected">Support</option> <option value="billing">Billing</option> <option value="other">Other</option> </select></div><div class="small-1 large-2 columns"></div></div> <div class="small-12 columns"><div class="small-3 columns"><label for="f[contact][n_'+a+'][fname]" class="right inline">'+b[2]+'</label></div><div  class="small-8 large-7 columns"><input type="text" name="f[contact][n_'+a+'][fname]" value="" id="f[contact][n_'+a+'][fname]" class="right inline" /></div><div class="small-1 large-2 columns"></div></div> <div class="small-12 columns"><div  class="small-3 columns"><label for="f[contact][n_'+a+'][sname]" class="right inline">'+b[3]+'</label></div><div class="small-8 large-7 columns"><input type="text" name="f[contact][n_'+a+'][sname]" value="" id="f[contact][n_'+a+'][sname]" class="right inline" /></div><div class="small-1 large-2 columns"></div></div><div class="small-12 columns"><div class="small-3 columns"><label for="f[contact][n_'+a+'][email]" class="right inline ">'+b[4]+'</label></div><div class="small-8 large-7 columns"><input type="text" name="f[contact][n_'+a+'][email]" value="" id="f[contact][n_'+a+'][email]" class="right inline" /></div><div class="small-1 large-2 columns"></div></div><div class="rmelbtn small-12 columns"><div class="small-9 large-10 columns"><button type="button" class="btn contactrm tiny alert button inline right" name="contact" value="'+a+'">'+b[0]+'</button></div><div class="small-3 large-2 columns"></div></div></div></fieldset></div></div>';$(this).parent().before(c)}),$("#nidpssocert").click(function(){var a="newx"+genRandomStr(5),b='<div class="certgroup small-12 columns"><div class="small-12 columns hidden"><div class="small-3 columns"><label for="f[crt][idpsso]['+a+'][type]" class="inline right">Certificate type</label></div><div class="small-6 large-7 columns"><select name="f[crt][idpsso]['+a+'][type]"> <option value="x509">x509</option> </select></div><div class="small-3 large-2 columns"></div><div class="small-3 large-2 columns"></div></div><div class="small-12 columns"><div class="small-3 columns"><label for="f[crt][idpsso]['+a+'][usage]" class="inline right">Certificate use</label></div><div class="small-6 large-7 columns"><select name="f[crt][idpsso]['+a+'][usage]"> <option value="signing">signing</option> <option value="encryption">encryption</option> <option value="both" selected="selected">signing and encryption</option> </select> </div><div class="small-3 large-2 columns"></div></div><div class="small-12 columns hidden"><div class="small-3 columns"><label for="f[crt][idpsso]['+a+'][keyname]" class="inline right">KeyName</label></div><div class="small-6 large-7 columns"><input type="text" name="f[crt][idpsso]['+a+'][keyname]" value="" id="f[crt][idpsso]['+a+'][keyname]" class=""  /> </div><div class="small-3 large-2 columns"></div></div><div class="small-12 columns"><div class="small-3 columns"><label for="f[crt][idpsso]['+a+'][certdata]" class="inline right">Certificate</label></div><div class="small-6 large-7 columns"><textarea name="f[crt][idpsso]['+a+'][certdata]" cols="65" rows="20" id="f[crt][idpsso]['+a+'][certdata]" class="certdata notice" ></textarea></div><div class="small-3 large-2 columns"></div></div>';$(this).parent().before(b)}),$("#naacert").click(function(){var a="newx"+genRandomStr(5),b='<div class="certgroup small-12 columns"><div class="small-12 columns hidden"><div class="small-3 columns"><label for="f[crt][aa]['+a+'][type]" class="inline right">Certificate type</label></div><div class="small-6 large-7 columns"><select name="f[crt][aa]['+a+'][type]"> <option value="x509">x509</option> </select> </div><div class="small-3 large-2 columns"></div><div class="small-3 large-2 columns"></div></div><div class="small-12 columns"><div class="small-3 columns"><label for="f[crt][aa]['+a+'][usage]" class="inline right">Usage</label></div><div class="small-6 large-7 columns"><select name="f[crt][aa]['+a+'][usage]"> <option value="signing">signing</option> <option value="encryption">encryption</option> <option value="both" selected="selected">signing and encryption</option> </select> </div><div class="small-3 large-2 columns"></div></div><div class="small-12 columns hidden"><div class="small-3 columns"><label for="f[crt][aa]['+a+'][keyname]" class="inline right">KeyName</label></div><div class="small-6 large-7 columns"><input type="text" name="f[crt][aa]['+a+'][keyname]" value="" id="f[crt][aa]['+a+'][keyname]" class=""  /> </div><div class="small-3 large-2 columns"></div></div><div class="small-12 columns"><div class="small-3 columns"><label for="f[crt][aa]['+a+'][certdata]" class="inline right">Certificate</label></div><div class="small-6 large-7 columns"><textarea name="f[crt][aa]['+a+'][certdata]" cols="65" rows="20" id="f[crt][aa]['+a+'][certdata]" class="certdata notice" ></textarea> </div><div class="small-3 large-2 columns"></div></div> ';$(this).parent().before(b)}),$("#nspssocert").click(function(){var a="newx"+genRandomStr(5),b='<div class="certgroup small-12 columns"><div class="small-12 columns hidden"><div class="small-3 columns"><label for="f[crt][spsso]['+a+'][type]" class="right inline">Certificate type</label></div><div class="small-8 large-7 columns"><select name="f[crt][spsso]['+a+'][type]"><option value="x509">x509</option></select> </div><div class="small-1 large-2 columns end"></div></div><div class="small-12  columns"><div class="small-3 columns"><label for="f[crt][spsso]['+a+'][usage]" class="right inline">Certificate use</label></div><div class="small-8 large-7 columns"><select name="f[crt][spsso]['+a+'][usage]"><option value="signing">signing</option> <option value="encryption">encryption</option> <option value="both" selected="selected">signing and encryption</option> </select></div><div class="small-1 large-2 columns end"></div></div><div class="small-12 columns hidden"><div class="small-3 columns"><label for="f[crt][spsso]['+a+'][keyname]" class="right inline">KeyName</label></div><div class="small-8 large-7 columns"><input type="text" name="f[crt][spsso]['+a+'][keyname]" value="" id="f[crt][spsso]['+a+'][keyname]" class=""  /></div><div class="small-1 large-2 columns end"></div> </div><div class="small-12 columns"><div class="small-3 columns"><label for="f[crt][spsso]['+a+'][certdata]" class="right inline">Certificate</label></div><div class="small-8 large-7 columns"><textarea name="f[crt][spsso]['+a+'][certdata]" cols="65" rows="20" id="f[crt][spsso]['+a+'][certdata]" class="certdata" ></textarea></div><div class="small-1 large-2 columns end"></div></div><div class="small-12 columns"><div class="small-3 columns">&nbsp;</div><div class="small-6 large-7 columns"><button class="certificaterm button alert tiny right" value="'+a+'" name="certificate" type="button">Remove certificate</button></div><div class="small-3 large-2 columns"></div></div></div>';$(this).parent().before(b)}),$("#nacsbtn").click(function(){var a=genRandomStr(5),b='<div class="srvgroup"><div class="small-12 columns"><div class="small-3 columns"><label for="f[srv][AssertionConsumerService][n_'+a+'][bind]" class="right inline">Binding Name</label></div><div class="small-5 columns inline"><select name="f[srv][AssertionConsumerService][n_'+a+'][bind]"> <option value="urn:oasis:names:tc:SAML:2.0:bindings:HTTP-POST">urn:oasis:names:tc:SAML:2.0:bindings:HTTP-POST</option> <option value="urn:oasis:names:tc:SAML:2.0:bindings:HTTP-Artifact" selected="selected">urn:oasis:names:tc:SAML:2.0:bindings:HTTP-Artifact</option> <option value="urn:oasis:names:tc:SAML:2.0:bindings:HTTP-POST-SimpleSign">urn:oasis:names:tc:SAML:2.0:bindings:HTTP-POST-SimpleSign</option> <option value="urn:oasis:names:tc:SAML:2.0:bindings:PAOS">urn:oasis:names:tc:SAML:2.0:bindings:PAOS</option> <option value="urn:oasis:names:tc:SAML:2.0:profiles:browser-post">urn:oasis:names:tc:SAML:2.0:profiles:browser-post</option> <option value="urn:oasis:names:tc:SAML:1.0:profiles:browser-post">urn:oasis:names:tc:SAML:1.0:profiles:browser-post</option> <option value="urn:oasis:names:tc:SAML:1.0:profiles:artifact-01">urn:oasis:names:tc:SAML:1.0:profiles:artifact-01</option> </select></div> <div class="small-4 columns"><div class="small-6 columns"><input type="text" name="f[srv][AssertionConsumerService][n_'+a+'][order]" value="" id="f[srv][AssertionConsumerService][n_'+a+'][order]" size="2" maxlength="2" class="acsindex "  /></div><div class="small-6 columns"><label for="f[srv][AssertionConsumerService][n_'+a+'][default]">Is default</label><input type="radio" name="f[srv][AssertionConsumerService][n_'+a+'][default]" value="1" id="f[srv][AssertionConsumerService][n_'+a+'][default]" class="acsdefault"/></div></div> </div>          <div class="small-12 columns"><div class="small-3 columns"><label for="f[srv][AssertionConsumerService][n_'+a+'][url]" class="right inline">URL</label></div><div class="small-8 large-7 columns inline"><input name="f[srv][AssertionConsumerService][n_'+a+'][url]" id="f[srv][AssertionConsumerService][n_'+a+'][url]" type="text"></div><div class="small-3 large-2 columns"><button class="inline left button tiny alert rmfield"  name="rmfield" type="button">Remove</button></div></div></div>';$(this).parent().before(b)}),$("#nidpartifactbtn").click(function(){var a=genRandomStr(5),b='<div class="srvgroup"><div class="small-12 columns"><div class="small-3 columns"><label for="f[srv][IDPArtifactResolutionService][n_'+a+'][bind]" class="right inline">Binding Name</label></div><div class="small-6 large-7 columns inline"><select name="f[srv][IDPArtifactResolutionService][n_'+a+'][bind]"> <option value="urn:oasis:names:tc:SAML:2.0:bindings:SOAP" selected="selected">urn:oasis:names:tc:SAML:2.0:bindings:SOAP</option> <option value="urn:oasis:names:tc:SAML:1.0:bindings:SOAP-binding">urn:oasis:names:tc:SAML:1.0:bindings:SOAP-binding</option></select></div> <div class="small-2 large-1 columns end"><input type="text" name="f[srv][IDPArtifactResolutionService][n_'+a+'][order]" value="" id="f[srv][IDPArtifactResolutionService][n_'+a+'][order]" size="2" maxlength="2" class="acsindex "  /></div></div> <div class="small-12 columns"><div class="small-3 columns"><label for="f[srv][IDPArtifactResolutionService][n_'+a+'][url]" class="right inline">URL</label></div><div class="small-6 large-7 columns inline"><input name="f[srv][IDPArtifactResolutionService][n_'+a+'][url]" id="f[srv][IDPArtifactResolutionService][n_'+a+'][url]" type="text"></div><div class="small-3 large-2 columns"><button class="inline left button tiny alert rmfield" value="" name="rmfield" type="button">Remove</button></div></div>';$(this).parent().before(b)}),$("#nspartifactbtn").click(function(){var a=genRandomStr(5),b='<div class="srvgroup"><div class="small-12 columns"><div class="small-3 columns"><label for="f[srv][SPArtifactResolutionService][n_'+a+'][bind]" class="right inline">Binding Name</label></div><div class="small-8 large-7 columns inline"><select name="f[srv][SPArtifactResolutionService][n_'+a+'][bind]"> <option value="urn:oasis:names:tc:SAML:2.0:bindings:SOAP" selected="selected">urn:oasis:names:tc:SAML:2.0:bindings:SOAP</option> <option value="urn:oasis:names:tc:SAML:1.0:bindings:SOAP-binding">urn:oasis:names:tc:SAML:1.0:bindings:SOAP-binding</option></select> </div> <div class="small-1  columns left"><input type="text" name="f[srv][SPArtifactResolutionService][n_'+a+'][order]" value="" id="f[srv][SPArtifactResolutionService][n_'+a+'][order]" size="2" maxlength="2" class="acsindex "  /></div></div>           <div class="small-12 columns"><div class="small-3 columns"><label for="f[srv][SPArtifactResolutionService][n_'+a+'][url]" class="right inline">URL</label></div><div class="small-6 large-7 columns inline"><input name="f[srv][SPArtifactResolutionService][n_'+a+'][url]" id="f[srv][SPArtifactResolutionService][n_'+a+'][url]" type="text"> </div><div class="small-3 large-2 columns"><button class="inline left button tiny alert rmfield"  name="rmfield" type="button">Remove</button></div></div>';$(this).parent().before(b)}),$("#ndrbtn").click(function(){var a=genRandomStr(5),b='<div class="srvgroup"><div class="small-12 columns"><div class="small-3 columns"><label for="f[srv][DiscoveryResponse][n_'+a+'][bind]" class="right inline">Binding Name</label></div><div class="small-6 large-7 columns"><select name="f[srv][DiscoveryResponse][n_'+a+'][bind]"><option value="urn:oasis:names:tc:SAML:profiles:SSO:idp-discovery-protocol">urn:oasis:names:tc:SAML:profiles:SSO:idp-discovery-protocol</option></select> </div><div class="small-1 columns end"><input type="text" name="f[srv][DiscoveryResponse][n_'+a+'][order]" value="" id="f[srv][DiscoveryResponse][n_'+a+'][order]" size="2" maxlength="2" class="acsindex "  /></div></div><div class="small-12 columns"><div class="small-3 columns"><label for="f[srv][DiscoveryResponse][n_'+a+'][url]" class="right inline">URL</label></div><div class="small-6 large-7 columns"><input name="f[srv][DiscoveryResponse][n_'+a+'][url]" id="f[srv][DiscoveryResponse][n_'+a+'][url]" type="text"></div><div class="small-1 columns end"><button class="rmfield button alert tiny left" name="rmfield">Remove</button></div></div></div>';$(this).parent().before(b)}),$("#nribtn").click(function(){var a=genRandomStr(5),b='<div class="small-12 columns srvgroup"><div class="small-3 columns"><label for="f[srv][RequestInitiator][n_'+a+'][url]" class="right inline">URL</label></div><div class="small-6 large-7 columns"><input name="f[srv][RequestInitiator][n_'+a+'][url]" id="f[srv][RequestInitiator][n_'+a+'][url]" type="text"></div><div class="small-3 large-2 columns"><button type="button" class="inline left button tiny alert rmfield" name="rmfield" value="">remove</button></div></div>';$(this).parent().before(b)}),$("button.addnewlogo").click(function(){var a,b=$(this).closest("div.reviewlogo"),c=b.attr("id"),d=genRandomStr(5),e="sp";"idpreviewlogo"===c&&(e="idp");var f=b.find("input[name='"+e+"inputurl']").attr("value"),g=b.find("input[name='"+e+"inputsize']").attr("value"),h=b.find("select[name='"+e+"logolang']").val(),i=b.find("input[name='"+e+"embedded']").first(),j=b.find("input[name='"+e+"logoraw']").attr("value");a="0"===h?"unspec":h;var k,l='<input type="hidden" name="f[uii]['+e+"sso][logo][n"+d+'][size]" value="'+g+'">',m='<input type="hidden" name="f[uii]['+e+"sso][logo][n"+d+'][lang]" value="'+h+'">',n=$("li#nlogo"+e+"row"),o=n.clone(!0);o.removeAttr("id"),null!==i&&i.is(":checked")&&"embedded"===i.val()&&void 0!==j&&null!==j&&""!==j?(k='<input type="hidden" name="f[uii]['+e+"sso][logo][n"+d+'][url]" value="'+j+'">',o.find("img").first().attr("src",j).append(k).append(l).append(m),o.find("div.logoinfo").first().append(""+a+"<br />").append(g+"<br />")):(k='<input type="hidden" name="f[uii]['+e+"sso][logo][n"+d+'][url]" value="'+f+'">',o.find("img").first().attr("src",f).append(k).append(l).append(m),o.find("div.logoinfo").first().append(""+a+"<br />").append(f+"<br />").append(g+"<br />")),o.insertBefore(n).show()}),$("button.getlogo").click(function(){var a,b,c,d,e=$(this).attr("name"),f=$(this).attr("value");"idpgetlogo"===e?(d=$("#idpreviewlogo"),d.hide(),a=$("small.idplogoretrieve"),a.empty().hide(),c=$("[name='idplogoretrieve']").val(),b=$("#idpreviewlogo").find("div.imgsource").first()):(d=$("#spreviewlogo"),d.hide(),a=$("small.splogoretrieve"),a.empty().hide(),c=$("[name='splogoretrieve']").val(),b=$("#spreviewlogo").find("div.imgsource").first());var g=$("[name='csrfname']").val(),h=$("[name='csrfhash']").val(),i=[{name:g,value:h},{name:"logourl",value:c}];$.ajax({type:"POST",url:f,cache:!1,data:i,dataType:"json",success:function(c){if(c)if(c.error)a.append(c.error).show();else if(c.data){var f=c.data,g=new Image;g.onload=function(){},g.src=f.url;var h,i,j,k,l=f.width+"x"+c.data.height;genRandomStr(5);"idpgetlogo"===e?(j='<input type="hidden" name="logotype" value="idp">',h='<input type="hidden" name="idpinputurl" value="'+c.data.url+'">',i='<input type="hidden" name="idpinputsize" value="'+l+'">',k='<input type="hidden" name="idplogoraw" value="'+c.data.raw+'">',b.empty().append(g).append(h).append(i).append(j).append(k),$("div#idpreviewlogo div.logoinfo").empty().append(l),d.show()):"spgetlogo"===e&&(j='<input type="hidden" name="logotype" value="idp">',h='<input type="hidden" name="spinputurl" value="'+c.data.url+'">',i='<input type="hidden" name="spinputsize" value="'+l+'">',k='<input type="hidden" name="splogoraw" value="'+c.data.raw+'">',b.empty().append(g).append(h).append(i).append(j).append(k),$("div#spreviewlogo div.logoinfo").empty().append(l),d.show())}}})}),f.on("click","button.contactrm",function(a){var b=($(this).attr("value"),$(this).attr("name"),$(this).closest("div.group"));b.remove()}),f.on("click","button.certificaterm",function(a){var b=($(this).attr("value"),$(this).attr("name"),$(this).closest("div.certgroup"));b.remove()}),f.on("click","input.acsdefault",function(a){$(this).is(":checked")&&$(".acsdefault").not(this).removeAttr("checked")}),f.on("click","button.rmfield",function(a){var b=$(this).closest("div.srvgroup");$(this).attr("value"),$(this).attr("name");b.find("input").each(function(){$(this).attr("value","")}),b.find("textarea").each(function(){$(this).val("")}),b.remove()}),f.on("click","button.langinputrm",function(a){var b=$(this).closest("div").parent(),c=$(this).attr("value"),d=$(this).closest("div.group").find("select").first();return b.find("input").each(function(){$(this).attr("value","")}),b.find("textarea").each(function(){$(this).val("")}),d.find("option[value="+c+"]").each(function(){$(this).toggleOption(!0),$(this).attr("disabled",!1)}),b.remove(),!1})}$("#spmatrixload").on("click",function(b){var c=$(this),d=$(this).attr("data-jagger-ajaxurl"),e=$(document).find("#spmatrixdiv").first();$.ajax({type:"GET",url:d,cache:!1,dataType:"json",beforeSend:function(){a.show()},success:function(b){if(a.hide(),b){var d=b.attrs,f=b.data,g=b.providerprefurl,h='<div><span class="den">&nbsp;&nbsp;&nbsp;</span> <span>denied</span></div><div><span class="perm">&nbsp;&nbsp;&nbsp;</span><span>permitted</span></div><div><span class="dis">&nbsp;&nbsp;&nbsp;</span><span>not supported</span></div><div><span>R</span>-<span>required</span></div><div><span>D</span>-<span>desired</span></div>',i=0,j='<table class="table table-header-rotated" id="idpmatrixresult"><thead><tr>';j+='<th style="background: white">'+h+"</th>",$.each(d,function(a,b){j+='<th class="rotate"><div><span>'+a+"</span></div></th>",i++}),i>52&&$("#container").css({"max-width":"100%"});var k,l,m;j+="</tr></thead><tbody>",$.each(f,function(a,b){j+='<tr><td data-jagger-entidlink="'+b.idpid+'" class="searchcol"><a href="'+g+"/"+b.idpid+'" title="'+b.entityid+'" >'+b.name+'</a><span class="hidden">'+a+"</span></td>",$.each(d,function(a,c){m="",l=b.data.attributes[""+a],k=c[0].toUpperCase(),void 0===l?m="dis":0===l?m="den":1===l?m="R"===k?"perm":"den":2===l&&(m="perm"),j+='<td class="'+m+'">',j+=k+"</td>"})}),j+="</tbody></table>",c.hide(),e.html(j)}},error:function(){a.hide()}})});var p;if($("#attrpols").length>0){var q=$("#attrpols").first(),r=$("#attrpolstab").first(),s=$("#arpmaddspecattr").first();p=q.attr("data-jagger-providerdetails");var t;r.on("toggled",function(b,c){var d='<div class="progress"><span class="meter" style="width: 10%"></span></div>',e=$($.parseHTML(d)),f=e.find("span.meter").first(),g=$("#addattrsupport"),h=$("#addentcatattr"),i=$("#addespecattr");console.log(b,c);var j=$(c).attr("data-reveal-ajax-tab");if(void 0===j)return!1;var k,l=q.find("section.active").first();$.ajax({url:j,method:"GET",dataType:"json",beforeSend:function(){a.show()},success:function(b){a.hide(),f.css("width","100%");var c,d,e,j=[];if("supported"===b.type)$.each(b.data.support,function(a,b){j.push(b)}),k='<div class="small-12 column"><table class="table"><thead><tr>',$.each(b.definitions.columns,function(a,b){k+="<th>"+b+"</th>"}),k+="</tr></thead>",$.each(b.data.global,function(a,f){e=parseInt(f),d="",k+="<tr><td>"+b.definitions.attrs[a]+"</td><td>",k+=0===e?'<span class="label alert">'+b.definitions.policy[f]+"</span>":1===e?'<span class="label warning">'+b.definitions.policy[f]+"</span>":2===e?'<span class="label success">'+b.definitions.policy[f]+"</span>":'<span class="label">'+b.definitions.policy[f]+"</span>",c=j.indexOf(parseInt(a));var g="1";-1===c&&(d='&nbsp;<span class="label alert">'+b.definitions.policy[1e3]+"</span>",g="0"),k+=d,k+="</td><td>",k+='<a href="#" class="modalconfirm" data-jagger-attrpolicy="'+f+'" data-jagger-attrsupport="'+g+'" data-jagger-attrname="'+b.definitions.attrs[a]+'" data-jagger-attrid="'+a+'" data-jagger-action="edit" data-jagger-arp="global"><i class="fi-pencil"></i></a>',-1===c&&(k+='&nbsp;&nbsp;&nbsp;<a href="#" class="modalconfirm" data-jagger-attrsupport="'+g+'" data-jagger-attrname="'+b.definitions.attrs[a]+'" data-jagger-attrid="'+a+'" data-jagger-action="delete" data-jagger-arp="global"><i class="fi-trash alert"></i></a>'),k+="</td></tr>"}),k+="</table></div>",g.show().prependTo(l.html(k));else if("federation"===b.type){$.each(b.data.support,function(a,b){j.push(b)});var m,n,o=0,p=b.definitions.lang.federation;k='<div class="small-12 column"><table class="table"><thead><tr>',$.each(b.definitions.columns,function(a,b){o+=1,k+="<th>"+b+"</th>"}),k+="</tr></thead>";var q,r=o-2,s=b.definitions.statusstr;$.each(b.data.fedpols,function(a,d){var e=j.slice(0);t=parseInt(a),q=b.data.activefeds.indexOf(t),k+=-1===q?'<tr><td colspan="'+o+'" class="highlight">'+p+": "+b.definitions.feds[a]+' <span class="label alert">'+s.inactive+"</span></td></tr>":'<tr><td colspan="'+o+'" class="highlight">'+p+": "+b.definitions.feds[a]+"</td></tr>",$.each(d,function(d,f){n="",m=parseInt(f),c=e.indexOf(parseInt(d)),0===m?n="alert":1===m?n="warning":2===m&&(n="success"),k+="<tr><td>"+b.definitions.attrs[d]+'</td><td><span class="label '+n+'">'+b.definitions.policy[f]+"</span>",-1===c?k+='&nbsp;<span class="label alert">'+b.definitions.lang.unsupported+"</span>":e.splice(c,1),k+='</td><td></td><td colspan="'+r+'"><a href="#" class="modalconfirm" data-jagger-attrpolicy="'+f+'" data-jagger-arp="fed" data-jagger-action="edit" data-jagger-fedid="'+a+'" data-jagger-attrid="'+d+'" data-jagger-attrname="'+b.definitions.attrs[d]+'"><i class="fi-pencil"></i></a></td></tr>'}),$.each(e,function(c,d){k+="<tr><td>"+b.definitions.attrs[d]+'</td><td><span class="label secondary">'+b.definitions.policy[100]+'</span></td><td></td><td colspan="'+r+'"><a href="#" class="modalconfirm" data-jagger-arp="fed" data-jagger-attrname="'+b.definitions.attrs[d]+'" data-jagger-attrpolicy="100" data-jagger-fedid="'+a+'" data-jagger-action="edit" data-jagger-attrid="'+d+'"><i class="fi-pencil"></i></a></td></tr>'})}),k+="</table></div>",l.html(k)}else if("entcat"===b.type){o=0,n="";var u,c,v,w=b.definitions.ecmembers;$.each(b.data.support,function(a,b){j.push(b)}),k='<div class="small-12 column"><table class="table"><thead><tr>',$.each(b.definitions.columns,function(a,b){o+=1,k+="<th>"+b+"</th>"}),k+="</tr></thead>",$.each(b.data.entcats,function(a,d){k+='<tr><td colspan="'+o+'" class="highlight">EntityCategory: '+b.definitions.entcats[a].name+"  "+b.definitions.entcats[a].value+' <i class="ecmembers fi-list"  data-jagger-jsource="'+w+"/"+a+'"></i></td></tr>',$.each(d,function(d,e){v="",c=j.indexOf(parseInt(d)),-1===c&&(v='&nbsp;<span class="label alert">'+b.definitions.policy[1e3]+"</span>"),n="",u=parseInt(e),0===u?n="alert":1===u?n="warning":2===u&&(n="success"),k+="<tr>",k+="<td>"+b.definitions.attrs[d]+'</td><td><span class="label '+n+'">'+b.definitions.policy[e]+"</span>"+v+'</td><td><a href="#" class="modalconfirm" data-jagger-arp="entcat" data-jagger-entcatid="'+a+'" data-jagger-attrid="'+d+'" data-jagger-arp="entcat" data-jagger-action="edit" data-jagger-attrname="'+b.definitions.attrs[d]+'" data-jagger-attrpolicy="'+e+'"><i class="fi-pencil"></i></a></td>',k+="</tr>"})}),k+="</table></div>",h.show().prependTo(l.html(k))}else if("sp"===b.type){o=1,k='<div class="small-12 column"><table class="table"><thead><tr>',$.each(b.definitions.columns,function(a,b){o+=1,k+="<th>"+b+"</th>"}),k+="</tr></thead>",$.each(b.data.supported,function(a,b){j.push(b)});var x,y,z,A,B=(b.data.sps,{0:"alert",1:"warning",2:"success",100:"secondary"}),C='<span class="label alert">'+b.definitions.policy[1e3]+"</span>";$.each(b.data.sps,function(a,d){var e=new Array;if(void 0!==d.req&&$.each(d.req,function(a,b){e[a]=b}),!$.isEmptyObject(d.spec)){void 0!==d.entityid?k+='<tr><td data-jagger-entidlink="'+a+'" colspan="'+o+'" class="highlight" >'+d.entityid+"</td></tr>":b.definitions.sps.hasOwnProperty(a)?k+='<tr><td data-jagger-entidlink="'+a+'" colspan="'+o+'" class="highlight">'+b.definitions.sps[a].entityid+' <span class="label alert">disabled</span></td></tr>':console.log("undefined "+a+" in data.definitions.sps"),$.each(d.spec,function(f,g){A="",z="",c=j.indexOf(parseInt(f)),-1===c&&(z=C),y=b.data.definitions.attrs[f],x="100",void 0!==e[f]&&(x=e[f],delete e[f]),void 0!==d.custom&&void 0!==d.custom[f]&&(void 0!==d.custom[f].deny?(A+='<span class="label alert">denied values:  ',$.each(d.custom[f].deny,function(a,b){A+=b+", "}),A+="</span>"):(A+='<span class="label success">permited values: ',$.each(d.custom[f].permit,function(a,b){A+=b+", "}),A+="</span>")),k+="<tr><td>"+y+'</td><td><span class="label '+B[g]+'">'+b.definitions.policy[g]+"</span>  "+z+" "+A+"</td><td>"+b.definitions.req[x]+'</td><td><a href="#" class="modalconfirm" data-jagger-attrpolicy="'+g+'" data-jagger-entityid="'+b.definitions.sps[a].entityid+'" data-jagger-attrname="'+y+'" data-jagger-spid="'+a+'" data-jagger-arp="sp" data-jagger-action="edit" data-jagger-attrid="'+f+'"><i class="fi-pencil"></i></a></td></tr>'});for(var f in e)A="",void 0!==d.custom&&void 0!==d.custom[f]&&(void 0!==d.custom[f].deny?(A+='<span class="label alert">denied values:  ',$.each(d.custom[f].deny,function(a,b){A+=b+", "}),A+="</span>"):(A+='<span class="label success">permited values: ',$.each(d.custom[f].permit,function(a,b){A+=b+", "}),A+="</span>")),z="",c=j.indexOf(parseInt(f)),-1===c&&(z=C),y=b.data.definitions.attrs[f],e.hasOwnProperty(f)&&(k+="<tr><td>"+y+'</td><td><span class="label '+B[100]+'">'+b.definitions.policy[100]+"</span>  "+z+" "+A+"</td><td>"+b.definitions.req[e[f]]+'</td><td><a href="#" class="modalconfirm" data-jagger-attrpolicy="100" data-jagger-entityid="'+b.definitions.sps[a].entityid+'" data-jagger-attrname="'+y+'" data-jagger-spid="'+a+'" data-jagger-arp="sp" data-jagger-action="edit" data-jagger-attrid="'+f+'"><i class="fi-pencil"></i></i></td></tr>')}}),k+="</table></div>",i.show().prependTo(l.html(k))}},error:function(b,c,d){a.hide(),l.html('<div data-aler class="alert-box alert">'+b.responseText+"</div>")}})}),q.on("click","td.highlight",function(a){var b=$(this).attr("data-jagger-entidlink");return void 0!==b?(document.location.href=p+"/"+b,!1):void 0}),q.on("click","a.modalconfirm",function(a){a.preventDefault();var b,c=$(this).attr("data-jagger-arp"),d=$(this).attr("data-jagger-action"),e=$(this).attr("data-jagger-attrname"),f=$(this).attr("data-jagger-attrid"),g=$(this).attr("data-jagger-fedid"),h=$(this).attr("data-jagger-entcatid"),i=$(this).attr("data-jagger-attrsupport"),j=$(this).attr("data-jagger-attrpolicy"),k=$(this).attr("data-jagger-spid"),l=$(this).attr("data-jagger-entityid");
$("[name='baseurl']").val();if(void 0!==c&&void 0!==d)if("global"===c&&"delete"===d)b=$("#arpmdelattr"),b.find(".response").first().removeClass("alert").removeClass("alert-box").empty().hide(),b.find('input[name="attrname"]').first().val(e),b.find('input[name="attrid"]').first().val(f),b.find("span.attributename").first().html(e),b.foundation("reveal","open");else if("global"===c&&"edit"===d){b=$("#arpmeditglobalattr"),b.find(".response").first().removeClass("alert").removeClass("alert-box").empty().hide(),b.find("span.attributename").first().html(e),b.find('input[name="attrname"]').first().val(e),b.find('input[name="attrid"]').first().val(f);var m=b.find('input[name="support"]').first();"1"===i?m.prop("checked",!0):m.prop("checked",!1),b.find('[name="policy"] option').prop("selected",!1).filter('[value="'+j+'"]').prop("selected",!0),b.foundation("reveal","open")}else if("fed"===c&&"edit"===d)b=$("#arpmeditfedattr"),b.find(".response").first().removeClass("alert").removeClass("alert-box").empty().hide(),b.find("span.attributename").first().html(e),b.find('input[name="attrid"]').first().val(f),b.find('input[name="fedid"]').first().val(g),b.find('[name="policy"] option').prop("selected",!1).filter('[value="'+j+'"]').prop("selected",!0),b.foundation("reveal","open");else if("entcat"===c&&"edit"===d)b=$("#arpmeditentcatattr"),b.find(".response").first().removeClass("alert").removeClass("alert-box").empty().hide(),b.find("span.attributename").first().html(e),b.find('input[name="attrid"]').first().val(f),b.find('input[name="entcatid"]').first().val(h),b.find('[name="policy"] option').prop("selected",!1).filter('[value="'+j+'"]').prop("selected",!0),b.foundation("reveal","open");else if("sp"===c&&"edit"===d){b=$("#arpmeditspattr"),b.find(".response").first().removeClass("alert").removeClass("alert-box").empty().hide(),b.find("span.attributename").first().html(e),b.find("span.requestersp").first().html(l),b.find('input[name="attrid"]').first().val(f),b.find('input[name="spid"]').first().val(k),b.find('[name="policy"] option').prop("selected",!1).filter('[value="'+j+'"]').prop("selected",!0);var n=b.attr("data-jagger-getdata"),o=b.find("form").first(),p=o.serializeArray(),q=(o.find('[name="custompolicy"]').first(),o.find('[name="customvals"]').first()),r=o.find('[name="customenabled"]').first();q.empty();var s="";r.prop("checked",!1),$.ajax({url:n,method:"POST",dataType:"json",data:p,success:function(a){a.data&&void 0!==a.data.customsp&&(a.data.customsp.deny?(r.prop("checked",!0),o.find('[name="custompolicy"] option').prop("selected",!1).filter('[value="deny"]').prop("selected",!0),$.each(a.data.customsp.deny,function(a,b){s+=b+", "})):a.data.customsp.permit&&(r.prop("checked",!0),o.find('[name="custompolicy"] option').prop("selected",!1).filter('[value="permit"]').prop("selected",!0),$.each(a.data.customsp.permit,function(a,b){s+=b+", "})),q.text(s))}}),b.foundation("reveal","open")}}),$("#arpmdelattr").on("click","div.yes",function(a){var b=$("#arpmdelattr").find("form").first(),c=b.serializeArray(),d=b.attr("action");$.ajax({url:d,method:"POST",dataType:"json",data:c,success:function(a){$("#arpmdelattr").foundation("reveal","close"),r.find('a[href="#attrpol-1"]').first().trigger("click")}})}),$("#arpmeditglobalattr").on("click","div.yes",function(a){var b=$("#arpmeditglobalattr").find("form").first(),c=b.serializeArray(),d=b.attr("action");$.ajax({url:d,method:"POST",dataType:"json",data:c,success:function(a){$("#arpmeditglobalattr").foundation("reveal","close"),r.find('a[href="#attrpol-1"]').first().trigger("click")},error:function(a,b,c){$("#arpmeditglobalattr").find(".response").html(a.responseText).addClass("alert").addClass("alert-box").show()}})}),q.on("click","#addattrsupport button",function(a){var b=$("#addattrsupport").attr("data-jagger-link");$.ajax({url:b,method:"GET",dataType:"json",success:function(a){if(a.data.support){var b=$("#arpmaddattr").find("select[name='attrid']");b.find("option").removeAttr("disabled"),$.each(a.data.global,function(a,c){b.find("option[value="+a+"]").prop("disabled","disabled")})}}}),$("#arpmaddattr").foundation("reveal","open")}),q.on("click","#addentcatattr button",function(a){var b=$("#addentcatattr").attr("data-jagger-link");$.ajax({url:b,method:"GET",dataType:"json",success:function(a){var b=$("#arpmaddentcatattr").find("select[name='attrid']");b.empty();var c=$("#arpmaddentcatattr").find("select[name='entcatid']");c.empty(),a.data.support&&$.each(a.data.support,function(c,d){b.append($("<option></option>").attr("value",d).text(a.definitions.attrs[d]))}),a.data.entcats&&$.each(a.data.entcats,function(a,b){c.append($("<option></option>").attr("value",b.entcatid).text(b.value))})}}),$("#arpmaddentcatattr").foundation("reveal","open")}),q.on("click","#addespecattr button",function(a){var b=$("#addespecattr").attr("data-jagger-link"),c=s,d=c.find('[name="customvals"]').first();d.empty(),c.find("div.response").first().removeClass("alert").removeClass("alert-box").empty().hide();var e=c.find("select[name='attrid']");e.empty().append($("<option></option>").attr("value","0").text(""));var f=c.find("select[name='spid']");f.empty().append($("<option></option>").attr("value","0").text("")),$.ajax({url:b,method:"GET",dataType:"json",success:function(a){a.members&&$.each(a.members,function(a,b){f.append($("<option></option>").attr("value",b.pid).text(b.name+" ("+b.entityid+")"))}),a.attrs&&$.each(a.attrs,function(a,b){e.append($("<option></option>").attr("value",b.attrid).text(b.name))})}}),c.foundation("reveal","open"),f.select2({width:"100%"}),e.select2({width:"100%"})}),$("#arpmaddattr").on("click","div.yes",function(a){var b=$("#arpmaddattr").find("form").first(),c=b.serializeArray(),d=b.attr("action");$.ajax({url:d,method:"POST",dataType:"json",data:c,success:function(a){$("#arpmaddattr").foundation("reveal","close"),r.find('a[href="#attrpol-1"]').first().trigger("click")},error:function(a,b,c){$("#arpmaddattr").find(".response").html(a.responseText).addClass("alert").addClass("alert-box").show()}})}),$("#arpmeditfedattr").on("click","div.yes",function(a){var b=$("#arpmeditfedattr").find("form").first(),c=b.serializeArray(),d=b.attr("action");$.ajax({url:d,method:"POST",dataType:"json",data:c,success:function(a){$("#arpmeditfedattr").foundation("reveal","close"),r.find('a[href="#attrpol-2"]').first().trigger("click")},error:function(a,b,c){$("#arpmeditfedattr").find(".response").html(a.responseText).addClass("alert").addClass("alert-box").show()}})}),s.on("change","select",function(a){var b=$(this).attr("name");(void 0===b||"spid"!==b&&"attrid"!==b)&&console.log("TT"),"spid"===b&&console.log("DDDDDDDDDDDD")}),s.on("click","div.yes",function(a){var b=s,c=b.find(".response").first();c.empty().removeClass("alert").removeClass("alert-box").hide();var d=b.find("form").first(),e=d.serializeArray(),f=d.attr("action");$.ajax({url:f,method:"POST",dataType:"json",data:e,success:function(a){c.empty().removeClass("alert").removeClass("alert-box").hide(),b.foundation("reveal","close"),r.find('a[href="#attrpol-4"]').first().trigger("click")},error:function(a,b,d){c.html(a.responseText).addClass("alert").addClass("alert-box").show()}})}),$("#arpmeditspattr").on("click","div.yes",function(a){var b=$("#arpmeditspattr").find("form").first(),c=b.serializeArray(),d=b.attr("action");$.ajax({url:d,method:"POST",dataType:"json",data:c,success:function(a){$("#arpmeditspattr").foundation("reveal","close"),r.find('a[href="#attrpol-4"]').first().trigger("click")},error:function(a,b,c){$("#arpmeditspattr").find(".response").html(a.responseText).addClass("alert").addClass("alert-box").show()}})}),$("#arpmeditentcatattr").on("click","div.yes",function(a){var b=$("#arpmeditentcatattr").find("form").first(),c=b.serializeArray(),d=b.attr("action");$.ajax({url:d,method:"POST",dataType:"json",data:c,success:function(a){$("#arpmeditentcatattr").foundation("reveal","close"),r.find('a[href="#attrpol-3"]').first().trigger("click")},error:function(a,b,c){$("#arpmeditentcatattr").find(".response").html(a.responseText).addClass("alert").addClass("alert-box").show()}})}),$("#arpmaddentcatattr").on("click","div.yes",function(a){var b=$("#arpmaddentcatattr").find("form").first(),c=b.serializeArray(),d=b.attr("action");$.ajax({url:d,method:"POST",dataType:"json",data:c,success:function(a){$("#arpmaddentcatattr").foundation("reveal","close"),r.find('a[href="#attrpol-3"]').first().trigger("click")},error:function(a,b,c){$("#arpmaddentcatattr").find(".response").html(a.responseText).addClass("alert").addClass("alert-box").show()}})})}if($("#matrixloader").length>0){var u,v=$("#policyupdater"),w=v.attr("data-jagger-link"),x=$(v).find("form").first(),p=$("#matrixloader").attr("data-jagger-providerdetails"),y=$(v).find("span.mrequester").first(),z=$(v).find("span.mattribute").first(),A=($(v).find("div.yes").first(),$(v).find("div.attrflow").first()),B=$("#idpmatrixdiv");v.on("click","div.yes",function(a){a.preventDefault();var b=x.attr("action");$.ajax({type:"POST",url:b,data:x.serializeArray(),success:function(a){if(v.foundation("reveal","close"),!u.hasClass("dis")){var b=$.trim(u.text());"2"===a&&("R"===b||"D"===b)||"1"===a&&"R"===b?u.attr("class","perm"):"2c"===a&&("R"===b||"D"===b)||"1c"===a&&"R"===b?u.attr("class","spec"):"1"===a&&"D"===b||"0"===a?u.attr("class","den"):("1c"===a&&"D"===b||"0c"===a)&&u.attr("class","den")}}})}),B.on("click","td",function(a){u=$(this);var b=$(this).attr("data-jagger-entidlink");if(void 0!==b)return document.location.href=p+"/"+b,!1;var c=$(this).attr("data-jagger-spid"),d=$(this).attr("data-jagger-attrid");void 0!==c&&void 0!==d&&$.ajax({type:"GET",url:w+"/"+c+"/"+d,cache:!1,dataType:"json",success:function(a){x.find("select[name='policy']").prop("selected",!1).filter('[value=""]').prop("selected",!0),x.find("input[name='attribute']").first().val(a.attributename),x.find("input[name='requester']").first().val(a.requester),y.html(a.requester),z.html(a.attributename);var b=$("<tbody></tbody>"),c='<thead><tr><th colspan="2">Current attribute flow</th></tr></thead>';$.each(a.details,function(a,c){var d="<tr><td>"+c.name+"</td><td>"+c.value+"</td></tr>";b.append(d)});var d=$("<table/>").css({"font-size":"smaller"}).addClass("detailsnosort").addClass("small-12").addClass("columns"),e=$("<div/>");d.append(c),d.append(b),e.append(d),A.html(e.html()),v.foundation("reveal","open")}})});var C=$("#matrixloader").attr("data-jagger-link");if("undefined"==typeof C)return!1;$.ajax({type:"GET",url:C,cache:!1,dataType:"json",success:function(b){if(a.hide(),b){var c,d=new Date,e='<div><span class="den">&nbsp;&nbsp;&nbsp;</span> <span>denied</span></div><div><span class="perm">&nbsp;&nbsp;&nbsp;</span> <span>permitted</span></div><div><span class="dis">&nbsp;&nbsp;&nbsp;</span> <span>not supported</span></div><div><span>R</span> <span>required</span></div><div><span>D</span> <span>desired</span></div>',f=b.attributes,g=b.policies,h=b.total,i=b.message;if(void 0!==h&&0===h&&void 0!==i){var j='<div class="small-12 medium-11 columns small-centered"><div data-alert class="alert-box warning">'+i+"</div></div>";return B.html(j),!1}var k=0,l='<table class="table table-header-rotated" id="idpmatrixresult"><thead><tr>';l+='<th style="background: white">'+e+"</th>",$.each(f,function(a,b){l+='<th class="rotate"><div><span>'+a+"</span></div></th>",k++}),k>52&&$("#container").css({"max-width":"100%"});var m,n,o;l+="</tr></thead><tbody>",$.each(g,function(a,b){l+='<tr><td data-jagger-entidlink="'+b.spid+'" class="searchcol"><span data-tooltip aria-haspopup="true" class="has-tip" data-options="disable_for_touch:true" title="'+a+'" >'+b.name+'</span><span class="hidden">'+a+"</span></td>",$.each(f,function(a,d){n=null,o=void 0!==b.attributes[a]?b.attributes[a]:null,void 0!==b.req[a]&&(n=b.req[a]),m=null!==n?n[0].toUpperCase():"",c=null!==o?0===o?"den":1===o?void 0!==b.custom[a]?"spec":"perm":"dis":"dis",l+='<td data-jagger-spid="'+b.spid+'" data-jagger-attrid="'+d+'" class="'+c+'" title="'+a+'">',l+=m+"</td>"})}),l+="</tbody></table>";var p=new Date,q=p-d;console.log("time of generating matrix: "+q),B.html(l);var r=new Date;q=r-p,console.log("time of input matrinx into DOM: "+q),$("#idpmatrixresult").searcher({inputSelector:"#tablesearchinput",textSelector:".searchcol"})}},beforeSend:function(){a.show()},error:function(b,c,d){a.hide();var e='<div class="small-12 medium-11 columns small-centered"><div data-alert class="alert-box error">'+d+"</div></div>";return B.html(e),!1}})}if($("#fedarptab").length>0){var D,E=$("#fedarptab").find("table").first(),F=$("#fedpolicyupdater"),G=$("#fedpolicyupdater").find("form").first(),H=F.find("input[name='attribute']").first(),I=F.find("input[name='fedid']").first(),J=F.find("select[name='policy']").first(),K=F.attr("data-jagger-link"),L=F.find("span.dynamicval").first();E.on("click","a",function(a){a.preventDefault();var b=$(this).closest("tr");D=b.find("span.dynstate").first();var c=$(this).attr("data-jagger-attrid"),d=$(this).attr("data-jagger-attrname"),e=$(this).attr("data-jagger-fedid");H.val(c),I.val(e),$.ajax({type:"GET",url:K+"/"+e+"/"+c,cache:!1,dataType:"json",success:function(a){J.find("option:selected").prop("selected",!1),J.find("option[value="+a.policy+"]").prop("selected",!0),L.html(d),F.foundation("reveal","open")},error:function(){alert("error")}})}),F.on("click",".yes",function(a){a.preventDefault();var b=G.attr("action"),c=G.serializeArray();$.ajax({type:"POST",url:b,data:c,dataType:"json",success:function(a){N.foundation("reveal","close"),D.html(a.policystr)}})})}if($("#defaultarptab").length>0){var M=$("#defaultarptab"),N=$("#globalpolicyupdater"),O=$("#globalpolicyupdater").find("form").first(),P=$("#adddefaultpolicy"),Q=N.find("input[name='attribute']").first(),R=N.find("select[name='policy']").first(),S=N.attr("data-jagger-link"),T=N.find("span.dynamicval").first();M.on("click","a",function(a){a.preventDefault();var b=$(this).attr("data-jagger-attrid"),c=$(this).attr("data-jagger-attrname");Q.val(b),$.ajax({type:"GET",url:S+"/"+b,cache:!1,success:function(a){R.find("option:selected").prop("selected",!1),R.find("option[value="+a+"]").prop("selected",!0),T.html(c),N.foundation("reveal","open")},error:function(){alert("error")}})}),N.on("click",".yes",function(a){a.preventDefault();var b=O.attr("action"),c=O.serializeArray();$.ajax({type:"POST",url:b,data:c,dataType:"json",success:function(a){N.foundation("reveal","close"),location.reload()}})}),P.on("click","button",function(a){a.preventDefault();var b=P.attr("action"),c=P.serializeArray();$.ajax({type:"POST",url:b,data:c,dataType:"json",success:function(a){N.foundation("reveal","close"),location.reload()}})})}var U=$("#showhelps");U.length&&(U.hasClass("helpactive")?$(".dhelp").show():$(".dhelp").hide());var V=$("#fedlogin").first(),W=V.attr("href"),X=new Date,Y=-X.getTimezoneOffset();if(V.attr("href",""+W+"/"+Y),$("#fedcategories dd.active").length){var Z=$("dd.active").find("a").first().attr("href"),_=$("table.fedistpercat");$.ajax({url:Z,timeout:2500,cache:!0,dataType:"json",value:$("table.fedistpercat"),success:function(b){a.hide(),b?($("table.fedistpercat tbody tr").remove(),$.each(b,function(a,b){var c="<tr><td>"+b.name+"</td><td>"+b.urn+"</td><td>"+b.labels+"</td><td>"+b.desc+"</td><td>"+b.members+"</td></tr>";_.append(c)})):window.alert("no data in federation category")}})}$(".fedcategory").on("click","",function(b){$("dd").removeClass("active"),$(this).closest("dd").addClass("active");var c=$(this).attr("href"),d=$("table.fedistpercat");return $.ajax({url:c,timeout:2500,cache:!0,dataType:"json",value:d,success:function(b){a.hide(),b?($("table.fedistpercat tbody tr").remove(),$.each(b,function(a,b){var c="<tr><td>"+b.name+"</td><td>"+b.urn+"</td><td>"+b.labels+"</td><td>"+b.desc+"</td><td>"+b.members+"</td></tr>";d.append(c)})):window.alert("no data in federation category")},beforeSend:function(){a.show()},error:function(){a.hide(),window.alert("problem with loading data")}}).done(function(){d.html()}),!1}),$(".userlogout").on("click",function(a){var b=$("[name='baseurl']").val(),c=$(this).attr("jagger-data-logout"),d=$(this).attr("href"),e=b;return null===b&&(e=d),null!==c&&""!==c&&$.ajax({type:"GET",url:c,cache:!1}),$.ajax({type:"GET",url:d,cache:!1,success:function(){window.location.href=e}}),!1})}),$(function(){var a=$("#filter"),b=$("#filter-form");$("div.floating-menu").addClass("mobilehidden"),$("table.idplist tr td:first-child").addClass("homeorg"),$("table.idplist tr td:first-child span.alert").removeClass("alert").parent().addClass("alert");var c=$("table.filterlist");c.find("tbody > tr").find("td:eq(1)").mousedown(function(){}),a.keyup(function(){$.uiTableFilter(c,this.value)}),b.submit(function(){return c.find("tbody > tr:visible > td:eq(1)").mousedown(),!1}).focus(),$("table.splist tr td:first-child span.alert").removeClass("alert").parent().addClass("alert");var d=$("table.splist");d.find("tbody > tr").find("td:eq(1)").mousedown(function(){}),a.keyup(function(){$.uiTableFilter(d,this.value)}),b.submit(function(){return d.find("tbody > tr:visible > td:eq(1)").mousedown(),!1}).focus(),$(".datepicker").datepicker({dateFormat:"yy-mm-dd"});var e=$("[name='baseurl']").val();void 0===e&&(e=""),$.ajaxSetup({cache:!1});var f=$("#qcounter");if(f.length>0){var g=f.attr("data-jagger-src"),h=sessionStorage.getItem("jaggerqcounter");null!==h&&f.html(parseInt(h));var i=function(){var a=$("#dashresponsecontainer").first();$.ajax({url:g,method:"GET",cache:!1,dataType:"json",success:function(b){var c=0;if(b.data&&$.each(b.data,function(a,b){c+=b.length}),sessionStorage.setItem("jaggerqcounter",c),f.html(c),a){var d=[];if(b.definitions){var g=b.definitions;d.push('<table id="detailsi" class="itablesorter"><thead><tr><th>'+g.date+"</th><th>"+g.requester+"</th><th>"+g.requesttype+"</th><th></th></tr><thead><tbody>")}else d.push('<table id="detailsi" class="itablesorter"><thead><tr><th>Date</th><th>Requester</th><th>Request type</th><th></th></tr><thead><tbody>');b.data.q&&$.each(b.data.q,function(a,b){d.push("<tr><td>"+b.idate+"</td><td>"+b.requesterCN+" "+b.mail+"</td><td>"+b.type+" - "+b.action+'</td><td><a href="'+e+"reports/awaiting/detail/"+b.token+'"><i class="fi-arrow-right"></i></a></td></tr>')}),d.push("</tbody></table>");var h=d.join("");a.html(h)}},error:function(){if(a){var b='<div data-alert class="alert-box alert center">Could not refresh queue</div>';a.html(b)}}})};setTimeout(i,1e3);setInterval(i,3e4)}$("#responsecontainer").load(e+"reports/awaiting/ajaxrefresh"),setInterval(function(){$("#responsecontainer").load(e+"reports/awaiting/ajaxrefresh")},172e3),$("#languageset").on("change","select",function(a){var b=$("div#languageset form").attr("action"),c=b+this.value;return $.ajax({url:c,timeout:2500,cache:!1}).done(function(){$("#languageset").foundation("reveal","close"),setTimeout(function(){go_to_private_page()},1e3)}),!1}),$("select.nuseraccesstype").on("change",function(){var a=$(this).find("option:selected"),b=a.val();"fed"===b?$("div.passwordrow").hide():$("div.passwordrow").show()}),$("button#idpadduiiprvurl").click(function(){var a=$("span.idpuiiprvurladd option:selected").val(),b=$("span.idpuiiprvurladd option:selected").text();$("span.idpuiiprvurladd option[value="+a+"]").remove(),$(this).parent().prepend('<li class="localized"><label for="f[[uii][idpsso][prvurl]['+a+']">'+b+'</label><input id="f[uii][idpsso][prvurl]['+a+']" name="f[uii][idpsso][prvurl]['+a+']" type="text"/></li>')}),$("button#spadduiiprvurl").click(function(){var a=$("span.spuiiprvurladd option:selected").val(),b=$("span.spuiiprvurladd option:selected").text();$("span.spuiiprvurladd option[value="+a+"]").remove(),$(this).parent().prepend('<li class="localized"><label for="f[[uii][spsso][prvurl]['+a+']">'+b+'</label><input id="f[uii][spsso][prvurl]['+a+']" name="f[uii][spsso][prvurl]['+a+']" type="text"/></li>')}),$("button#addlprivacyurl").click(function(){var a=$("li.addlprivacyurl option:selected").val(),b=$("li.addlprivacyurl option:selected").text();$("li.addlprivacyurl option[value="+a+"]").toggleOption(!1),$(this).parent().append('<li class="localized"><label for="lprivacyurl['+a+']">'+b+'</label><input id="lprivacyurl['+a+']" name="lprivacyurl['+a+']" type="text"/></li>')}),$("a#fedmetasigner").click(function(){var a=$(this),b=a.attr("href");return $.ajax({url:b,timeout:2500,cache:!1,success:function(a){alert(a)}}),!1}),$("a#providermetasigner").click(function(){var a=$(this),b=a.attr("href");return $.ajax({url:b,timeout:2500,cache:!1,success:function(a){window.alert(a)}}),!1}),$("a.downloadstat").click(function(){var a=$(this),b=a.attr("href");return $.ajax({url:b,timeout:2500,cache:!1,dataType:"json",success:function(a){a?window.alert(a.status):window.alert("no data")}}),!1}),$("a.lateststat").click(function(){var a,b=$(this),c=b.attr("href");$('<div id="#statisticdiag">');return $.ajax({url:c,timeout:2500,cache:!0,dataType:"json",success:function(b){a=null,$("#spinner").hide(),b?($("div#statisticdiag").replaceWith('<div id="statisticdiag"></div>'),$.each(b,function(a,b){a=new Image,a.src=b.url,$("#statisticdiag").append('<div style="text-align:center; font-weight: bold; width: 90%;">'+b.title+"</div>").append('<div style="font-weight: bolder; width: 90%; text-align: right;">'+b.subtitle+"</div>").append(a)})):window.alert("no data")},beforeSend:function(){$("#spinner").show()},error:function(){$("#spinner").hide(),window.alert("problem with loading data")}}),!1}),$("a.clearcache").click(function(){var a=$(this),b=a.attr("href");return $.ajax({type:"GET",url:b,timeout:2500,cache:!1,success:$(this).remove()}),!1}),$(".updatebookmark").on("click",function(a){var b=$(this).attr("href"),c=$(this),d=$(this).attr("data-jagger-bookmark"),e=$(this).closest("[data-jagger-onsuccess]"),f=e.attr("data-jagger-onsuccess");return void 0===b||void 0===d?!1:($.ajax({url:b+"/"+d,type:"GET",success:function(a){a&&"ok"===a&&(void 0!==f&&"hide"===f?e.hide():c.remove())}}),!1)}),$("table.reqattraddform").addClass("hidden"),$("button.hideform").addClass("hidden"),$("form.reqattraddform").addClass("hidden"),$("button.showform").click(function(){$("table.reqattraddform").removeClass("hidden"),$("form.reqattraddform").removeClass("hidden"),$("button.showform").addClass("hidden"),$("button.hideform").removeClass("hidden")}),$("button.hideform").click(function(){$("table.reqattraddform").addClass("hidden"),$("form.reqattraddform").addClass("hidden"),$("button.showform").removeClass("hidden"),$("button.hideform").addClass("hidden")}),$("#sortable").sortable(),$("div.nsortable").sortable(),$("#sortable").disableSelection()});var ww=document.body.clientWidth;$(document).ready(function(){$(".nav li a").each(function(){$(this).next().length>0&&$(this).addClass("parent")}),$(".toggleMenu").click(function(a){a.preventDefault(),$(this).toggleClass("active"),$(".nav").toggle()})}),$(document).on("click","a.refreshurl",function(a){a.preventDefault();var b=$(this).attr("data-jagger-getmoreajaxonclick"),c=$(this).attr("data-jagger-response-msg"),d=$(this);if(void 0===c||null===c)return console.log('attribute data-jagger-response-msg not found in element with data-jagger-getmoreajax="'+b+'" - exiting'),!1;console.log('attribute data-jagger-response-msg="'+c+'" in element data-jagger-getmoreajax="'+b+'"');var e=$("div#"+c);return void 0===e||null===e||0===$(e).length?(console.log('div with id="'+c+'" not found'),!1):(console.log('div with id="'+c+'" found'),void $.ajax({dataType:"json",type:"GET",url:b,cache:!0,success:function(a){if(!a)return console.log("no json got from "+b),!1;var c=a.length;if(1>c)return!1;var f=$("<div/>");$.each(a,function(a,b){f.append("<div>"+b.msg+"</div>")}),e.empty().append(d).append(f).show()}}))}),$(window).bind("resize orientationchange",function(){ww=document.body.clientWidth,adjustMenu()});var adjustMenu=function(){768>ww?($(".toggleMenu").css("display","inline-block"),$(".toggleMenu").hasClass("active")?$(".nav").show():$(".nav").hide(),$(".nav li").unbind("mouseenter mouseleave"),$(".nav li a.parent").unbind("click").bind("click",function(a){a.preventDefault(),$(this).parent("li").toggleClass("hover")})):ww>=768&&($(".toggleMenu").css("display","none"),$(".nav").show(),$(".nav li").removeClass("hover"),$(".nav li a").unbind("click"),$(".nav li").unbind("mouseenter mouseleave").bind("mouseenter mouseleave",function(){$(this).toggleClass("hover")}))};if($(function(){$("#details").tablesorter({sortList:[[0,0]],widgets:["zebra"]}),$(".userlist#details").tablesorter({sortList:[[4,1],[0,0]],widgets:["zebra"]}),$("#options").tablesorter({sortList:[[0,0]],headers:{3:{sorter:!1},4:{sorter:!1}}}),$("#logotabs").tabs({load:function(a,b){$("#availablelogos").unbind(),$("#assignedlogos").unbind(),$("#uploadlogo").unbind(),$("table#details").unbind(),GINIT.initialize()}})}),$("#usepredefined").attr("checked")&&$("fieldset#stadefext").hide(),$("#usepredefined").click(function(){$(this).is(":checked")?($("#usepredefined").not(this).removeAttr("checked"),$("fieldset#stadefext").hide()):($("fieldset#stadefext").show(),$("#usepredefined").not(this).addAttr("checked"))}),$("#nattrreqbtn").click(function(a){a.preventDefault();var b=genRandomStr(5),c=$('select[name="nattrreq"]'),d=c.find(":selected").text(),e=c.find(":selected").val(),f="<fieldset><legend>"+d+'</legend><div class="small-12 columns"><div class="medium-3 columns medium-text-right"><select name="f[reqattr]['+b+'][status]"><option value="required">required</option><option value="desired">desired</option></select><input type="hidden" name="f[reqattr]['+b+'][attrname]" value="'+d+'"><input type="hidden" name="f[reqattr]['+b+'][attrid]" value="'+e+'"></div><div class="medium-6 collumns end"><textarea name="f[reqattr]['+b+'][reason]"></textarea></div></div></fieldset>';$(this).parent().parent().before(f)}),$(".pCookieAccept").on("click",function(){var a=$(this).attr("href");return $.ajax({url:a,timeout:2500}),$("#cookiesinfo").hide(),!1}),$("[id='f[entityid]']").change(function(){if($(this).hasClass("alertonchange")){var a=$("#entitychangealert").text();window.alert(a)}}),$(document).ready(function(){function a(a,b){var c=$("#sconfirm");c.find(".message").html(a+"&nbsp;"),c.foundation("reveal","open"),c.foundation("reflow"),c.on("opened.fndtn.reveal",function(a){var d=c.find(".yes").first(),e=c.find(".no").first();d.off().on("click",function(){b.apply(),c.foundation("reveal","close")}),e.off().on("click",function(){c.foundation("reveal","close")})})}var b=$("[name='baseurl']").val();void 0===b&&(b="");var c=new Image(16,16);c.src=b+"images/spinner.gif";var d=new Image(220,19);d.src=b+"images/ajax-loader.gif",$("#eds2").is("*")&&$("#idpSelect").modal({Height:"500px",minHeight:"500px"}),$("#vormversion").click(function(){return $.ajax({cache:!1,type:"GET",url:b+"smanage/reports/vormversion",success:function(a){$("#spinner").hide(),$("#rvormversion").show(),$("tr#rvormversion td:first-child").html(a)},beforeSend:function(){$("#spinner").show()},error:function(){$("#spinner").hide(),window.alert("Error occurred")}}),!1}),$("#vschema").click(function(){return $.ajax({cache:!1,type:"GET",url:b+"smanage/reports/vschema",success:function(a){$("#spinner").hide(),$("#rvschema").show(),$("tr#rvschema td:first-child").html(a)},beforeSend:function(){$("#spinner").show()},error:function(){$("#spinner").hide(),window.alert("Error ocured")}}),!1}),$("#vschemadb").click(function(){return $.ajax({cache:!1,type:"GET",url:b+"smanage/reports/vschemadb",success:function(a){$("#spinner").hide(),$("#rvschemadb").show(),$("tr#rvschemadb td:first-child").html(a)},beforeSend:function(){$("#spinner").show()},error:function(){$("#spinner").hide(),window.alert("Error ocured")}}),!1}),$("#vmigrate").click(function(){return $.ajax({cache:!1,type:"GET",url:b+"smanage/reports/vmigrate",success:function(a){$("#spinner").hide(),$("#rvmigrate").show(),$("tr#rvmigrate td:first-child").html(a)},beforeSend:function(){$("#spinner").show()},error:function(){$("#spinner").hide(),window.alert("Error ocured")}}),!1}),$("#vcerts").click(function(){var a,c=$(this).closest("div"),d=c.find("select").first();if(d){var e=d.find("option:selected");a=e.val()}var f="";return("localidp"===a||"extidp"===a||"localsp"===a||"extsp"===a)&&(f="/"+a),$.ajax({cache:!1,type:"GET",url:b+"smanage/reports/expiredcerts"+f,dataType:"json",success:function(a){var b=a.data,c=a.definitions.baseurl,d=[],e=[];e.push("<table><tbody>"),$.each(b,function(a,b){b.alerts&&$.each(b.alerts,function(a,b){b.level?d.push('<div class="alert-box '+b.level+'" style="" data-alert="">'+b.msg+"</div>"):d.push("<div>"+b.msg+"</div>")}),e.push('<tr><td><a href="'+c+"providers/detail/show/"+b.id+'">'+b.entityid+"</a></td><td>"+d.join("")+"</td></tr>"),d=[]}),e.push("</tbody></table>");var a=e.join("");$("#spinner").hide(),$("#rvcerts").show(),$("tr#rvcerts td:first-child").html(a)},beforeSend:function(){$("#spinner").show()},error:function(){$("#spinner").hide(),window.alert("Error ocured")}}),!1}),$('button[name="fedstatus"]').click(function(b){var c=$(this).attr("value"),d=$(this).attr("title");void 0===d&&(d="");var e=$("[name='csrfname']").val(),f=$("[name='csrfhash']").val(),g=$("[name='baseurl']").val(),h=$("span#fednameencoded").text(),i=g+"federations/fedactions/changestatus",j=[{name:"status",value:c},{name:e,value:f},{name:"fedname",value:h}];a(""+d,function(a){$.ajax({type:"POST",url:i,data:j,success:function(a){a&&("deactivated"===a?($('button[value="disablefed"]').hide(),$('button[value="enablefed"]').show(),$('button[value="delfed"]').show(),$("td.fedstatusinactive").show(),$("span.fedstatusinactive").show()):"activated"===a?($('button[value="disablefed"]').show(),$('button[value="enablefed"]').hide(),$('button[value="delfed"]').hide(),$("td.fedstatusinactive").hide(),$("span.fedstatusinactive").hide()):"todelete"===a&&($('button[value="disablefed"]').hide(),$('button[value="enablefed"]').hide(),$('button[value="delfed"]').hide()))},error:function(a){window.alert("Error  ocurred")}})})}),$("#rmstatdef").on("click","button",function(b){var c=$("form#rmstatdef").attr("action"),d=$("#rmstatdef").serialize();a("",function(a){$.ajax({type:"POST",url:c,data:d,success:function(a){revealAlert($("#resultdialog .message").html(),"ok")},error:function(a){window.alert("Error")}})}),b.preventDefault()}),$("#rmfedcategory").click(function(b){var c=$(this).closest("form");c.attr("action"),$(this).serialize();a("",function(a){$("<input>").attr({type:"hidden",id:"formsubmit",name:"formsubmit",value:"remove"}).appendTo("form"),c.submit()}),b.preventDefault()}),$("#rmfedvalidator").click(function(b){var c=$(this).closest("form");c.attr("action"),$(this).serialize();a("",function(a){$("<input>").attr({type:"hidden",id:"formsubmit",name:"formsubmit",value:"remove"}).appendTo("form"),c.submit()}),b.preventDefault()}),$(document).on("submit","#notificationaddform",function(a){a.preventDefault();var b=$(this);b.serializeArray();$.ajax({type:"POST",url:b.attr("action"),data:b.serializeArray(),success:function(a){$(".message").html(a),"OK"===a&&($("#notificationaddmodal").foundation("reveal","close"),location.reload())},error:function(a,b,c){window.alert("Error occured: "+c)}})}),$(document).on("open.fndtn.reveal","#notificationaddmodal",function(){$(this);$("select#sfederation").parent().hide(),$("select#sprovider").parent().hide(),$("select#type").change(function(){$("select#sfederation").parent().hide(),$("select#sprovider").parent().hide();var a=$(this).find("option:selected"),c=a.val(),d=(a.text(),$("#sfederation")),e=$("#sprovider");d.find("option").remove(),e.find("option").remove(),"joinfedreq"===c||"fedmemberschanged"===c||"fedmembersmodified"===c?$.ajax({type:"GET",url:b+"ajax/getfeds",cache:!0,success:function(a){$.each(a,function(a,b){$("<option>").val(b.id).text(b.name).appendTo(d)}),$("select#sfederation").parent().show()},error:function(a,b,c){$(".message").html(c)}}):("requeststoproviders"===c||"providermodified"===c)&&$.ajax({type:"GET",url:b+"ajax/getproviders",
cache:!1,datatype:"json",success:function(a){$.each(a,function(a,b){$("<option>").val(b.key).text(b.value).appendTo(e)}),$("select#sprovider").parent().show()},error:function(a,b,c){$(".message").html(c)}})})})}),$(".submit").click(function(){return!1}),$("#joinfed").on("change","#fedid",function(a){$("div.validaronotice").hide(),$("ul.validatorbuttons").replaceWith('<ul class="button-group validatorbuttons"></ul>');var b=$("[name='csrfname']").val(),c=$("[name='csrfhash']").val();void 0===b&&(b=""),void 0===c&&(c="");var d=$(this).find("option:selected").val(),e=($(this).find("option:selected").text(),$("div#retrfvalidatorjson").text()),f={};f[b]=c,f.fedid=d,0!==d&&$.ajax({type:"POST",url:e,timeout:2500,cache:!0,data:f,dataType:"json",success:function(a){if($("#spinner").hide(),a){var b=$("ul.validatorbuttons");$.each(a,function(a,c){b.append('<li><button  value="'+e+"/"+c.fedid+"/"+c.id+'" class="small">'+c.name+"</button></li>")}),$("div.validaronotice").show()}},beforeSend:function(){$("#spinner").show()},error:function(){$("#spinner").hide(),$("#fvform").hide(),$("#fvresult").hide()}}).done(function(){BINIT.initFvalidators()})}),$("#showhelps").click(function(a){a.preventDefault();var b=$(this).attr("href"),c="n";c=$("#showhelps").hasClass("helpactive")?"n":"y",$.ajax({type:"GET",url:b+"/"+c,success:function(){$("#showhelps").toggleClass("helpinactive").toggleClass("helpactive").toggleClass("active"),$(".dhelp").toggle()}})}),$("div.section").parent().addClass("section"),$("#notificationupdateform").on("submit",function(a){a.preventDefault();var b=$(this).serializeArray(),c=$(this).attr("action"),d=parseInt($("input[name=noteid]").val()),e=$('button[type="button"][value="'+d+'"]'),f=$(e).closest("tr"),g=f.find("div.subscrstatus:first");$.ajax({type:"POST",url:c,data:b,dataType:"json",success:function(a){if(a){var b=!1;$.each(a,function(a,c){b===!1&&parseInt(c.id)===d&&(b=!0,g.text(c.langstatus)),b===!1&&f.hide()})}$("#notificationupdatemodal").foundation("reveal","close"),location.reload()},error:function(a,b,c){window.alert("Error occured: "+c)}})}),$(document).on("submit","div#loginform form",function(a){a.preventDefault();var b=$("#loginform"),c=$(b).find(":submit").first(),d=$(b).find("div.secondfactorrow").first(),e=$("div#loginform form").attr("action"),f=$(this).serializeArray(),g=new Date,h=-g.getTimezoneOffset();f.push({name:"browsertimeoffset",value:""+h});var i=$("[name='baseurl']").val();return $.ajax({type:"POST",cache:!1,timeout:3500,url:e,data:f,beforeSend:function(){$("#loginresponse").html("").hide()},success:function(a){a?a.success===!0&&"OK"===a.result?($("#loginform").foundation("reveal","close"),setTimeout(function(){window.location.href=i},1e3)):"secondfactor"===a.result&&($("#password").val(""),d.empty(),d.append(a.html).show(),c.prop("disabled",!0)):$("#loginresponse").html(a).show()},error:function(a,b,c){$("#loginresponse").html(a.responseText).show()}}),!1}),$("button.advancedmode").click(function(){var a=$("span.modalnotice").text(),b=$("textarea#metadatabody").val().trim();b.length<20&&window.alert(a);var c=$(this),d=c.val();$("[name='csrfname']").val(),$("[name='csrfhash']").val();$(this).closest("form").attr("action",d)}),$("#providerslistresultv2").length){var jnl=$("#providerslistresultv2").first(),url=jnl.attr("data-jagger-src");$.ajax({type:"GET",url:url,timeout:19500,cache:!0,dataType:"json",success:function(a){$("#spinner").hide();var b=a.definitions.lang,c=$("<table/>"),d=$("<thead/>"),e=$("<tfoot/>");c.append(d),c.append(e);var f=$("<tr/>"),g=$("<tr/>");d.append(f),e.append(g);var h,i=[],j=a.columns,k=0;f.append('<th class="header">s</th>'),g.append('<th class="header">s</th>'),$.each(j,function(a,b){if(h=b.status){var c=[];$.each(b.cols,function(a,b){c.push(b)}),i.push(c),f.append('<th class="header">'+b.colname+"</th>"),g.append('<th class="header">'+b.colname+"</th>"),k+=1}});var l,m=a.data,n=[];$.each(m,function(b,c){l=[],l.push(c.plocal),$.each(i,function(b,d){var e="";$.each(d,function(b,d){null!==c[d]&&("pname"===d?e=e+'<a href="'+a.baseurl+"providers/detail/show/"+c.pid+'">'+c[d]+"</a><br />":"phelpurl"===d?e=e+'<a href="'+c.phelpurl+'">'+c.phelpurl+"</a>":"plocked"===d||"pactive"===d||"plocal"===d||"pstatic"===d||"pvisible"===d||"pavailable"===d?void 0!==a.statedefs[d][c[d]]&&(e=e+' <span class="lbl lbl-'+d+"-"+c[d]+'">'+a.statedefs[d][c[d]]+"</span>"):"contacts"===d?e+=c.contacts.join("<br />"):e=e+"  "+c[d])}),l.push(e.trim())}),n.push(l)}),jnl.append(c);var o=c.DataTable({dom:'<"text-right"lB><"text-left"i>frtip',buttons:[{text:b.btnexternal,className:"tiny"},{text:b.btnlocal,className:"tiny"},{className:"tiny",extend:"colvis",postfixButtons:["colvisRestore"],columns:":gt(1)"}],columnDefs:[{targets:[0],visible:!1,searchable:!0},{targets:[4],visible:!1}],order:[[1,"asc"]],paging:!0,stateSave:!0,lengthMenu:[[10,25,50,-1],[10,25,50,"All"]],data:n,language:{lengthMenu:"Display _MENU_ records per page",zeroRecords:"Nothing found - sorry",infoEmpty:"No records available",infoFiltered:"(filtered from _MAX_ total records)",paginate:{next:b.next,previous:b.previous}},defereRender:!0});o.button(0).action(function(a,b,c,d){c.hasClass("active")?(this.active(!1),$("#entityc").val("").trigger("change")):(this.active(!0),o.button(1).active(!1),$("#entityc").val("external").trigger("change"))}),o.button(1).action(function(a,b,c,d){c.hasClass("active")?(this.active(!1),$("#entityc").val("").trigger("change")):(this.active(!0),o.button(0).active(!1),$("#entityc").val("local").trigger("change"))}),$("#entityc").on("change",function(){console.log("chanmge triggered"),o.draw()})},beforeSend:function(){$("#spinner").show()},error:function(a,b,c){$("#spinner").hide(),window.alert(c)}})}$(".afilter").click(function(){var a,b=$(this).attr("href");return a=$(this).hasClass("filterext")?1:$(this).hasClass("filterlocal")?2:0,$("a.initiated").removeClass("initiatied"),$.ajax({type:"GET",url:b,timeout:9500,cache:!0,dataType:"json",success:function(b){if($("#spinner").hide(),1===a?$("dd.filterext").addClass("active"):2===a?$("dd.filterlocal").addClass("active"):$("dd.filterall").addClass("active"),b){var c=$("<table/>");c.attr("id","details"),c.addClass("filterlist");var d=$("<thead/>");c.append(d);var e=$("<tr/>");d.append(e);var f,g=[],h=b.columns,i=0;$.each(h,function(a,b){if(f=b.status){var c=[];$.each(b.cols,function(a,b){c.push(b)}),g.push(c),e.append("<th>"+b.colname+"</th>")}});var j=$("<tbody/>");c.append(j);var k=b.data,l=new Date,m=[],n=0;$.each(k,function(c,d){(1===d.plocal&&(2===a||0===a)||0===d.plocal&&2>a)&&(m[n++]="<tr>",$.each(g,function(a,c){var e="";$.each(c,function(a,c){null!==d[c]&&("pname"===c?e=e+'<a href="'+b.baseurl+"providers/detail/show/"+d.pid+'">'+d[c]+"</a><br />":"phelpurl"===c?e=e+'<a href="'+d.phelpurl+'">'+d.phelpurl+"</a>":"plocked"===c||"pactive"===c||"plocal"===c||"pstatic"===c||"pvisible"===c||"pavailable"===c?void 0!==b.statedefs[c][d[c]]&&(e=e+' <span class="lbl lbl-'+c+"-"+d[c]+'">'+b.statedefs[c][d[c]]+"</span>"):e=e+"  "+d[c])}),m[n++]="<td>"+e+"</td>"}),i++,m[n++]="</tr>")}),j.append(m.join(""));var o=new Date,p=o-l;console.log("Providerlist table gen time: "+p);var q=$("div.subtitleprefix").text();$("div.subtitle").empty().append(q+": "+i),$("div#providerslistresult").append(c),i>1&&(c.tablesorter({sortList:[[0,0]]}),$("#filter").keyup(function(){$.uiTableFilter(c,this.value)}),$("#filter-form").submit(function(){return c.find("tbody > tr:visible > td:eq(1)").mousedown(),!1}).focus())}},beforeSend:function(){$("dd.afilter").removeClass("active"),$("div#providerslistresult").empty(),$("div.alert-box").empty().hide(),$("#spinner").show()},error:function(a,b,c){$("#spinner").hide(),$("div.subtitle").empty(),$("div.alert-box").append(c).show()}}),!1}),$("a.initiated").trigger("click"),$('button[name="mrolebtn"]').click(function(a){var b=$(this).attr("value");$.ajax({type:"GET",url:b,timeout:2500,cache:!1,dataType:"json",success:function(a){var b=[];$.each(a,function(a,c){b.push(c)}),$("input[name='checkrole[]']").each(function(){var a=$(this).attr("value");$(this).attr("checked");-1===$.inArray(a,b)?$(this).prop("checked",!1):$(this).prop("checked",!0)})}})}),$('button[name="update2f"]').click(function(a){a.preventDefault();var b=$(this).parents("form:first"),c=b.find("div.alert-box"),d=b.attr("action");$.ajax({type:"POST",url:d,cache:!1,data:b.serializeArray(),dataType:"json",success:function(a){if(c.hide(),a){var b="";$.each(a,function(a,c){b=b+c+","}),$("span#val2f").empty().append(b.substring(0,b.length-1))}$("#m2f").foundation("reveal","close")},error:function(a,b,d){c.html(d).show()}})});var checkRegpol;$('input[type="radio"].withuncheck').on("hover",function(){checkRegpol=$(this).is(":checked")}).on("click",function(){checkRegpol=!checkRegpol,$(this).attr("checked",checkRegpol)}),$(document).on("click","#resetloginform",function(a){a.preventDefault();var b=$("[name='baseurl']").val();$.ajax({type:"GET",url:b+"authenticate/resetloginform",cache:!1,success:function(a){return $(".secondfactorrow").empty(),$("#loginform").foundation("reveal","close"),!1}})}),$(document).on("click","#duo_form",function(a){var b=$(this).attr("action"),c=$(".secondfactorrow");return $.ajax({type:"POST",url:b,cache:!1,data:$(this).serializeArray(),beforeSend:function(){$("#loginresponse").html("").hide()},success:function(a){a?a.success===!0&&"OK"===a.result?($("#loginform").foundation("reveal","close"),setTimeout(function(){go_to_private_page()},1e3)):"secondfactor"===a.result&&c.append(a.html).show():$("#loginresponse").html(a).show()},error:function(a,b,c){$("#loginresponse").html(a.responseText).show()}}),!1}),$(document).ready(function(){var a=$("a.autoclick");void 0!==a&&a.click()}),$(".oidclink").on("click",function(a){a.preventDefault();var b=$(this).attr("href"),c=$("[name='csrfname']").val(),d=$("[name='csrfhash']").val(),e=$(this).attr("data-jagger-oidc"),f=[{name:c,value:d},{name:"op",value:e}];$.ajax({type:"POST",url:b,data:f,cache:!1,dataType:"json",success:function(a){window.location.href=a.redirect}})}),$("#updateprefsmodal").on("submit",function(a){a.preventDefault();var b=$(this).attr("data-jagger-link"),c=$(this).find("div.alert").first(),d=$(this).find("form").first();$.ajax({url:b,type:"POST",cache:!1,data:d.serializeArray(),success:function(a){if(a)if("OK"===a.result){var b=$(document).find('[data-jagger-record="'+a.confname+'"]').first(),d=b.closest("tr"),e=a.type;"text"===e&&d.find('span[data-jagger-name="vtext"]').first().html(nl2br(a.vtext,!1));var f=d.find('span[data-jagger-name="status"]').first();a.status?f.removeClass("alert").html(a.statusstring):f.addClass("alert").html(a.statusstring),$(document).foundation("reveal","close")}else a.error&&c.html(a.error).show();else c.html("No data").show()},error:function(a,b,d){c.html(d).show()}})}),$(document).on("click","a.updateprefs",function(a){a.preventDefault();var b=$("#updateprefsmodal"),c=$(this).attr("href");if(void 0===b||void 0===c)return!1;var d=b.find('span[data-jagger-name="displayname"]').first(),e=b.find('input[name="confname"]').first(),f=b.find('div[data-jagger-name="desc"]').first(),g=b.find('input[name="status"]').first(),h=b.find('textarea[data-jagger-name="vtext"]').first(),i=b.find("div.alert").first();return i.html("").hide(),null===h&&window.alert("d"),$.ajax({url:c,type:"GET",cache:!1,success:function(a){if(a){d.html('"'+a.displayname+'"'),e.val(a.confname),f.html("<b>"+a.displayname+":</b> "+a.desc);var b=a.type;"text"===b?(h.val(a.vtext),h.closest("div.row").show()):h.closest("div.row").hide(),a.status===!0?g.prop("checked",!0):g.prop("checked",!1)}}}),b.foundation("reveal","open"),!1}),$(".select2").select2(),$("#itestcombo").select2();