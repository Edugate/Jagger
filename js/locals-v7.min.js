jQuery.fn.toggleOption=function(a){jQuery(this).toggle(a);if(a){while(jQuery(this).parent("span.toggleOption").length){jQuery(this).unwrap()}}else{jQuery(this).wrap('<span class="toggleOption" style="display: none;" />')}};var BINIT={initFvalidators:function(){$("ul.validatorbuttons button").on("click",function(b){var a=$(this).attr("value");$.ajax({type:"GET",url:a,timeout:2500,cache:true,success:function(e){$("#spinner").hide();var f=$.parseJSON(e);if(f){var c=f.fedid;var h=f.id;var d=f.name;var g=f.desc;$('#fvform input[name="fedid"]').val(c);$('#fvform input[name="fvid"]').val(h);$("div#fvalidesc").replaceWith('<div id="fvalidesc"><b>'+d+"</b><p>"+g+"</p></div>");$("#fvform").show()}},beforeSend:function(){$("#fvresult").hide();$("#spinner").show()},error:function(){$("#spinner").hide();$("#fvform").hide();$("#fvresult").hide()}})})}};var GINIT={initialize:function(){$("div[data-jagger-getmoreajax]").each(function(j){var d=$(this).attr("data-jagger-getmoreajax");var h=$(this).attr("data-jagger-response-msg");var f=$(this).attr("data-jagger-refreshurl");var g="";if(h===undefined||h===null){console.log('attribute data-jagger-response-msg not found in element with data-jagger-getmoreajax="'+d+'" - exiting');return false}else{console.log('attribute data-jagger-response-msg="'+h+'" in element data-jagger-getmoreajax="'+d+'"')}var c=$("div#"+h);if(c===undefined||c===null||$(c).length===0){console.log('div with id="'+h+'" not found');return false}else{console.log('div with id="'+h+'" found')}$.ajax({dataType:"json",type:"GET",url:d,cache:true,success:function(m){if(!m){console.log("no json got from "+d);return false}var k=m.length;if(k<1){return false}var e=$("<div/>");var l;$.each(m,function(o,n){l="<div>"+n.msg+"</div>";e.append(l)});if(f!==null){g='<a class="refreshurl right" href="#"  data-jagger-getmoreajaxonclick= "'+f+'" data-jagger-response-msg="prdetails"><i class="fi-refresh" ></i></a>'}c.empty().append(g).append(e).show()}})});$("#password").on("keypress",function(f){var d=f.keyCode?f.keyCode:f.which;var c=f.shiftKey?f.shiftKey:((d===16)?true:false);if(((d>=65&&d<=90)&&!c)||((d>=97&&d<=122)&&c)){$("#capswarn").show()}else{$("#capswarn").hide()}});$("table.sortable").tablesorter();var b=$("[name='baseurl']").val();if(b===undefined){b=""}$("#loginbtn").on("click",function(h){h.preventDefault();var e=$(this).attr("href");var d=$("#loginform");var g=$(d).find(":submit").first();var c=$(d).find("div.usernamerow").first();var f=$(d).find("div.passwordrow").first();var j=$(d).find("div.secondfactorrow").first();$.ajax({type:"GET",url:e,cache:false,success:function(k){if(k.logged!==1){if(k.partiallogged===0){g.prop("disabled",false);c.show();f.show();$("#loginresponse").hide();d.foundation("reveal","open");return false}if(k.twofactor===1&&k.secondfactor!==null){g.prop("disabled",true);c.show();$("#password").val(null);f.show();$("#loginresponse").hide();if(k.html){j.html(k.html).show()}d.foundation("reveal","open");return false}}else{var l=$("[name='baseurl']").val();if(l!==undefined){window.location.href=l}}c.show();f.show();$("#loginresponse").hide();d.foundation("reveal","open")}});return false});$("a.bookentity").click(function(){var d=$(this),c=d.attr("href");$.ajax({type:"GET",url:c,timeout:2500,cache:false,success:function(e){$("a.bookentity").show();$(this).hide();GINIT.initialize()}});return false});$("button.modal-close").on("click",function(c){$(this).foundation("reveal","close")});$("#providerlogtab").on("toggled",function(e,c){var f=c;var g=f.find("[data-reveal-ajax-tab]");var d=g.attr("data-reveal-ajax-tab");if(d!==undefined){$.ajax({cache:true,type:"GET",url:d,success:function(h){$("#providerlogtab").empty().append(h);$(document).foundation("reflow");$(".accordionButton").unbind();$("#editprovider").unbind();GINIT.initialize()}})}});$("button.cleartarget").on("click",function(f){f.preventDefault();var d=$(this).attr("data-jagger-textarea");var c=$(this).attr("data-jagger-input");if(d!==undefined){$("textarea[name='"+d+"']").val("")}if(c!==undefined){$("input[name='"+c+"']").val("")}return false});$("button.postajax").on("click",function(h){h.preventDefault();var f=$(this).closest("form");var g=$(this).attr("data-jagger-response-msg");var d=$("div#"+g);var c=f.attr("action");$.ajax({type:"POST",url:c,data:f.serializeArray(),beforeSend:function(){d.empty()},success:function(e){if(e){d.append(e)}else{d.append("no result")}},error:function(l,e,j){var k="<div>"+j+"</div>";d.append(k);return false}});return false});$("#confirmremover").on("click","div.yes",function(h){h.preventDefault();var g=$(this).closest("form");var f=g.attr("action");var c=g.attr("data-jagger-regpolicy");var d=g.attr("data-jagger-ec");$.ajax({type:"POST",url:f,data:g.serializeArray(),success:function(e){if(c!==undefined&&c!==null){$('a[data-jagger-regpolicy="'+c+'"]').closest("tr").hide()}else{$('a[data-jagger-ec="'+d+'"]').closest("tr").hide()}$("#confirmremover").foundation("reveal","close")},error:function(l,e,j){var k=""+j+"";alert(k);return false}})});$("a.withconfirm").on("click",function(j){j.preventDefault();var d=$(this).attr("href");var c=$(this).attr("data-jagger-regpolicy");var f=$(this).attr("data-jagger-ec");if(d===undefined){return false}var h=$("#confirmremover");var g=h.find("form").first();g.attr("action",d);if(f!==undefined&&f!==null){g.attr("data-jagger-ec",f)}else{g.attr("data-jagger-regpolicy",c)}h.foundation("reveal","open")});function a(c,d){$("#notificationupdatemodal").foundation("reveal","open");$("#notificationupdatemodal").on("opened",function(){alert("o");$(".no").click(function(){$("#notificationupdatemodal").foundation("reveal","close")});$(".message").append(c);$(".yes").click(function(){if($.isFunction(d)){d.apply();$("#notificationupdatemodal").foundation("reveal","close")}})})}$(".dhelp").click(function(){var c=parseInt($(this).css("font-size"));if(c<=10){$(this).css("font-size",c+5).removeClass("zoomin").addClass("zoomout")}else{$(this).css("font-size",c-5).removeClass("zoomout").addClass("zoomin")}});$("form#availablelogos input[name='filename']").click(function(){$(this).after($("form#availablelogos div.buttons").show())});$("button.reqattrrm").click(function(){var c=$(this).closest("fieldset");c.remove()});$("form#availablelogos").on("submit",function(f){f.preventDefault();var c=$("div.uploadresult");var d=$("div.assignedlogosgrid").text();$("#uploadlogo").unbind();$.ajax({type:"POST",url:$(this).attr("action"),data:$("form#availablelogos").serializeArray(),dataType:"html",cache:false,beforeSend:function(){$("form#availablelogos div.buttons").hide().appendTo("form#availablelogos")},success:function(e){$("form#availablelogos #filename").prop("checked",false);$.ajax({type:"GET",url:d,cache:false,success:function(g){$("#uploadlogo").unbind();$("div#t1").empty();$("div#t1").append(g);$("#assignedlogos").unbind();$("#availablelogos").unbind();GINIT.initialize()}});$("#spinner").hide();c.html(e).append('<p><input type="button" value="Close" class="simplemodal-close" /></p>').modal({closeHTML:"<a href='#' title='Close' class='modal-close'>x</a>",position:["20%",],overlayId:"simpledialog-overlay",minHeight:"200px",containerId:"simpledialog-container",onShow:function(g){var h=this}})},error:function(e,h,g){$("#spinner").hide();c.css("color","red");c.html(e.responseText).append('<p><input type="button" value="Close" class="simplemodal-close" /></p>').modal({closeHTML:"<a href='#' title='Close' class='modal-close'>x</a>",position:["20%",],overlayId:"simpledialog-overlay",minHeight:"200px",containerId:"simpledialog-container",onShow:function(j){var k=this}})}})});$("#uploadlogo").on("submit",(function(h){h.preventDefault();var g=new FormData(document.forms.namedItem("uploadlogo"));var c=$("div.uploadresult");var d=$("div.availablelogosgrid").text();var f=$("div.assignedlogosgrid").text();$.ajax({type:"POST",url:$(this).attr("action"),data:g,dataType:"html",cache:false,processData:false,contentType:false,beforeSend:function(){c.html("");c.css("color","black");$("form#availablelogos div.buttons").hide().appendTo("form#availablelogos");$("#spinner").show()},success:function(e){$("#spinner").hide();c.html(e);$("div.uploadresult").append('<p><input type="button" value="Close" class="simplemodal-close" /></p>').modal({closeHTML:"<a href='#' title='Close' class='modal-close'>x</a>",position:["20%",],overlayId:"simpledialog-overlay",minHeight:"200px",containerId:"simpledialog-container",onShow:function(j){var k=this}});$.ajax({type:"GET",url:f,cache:false,success:function(j){$("form#assignedlogos").replaceWith(j);$("#availablelogos").unbind();$("form#assignedlogos").unbind();$("#uploadlogo").unbind();$("table#details").unbind();$("form#availablelogos input[name='filename']").unbind("click");GINIT.initialize()},error:function(j,l,k){$("#spinner").hide();$("#availablelogos").unbind();$("#assignedlogos").unbind();$("#uploadlogo").unbind();$("table#details").unbind();$("form#availablelogos input[name='filename']").unbind("click");GINIT.initialize()}});$.ajax({type:"GET",url:d,cache:false,success:function(j){$("form#availablelogos").replaceWith(j);$("form#availablelogos").unbind();$("form#assignedlogos").unbind();$("#uploadlogo").unbind();$("table#details").unbind();$("form#availablelogos input[name='filename']").unbind("click");GINIT.initialize()},error:function(j,l,k){$("#spinner").hide();$("#availablelogos").unbind();$("#uploadlogo").unbind();$("table#details").unbind();$("form#availablelogos input[name='filename']").unbind("click");c.html(j.responseText).append('<p><input type="button" value="Close" class="simplemodal-close" /></p>').modal({closeHTML:"<a href='#' title='Close' class='modal-close'>x</a>",position:["20%",],overlayId:"simpledialog-overlay",minHeight:"200px",containerId:"simpledialog-container",onShow:function(m){var n=this}});GINIT.initialize()}})},error:function(e,k,j){$("#spinner").hide();c.html(e.responseText).append('<p><input type="button" value="Close" class="simplemodal-close" /></p>').modal({closeHTML:"<a href='#' title='Close' class='modal-close'>x</a>",position:["20%",],overlayId:"simpledialog-overlay",minHeight:"200px",containerId:"simpledialog-container",onShow:function(l){var m=this}});c.css("color","red")}}).done(function(){})}));$("li.fromprevtoright").each(function(){var g=$(this).prev();var d=g.offset().left;var f=$(this).prev().find("input,textarea").last();var h=f.offset().left;var c=f.width();var e=(h+c)-d;$(this).css("text-align","right").width(e)});$("form#assignedlogos input[name='logoid']").click(function(){$(this).after($("div#unsignlogosbtn").show())});$("form#applyforaccount").on("submit",function(f){f.preventDefault();var c=$("div.result");var d=$("form#applyforaccount").serializeArray();$.ajax({type:"POST",url:$(this).attr("action"),data:d,dataType:"html",cache:false,beforeSend:function(){c.html("");$("#spinner").show()},success:function(e){$("#spinner").hide();c.html(e);$("form#applyforaccount").remove()},error:function(e,h,g){$("#spinner").hide();c.html(e.responseText);c.css("color","red");$("form#applyforaccount").remove()}})});$("form#assignedlogos").on("submit",(function(h){h.preventDefault();var c=$("div.uploadresult");var f=$("form#assignedlogos").serializeArray();var g=$("input[name=logoid]:radio:checked");var j=$("#messagereveal");var d=j.find("p.infomsg");$.ajax({type:"POST",url:$(this).attr("action"),data:f,dataType:"html",cache:false,beforeSend:function(){$("div#unsignlogosbtn").hide().appendTo("form#assignedlogos");c.html("");$("#spinner").show()},success:function(e){$("#spinner").hide();d.html(e);j.foundation("reveal","open");g.parent().remove()},error:function(e,l,k){$("#spinner").hide();d.html(e.responseText);j.foundation("reveal","open")}})}));$("button.updatenotifactionstatus").click(function(){var h;var d=$(this).attr("value");var g=$(this).closest("tbody");var e=$(this).closest("tr");var f=e.find("div.subscrstatus:first");var c=b+"notifications/subscriber/updatestatus/"+d;$("form#notificationupdateform").attr("action",c);$("form#notificationupdateform #noteid").val(d)});$("a.showmetadata").click(function(){var c=$("div.metadataresult");var d=$(this).attr("href");$.ajax({type:"GET",url:d,dataType:"xml",cache:true,timeout:10000,success:function(f){$("#spinner").hide();var e=f.xml?f.xml:(new XMLSerializer()).serializeToString(f);c.text(e).append('<p><input type="button" value="Close" class="simplemodal-close" /></p>').modal({containerCss:{padding:5,width:800},maxHeight:800,closeHTML:"<a href='#' title='Close' class='modal-close'>x</a>",position:["10%"],overlayId:"simpledialog-overlay",minHeight:"500",minWidth:"500",containerId:"simpledialog-container",onShow:function(g){var h=this}})},beforeSend:function(){c.text("");$("#spinner").show()},error:function(e,g,f){$("#spinner").hide();alert(e.responseText)}});return false});$("form#fvform").submit(function(f){f.preventDefault();var g=$(this).serializeArray();var d=$("form#fvform").attr("action");var c=$(this).find("button:focus").attr("id");$.ajax({type:"POST",url:d,cache:false,data:g,timeout:120000,success:function(e){$("#spinner").hide();var j=$.parseJSON(e);if(!j){alert("no data received from upstream server")}else{if(j.returncode){$("span#fvreturncode").append(j.returncode);$("div#fvresult").show()}if(j.returncode==="success"){$("form").find("button:focus").css("background-color","#00aa00");$("form").find("button:focus").data("passed","true");$("form").find("button:focus").attr("disabled","true")}else{if(j.returncode==="error"){$("form").find("button:focus").css("background-color","#aa0000");$("form").find("button:focus").data("passed","false")}}if(j.message){var h;$.each(j.message,function(l,k){$.each(k,function(o,n){h="<div>"+l+": "+n+"</div>";$("div#fvmessages").append(h)})})}}},beforeSend:function(){$("span#fvreturncode").text("");$("div#fvmessages").text("");$("#spinner").show()},error:function(h,j,e){$("#spinner").hide();if(j==="timeout"){alert("got timeout from validation server")}else{alert("unknown problem with receiving data")}}})});$("form#approvequeue").submit(function(f){var c=0;var d=0;$("button[name='mandatory']").each(function(e){if($(this).data("passed")==="true"){c+=1}d+=1});if(d!==c){alert("All mandatory validations have to pass successfully!");f.preventDefault()}});$("a.fmembers").click(function(){var d=$(this),c=d.attr("href");var f=$(this).parent().parent();if($(f).hasClass("opened")===true){$(f).next().remove();$(f).removeClass("opened").removeClass("highlight")}else{var e=$("<ul/>");$.ajax({url:c,timeout:3500,cache:true,success:function(k){$("#spinner").hide();var h;var j;var g;$(f).addClass("opened").addClass("highlight");if(!k){alert("no data")}else{if(!k.idp&&!k.sp&&!k.both){g="<div>"+k.definitions.nomembers+"</div>";e.append(g)}else{var l=k.definitions.preurl;if(k.idp){h=$("<div>"+k.definitions.idps+"</div>");j=$("<ol/>");$.each(k.idp,function(n,m){g='<li class="homeorg"><a href="'+l+m.pid+'">'+m.pname+"</a> ("+m.entityid+") </li>";j.append(g)});h.append(j);e.append(h)}if(k.sp){h=$("<div>"+k.definitions.sps+"</div>");j=$("<ol/>");$.each(k.sp,function(n,m){g='<li class="resource"><a href="'+l+m.pid+'">'+m.pname+"</a> ("+m.entityid+") </li>";j.append(g)});h.append(j);e.append(h)}if(k.both){h=$("<div>"+k.definitions.both+"</div>");j=$("<ol/>");$.each(k.both,function(n,m){g='<li class="both"><a href="'+l+m.pid+'">'+m.pname+"</a> ("+m.entityid+") </li>";j.append(g)});h.append(j);e.append(h)}}}},beforeSend:function(){$("#spinner").show()},error:function(){$("#spinner").hide();alert("problem with loading data")}}).done(function(){var g='<tr class="feddetails"><td colspan="7"><ul class="feddetails">'+e.html()+"</ul></td></tr>";$(g).insertAfter(f)})}return false});$("a#getmembers").click(function(){var d=$(this),c=d.attr("href");var e=$("<ul/>");$.ajax({url:c,timeout:22500,cache:true,success:function(g){$("#spinner").hide();var k=$.parseJSON(g);if(!k){alert("no data")}else{var j=$("<div/>");j.addClass("zebralist row");j.css("list-style-type","decimal");var h;var l=1;var f=1;$.each(k,function(o,n){var m=$("<span/>");$.each(n.feds,function(p,q){var r='<span class="label">'+q+"</span>&nbsp;";m.append(r)});h='<div class="large-12 columns" style="margin-top: 2px; margin-bottom: 2px"><div class="large-9 columns">'+f+'. <a href="'+n.url+'">'+n.name+"</a> <i> ("+n.entityid+') </i></div><div class="fedlbl large-3 end text-right columns">'+m.html()+"</div></div>";j.append(h);l=l+1;f=f+1});e.append(j)}},beforeSend:function(){$("#spinner").show()},error:function(){$("#spinner").hide();alert("problem with loading data")}}).done(function(){var f=e.html();$("div#membership").replaceWith(f)});return false});$(".accordionButton").addClass("off");$(".accordionButton1").addClass("on");$(".accordionButton").mouseover(function(){$(this).addClass("over")}).mouseout(function(){$(this).removeClass("over")});$(".accordionButton").click(function(){$(".accordionButton").removeClass("on");$(".accordionButton").addClass("off");$(".accordionContent").slideUp("fast");if($(this).next().is(":hidden")===true){$(this).addClass("on");$(this).removeClass("off");$(this).next().slideDown("fast")}});$(".accordionContent").hide()}};$(document).ready(function(){GINIT.initialize();var g=$("#providereditform");if(g.length){var p;g.find("div.group").each(function(){var w=$(this).find("select").first();$(this).find("button.langinputrm").each(function(){p=$(this).attr("value");w.find("option[value="+p+"]").each(function(){$(this).toggleOption(true);$(this).attr("disabled",true)})})});var a=function(z,y,w,x){return $('<div class="large-12 small-12 columns"><div class="small-3 columns"><label for="'+w+'" class="right inline">'+y+'</label></div><div class="small-6 large-7 columns"><input id="'+w+'" name="'+w+'" type="text" class="validurl"/></div><div class="small-3 large-2 columns"> <button type="button" class="btn langinputrm button inline tiny left alert" name="langrm" value="'+z+'">'+x+"</button></div></div>")};$("button#idpssoadddomainhint").click(function(){var y="";var w="0123456789";for(var x=0;x<5;x++){y+=w.charAt(Math.floor(Math.random()*w.length))}var C=$("button#helperbutttonrm").html();var z=$(this).attr("value");var A="f[uii][idpsso][domainhint][n"+y+"]";var B=a("Domain Hint","Domain Hint",A,C);B.insertBefore($(this).closest("span").parent())});$("button#idpssoaddiphint").click(function(){var y="";var w="0123456789";for(var x=0;x<5;x++){y+=w.charAt(Math.floor(Math.random()*w.length))}var C=$("button#helperbutttonrm").html();var z=$(this).attr("value");var A="f[uii][idpsso][iphint][n"+y+"]";var B=a("IP Hint","IP Hint",A,C);B.insertBefore($(this).closest("span").parent())});$("button#addlhelpdesk").click(function(){var w=$("span.lhelpdeskadd option:selected").first();var z=w.val();var C=$("button#helperbutttonrm").html();if(typeof z==="undefined"){return false}var A=w.text();var x=$(this).attr("value");w.attr("disabled",true).attr("selected",false);var y="f[lhelpdesk]["+z+"]";var B=a(z,A,y,C);B.insertBefore($(this).closest("span").parent())});$("button#addldisplayname").click(function(){var w=$("span.ldisplaynameadd option:selected").first();var z=w.val();var C=$("button#helperbutttonrm").html();if(typeof z==="undefined"){return false}var A=w.text();var x=$(this).attr("value");w.attr("disabled",true).attr("selected",false);var y="f[ldisplayname]["+z+"]";var B=a(z,A,y,C);B.insertBefore($(this).closest("span").parent())});$("button#idpadduiidisplay").click(function(){var w=$("span.idpuiidisplayadd option:selected").first();var z=w.val();var C=$("button#helperbutttonrm").html();if(typeof z==="undefined"){return false}var A=w.text();var x=$(this).attr("value");w.attr("disabled",true).attr("selected",false);var y="f[uii][idpsso][displayname]["+z+"]";var B=a(z,A,y,C);B.insertBefore($(this).closest("span").parent())});$("button#idpadduiihelpdesk").click(function(){var w=$("span.idpuiihelpdeskadd option:selected").first();var z=w.val();if(typeof z==="undefined"){return false}var C=$("button#helperbutttonrm").html();var A=w.text();var x=$(this).attr("value");w.attr("disabled",true).attr("selected",false);var y="f[uii][idpsso][helpdesk]["+z+"]";var B=a(z,A,y,C);B.insertBefore($(this).closest("span").parent())});$("button#spadduiidisplay").click(function(){var w=$("span.spuiidisplayadd option:selected").first();var y=w.val();if(typeof y==="undefined"){return false}var z=w.text();var B=$("button#helperbutttonrm").html();w.attr("disabled",true).attr("selected",false);var x="f[uii][spsso][displayname]["+y+"]";var A=a(y,z,x,B);A.insertBefore($(this).closest("span").parent())});$("button#spadduiihelpdesk").click(function(){var w=$("span.spuiihelpdeskadd option:selected").first();var y=w.val();if(typeof y==="undefined"){return false}var z=w.text();var B=$("button#helperbutttonrm").html();w.attr("disabled",true).attr("selected",false);var x="f[uii][spsso][helpdesk]["+y+"]";var A=a(y,z,x,B);A.insertBefore($(this).closest("span").parent())});$("button#spadduiidesc").click(function(){var w=$("span.spuiidescadd option:selected").first();var x=w.val();if(typeof x==="undefined"){return false}var y=w.text();var z=$("button#helperbutttonrm").html();w.attr("disabled",true).attr("selected",false);$('<div class="small-12 columns"><div class="small-3 columns"><label for="f[uii][spsso][desc]['+x+']" class="right inline">'+y+'</label></div><div class="small-6 large-7 columns"><textarea id="f[uii][spsso][desc]['+x+']" name="f[uii][spsso][desc]['+x+']" rows="5" cols="40"/></textarea></div><div class="small-3 large-2 columns"><button type="button" class="btn langinputrm button tiny left inline alert" name="uiispdescrm" value="'+x+'">'+z+"</button></div></div>").insertBefore($(this).closest("span").parent())});$("button#addlname").click(function(){var w=$("span.lnameadd option:selected").first();var z=w.val();if(typeof z==="undefined"){return false}var C=$("button#helperbutttonrm").html();var A=w.text();var x=$(this).attr("value");w.attr("disabled",true).attr("selected",false);var y="f[lname]["+z+"]";var B=a(z,A,y,C);B.insertBefore($(this).closest("span").parent())});$("button#idpadduiidesc").click(function(){var w=$("span.idpuiidescadd option:selected").first();var y=w.val();if(typeof y==="undefined"){return false}var A=$("button#helperbutttonrm").html();var z=w.text();var x=$(this).attr("value");w.attr("disabled",true).attr("selected",false);$('<div class="small-12 columns"><div class="small-3 columns"><label for="f[uii][idpsso][desc]['+y+']" class="right inline">'+z+' </label></div><div class="small-6 large-7 columns"><textarea id="f[uii][idpsso][desc]['+y+']" name="f[uii][idpsso][desc]['+y+']" rows="5" cols="40"/></textarea></div><div class="small-3 large-2 columns"> <button type="button" class="btn langinputrm button tiny left inline" name="ldesc" value="'+y+'">'+A+"</button></div></div>").insertBefore($(this).closest("span").parent())});$("button#addlprivacyurlspsso").click(function(){var w=$("span.addlprivacyurlspsso option:selected").first();var z=w.val();if(typeof z==="undefined"){return false}var A=w.text();var C=$("button#helperbutttonrm").html();var x=$(this).attr("value");w.attr("disabled",true).attr("selected",false);var y="f[prvurl][spsso]["+z+"]";var B=a(z,A,y,C);B.insertBefore($(this).closest("span").parent())});$("button#addlprivacyurlidpsso").click(function(){var w=$("span.addlprivacyurlidpsso option:selected").first();var z=w.val();var C=$("button#helperbutttonrm").html();if(typeof z==="undefined"){return false}var A=w.text();var x=$(this).attr("value");w.attr("disabled",true).attr("selected",false);var y="f[prvurl][idpsso]["+z+"]";var B=a(z,A,y,C);B.insertBefore($(this).closest("span").parent())});$("#ncontactbtn").click(function(){var A="";var z=$(this).attr("value").split("|");var x="abcdefghijklmnopqrstuvwxyz0123456789";for(var y=0;y<5;y++){A+=x.charAt(Math.floor(Math.random()*x.length))}var w='<div class="group"><div class="small-12 columns"><fieldset><legend>'+z[5]+'</legend><div><div class="small-12 columns"><div class="small-3 columns"><label for="f[contact][n_'+A+'][type]" class="right inline">'+z[1]+'</label></div><div class="small-8 large-7 columns inline"><select name="f[contact][n_'+A+'][type]"> <option value="administrative">Administrative</option> <option value="technical">Technical</option> <option value="support" selected="selected">Support</option> <option value="billing">Billing</option> <option value="other">Other</option> </select></div><div class="small-1 large-2 columns"></div></div> <div class="small-12 columns"><div class="small-3 columns"><label for="f[contact][n_'+A+'][fname]" class="right inline">'+z[2]+'</label></div><div  class="small-8 large-7 columns"><input type="text" name="f[contact][n_'+A+'][fname]" value="" id="f[contact][n_'+A+'][fname]" class="right inline" /></div><div class="small-1 large-2 columns"></div></div> <div class="small-12 columns"><div  class="small-3 columns"><label for="f[contact][n_'+A+'][sname]" class="right inline">'+z[3]+'</label></div><div class="small-8 large-7 columns"><input type="text" name="f[contact][n_'+A+'][sname]" value="" id="f[contact][n_'+A+'][sname]" class="right inline" /></div><div class="small-1 large-2 columns"></div></div><div class="small-12 columns"><div class="small-3 columns"><label for="f[contact][n_'+A+'][email]" class="right inline ">'+z[4]+'</label></div><div class="small-8 large-7 columns"><input type="text" name="f[contact][n_'+A+'][email]" value="" id="f[contact][n_'+A+'][email]" class="right inline" /></div><div class="small-1 large-2 columns"></div></div><div class="rmelbtn small-12 columns"><div class="small-9 large-10 columns"><button type="button" class="btn contactrm tiny alert button inline right" name="contact" value="'+A+'">'+z[0]+'</button></div><div class="small-3 large-2 columns"></div></div></div></fieldset></div></div>';$(this).parent().before(w)});$("#nidpssocert").click(function(){var z="";var x="abcdefghijklmnopqrstuvwyz0123456789";for(var y=0;y<5;y++){z+=x.charAt(Math.floor(Math.random()*x.length))}z="newx"+z;var w='<div class="certgroup small-12 columns"><div class="small-12 columns hidden"><div class="small-3 columns"><label for="f[crt][idpsso]['+z+'][type]" class="inline right">Certificate type</label></div><div class="small-6 large-7 columns"><select name="f[crt][idpsso]['+z+'][type]"> <option value="x509">x509</option> </select></div><div class="small-3 large-2 columns"></div><div class="small-3 large-2 columns"></div></div><div class="small-12 columns"><div class="small-3 columns"><label for="f[crt][idpsso]['+z+'][usage]" class="inline right">Certificate use</label></div><div class="small-6 large-7 columns"><select name="f[crt][idpsso]['+z+'][usage]"> <option value="signing">signing</option> <option value="encryption">encryption</option> <option value="both" selected="selected">signing and encryption</option> </select> </div><div class="small-3 large-2 columns"></div></div><div class="small-12 columns hidden"><div class="small-3 columns"><label for="f[crt][idpsso]['+z+'][keyname]" class="inline right">KeyName</label></div><div class="small-6 large-7 columns"><input type="text" name="f[crt][idpsso]['+z+'][keyname]" value="" id="f[crt][idpsso]['+z+'][keyname]" class=""  /> </div><div class="small-3 large-2 columns"></div></div><div class="small-12 columns"><div class="small-3 columns"><label for="f[crt][idpsso]['+z+'][certdata]" class="inline right">Certificate</label></div><div class="small-6 large-7 columns"><textarea name="f[crt][idpsso]['+z+'][certdata]" cols="65" rows="20" id="f[crt][idpsso]['+z+'][certdata]" class="certdata notice" ></textarea></div><div class="small-3 large-2 columns"></div></div>';$(this).parent().before(w)});$("#naacert").click(function(){var z="";var x="abcdefghijklmnopqrstuvwyz0123456789";for(var y=0;y<5;y++){z+=x.charAt(Math.floor(Math.random()*x.length))}z="newx"+z;var w='<div class="certgroup small-12 columns"><div class="small-12 columns hidden"><div class="small-3 columns"><label for="f[crt][aa]['+z+'][type]" class="inline right">Certificate type</label></div><div class="small-6 large-7 columns"><select name="f[crt][aa]['+z+'][type]"> <option value="x509">x509</option> </select> </div><div class="small-3 large-2 columns"></div><div class="small-3 large-2 columns"></div></div><div class="small-12 columns"><div class="small-3 columns"><label for="f[crt][aa]['+z+'][usage]" class="inline right">Usage</label></div><div class="small-6 large-7 columns"><select name="f[crt][aa]['+z+'][usage]"> <option value="signing">signing</option> <option value="encryption">encryption</option> <option value="both" selected="selected">signing and encryption</option> </select> </div><div class="small-3 large-2 columns"></div></div><div class="small-12 columns hidden"><div class="small-3 columns"><label for="f[crt][aa]['+z+'][keyname]" class="inline right">KeyName</label></div><div class="small-6 large-7 columns"><input type="text" name="f[crt][aa]['+z+'][keyname]" value="" id="f[crt][aa]['+z+'][keyname]" class=""  /> </div><div class="small-3 large-2 columns"></div></div><div class="small-12 columns"><div class="small-3 columns"><label for="f[crt][aa]['+z+'][certdata]" class="inline right">Certificate</label></div><div class="small-6 large-7 columns"><textarea name="f[crt][aa]['+z+'][certdata]" cols="65" rows="20" id="f[crt][aa]['+z+'][certdata]" class="certdata notice" ></textarea> </div><div class="small-3 large-2 columns"></div></div> ';$(this).parent().before(w)});$("#nspssocert").click(function(){var z="";var x="abcdefghijklmnopqrstuvwyz0123456789";for(var y=0;y<5;y++){z+=x.charAt(Math.floor(Math.random()*x.length))}z="newx"+z;var w='<div class="certgroup small-12 columns"><div class="small-12 columns hidden"><div class="small-3 columns"><label for="f[crt][spsso]['+z+'][type]" class="right inline">Certificate type</label></div><div class="small-8 large-7 columns"><select name="f[crt][spsso]['+z+'][type]"><option value="x509">x509</option></select> </div><div class="small-1 large-2 columns end"></div></div><div class="small-12  columns"><div class="small-3 columns"><label for="f[crt][spsso]['+z+'][usage]" class="right inline">Certificate use</label></div><div class="small-8 large-7 columns"><select name="f[crt][spsso]['+z+'][usage]"><option value="signing">signing</option> <option value="encryption">encryption</option> <option value="both" selected="selected">signing and encryption</option> </select></div><div class="small-1 large-2 columns end"></div></div><div class="small-12 columns hidden"><div class="small-3 columns"><label for="f[crt][spsso]['+z+'][keyname]" class="right inline">KeyName</label></div><div class="small-8 large-7 columns"><input type="text" name="f[crt][spsso]['+z+'][keyname]" value="" id="f[crt][spsso]['+z+'][keyname]" class=""  /></div><div class="small-1 large-2 columns end"></div> </div><div class="small-12 columns"><div class="small-3 columns"><label for="f[crt][spsso]['+z+'][certdata]" class="right inline">Certificate</label></div><div class="small-8 large-7 columns"><textarea name="f[crt][spsso]['+z+'][certdata]" cols="65" rows="20" id="f[crt][spsso]['+z+'][certdata]" class="certdata" ></textarea></div><div class="small-1 large-2 columns end"></div></div><div class="small-12 columns"><div class="small-3 columns">&nbsp;</div><div class="small-6 large-7 columns"><button class="certificaterm button alert tiny right" value="'+z+'" name="certificate" type="button">Remove certificate</button></div><div class="small-3 large-2 columns"></div></div></div>';$(this).parent().before(w)});$("#nacsbtn").click(function(){var z="";var x="abcdefghijklmnopqrstuvwxyz0123456789";for(var y=0;y<5;y++){z+=x.charAt(Math.floor(Math.random()*x.length))}var w='<div class="srvgroup"><div class="small-12 columns"><div class="small-3 columns"><label for="f[srv][AssertionConsumerService][n_'+z+'][bind]" class="right inline">Binding Name</label></div><div class="small-5 columns inline"><select name="f[srv][AssertionConsumerService][n_'+z+'][bind]"> <option value="urn:oasis:names:tc:SAML:2.0:bindings:HTTP-POST">urn:oasis:names:tc:SAML:2.0:bindings:HTTP-POST</option> <option value="urn:oasis:names:tc:SAML:2.0:bindings:HTTP-Artifact" selected="selected">urn:oasis:names:tc:SAML:2.0:bindings:HTTP-Artifact</option> <option value="urn:oasis:names:tc:SAML:2.0:bindings:HTTP-POST-SimpleSign">urn:oasis:names:tc:SAML:2.0:bindings:HTTP-POST-SimpleSign</option> <option value="urn:oasis:names:tc:SAML:2.0:bindings:PAOS">urn:oasis:names:tc:SAML:2.0:bindings:PAOS</option> <option value="urn:oasis:names:tc:SAML:2.0:profiles:browser-post">urn:oasis:names:tc:SAML:2.0:profiles:browser-post</option> <option value="urn:oasis:names:tc:SAML:1.0:profiles:browser-post">urn:oasis:names:tc:SAML:1.0:profiles:browser-post</option> <option value="urn:oasis:names:tc:SAML:1.0:profiles:artifact-01">urn:oasis:names:tc:SAML:1.0:profiles:artifact-01</option> </select></div> <div class="small-4 columns"><div class="small-6 columns"><input type="text" name="f[srv][AssertionConsumerService][n_'+z+'][order]" value="" id="f[srv][AssertionConsumerService][n_'+z+'][order]" size="2" maxlength="2" class="acsindex "  /></div><div class="small-6 columns"><label for="f[srv][AssertionConsumerService][n_'+z+'][default]">Is default</label><input type="radio" name="f[srv][AssertionConsumerService][n_'+z+'][default]" value="1" id="f[srv][AssertionConsumerService][n_'+z+'][default]" class="acsdefault"/></div></div> </div>          <div class="small-12 columns"><div class="small-3 columns"><label for="f[srv][AssertionConsumerService][n_'+z+'][url]" class="right inline">URL</label></div><div class="small-8 large-7 columns inline"><input name="f[srv][AssertionConsumerService][n_'+z+'][url]" id="f[srv][AssertionConsumerService][n_'+z+'][url]" type="text"></div><div class="small-3 large-2 columns"><button class="inline left button tiny alert rmfield"  name="rmfield" type="button">Remove</button></div></div></div>';$(this).parent().before(w)});$("#nidpartifactbtn").click(function(){var z="";var x="abcdefghijklmnopqrstuvwxyz0123456789";for(var y=0;y<5;y++){z+=x.charAt(Math.floor(Math.random()*x.length))}var w='<div class="srvgroup"><div class="small-12 columns"><div class="small-3 columns"><label for="f[srv][IDPArtifactResolutionService][n_'+z+'][bind]" class="right inline">Binding Name</label></div><div class="small-6 large-7 columns inline"><select name="f[srv][IDPArtifactResolutionService][n_'+z+'][bind]"> <option value="urn:oasis:names:tc:SAML:2.0:bindings:SOAP" selected="selected">urn:oasis:names:tc:SAML:2.0:bindings:SOAP</option> <option value="urn:oasis:names:tc:SAML:1.0:bindings:SOAP-binding">urn:oasis:names:tc:SAML:1.0:bindings:SOAP-binding</option></select></div> <div class="small-2 large-1 columns end"><input type="text" name="f[srv][IDPArtifactResolutionService][n_'+z+'][order]" value="" id="f[srv][IDPArtifactResolutionService][n_'+z+'][order]" size="2" maxlength="2" class="acsindex "  /></div></div> <div class="small-12 columns"><div class="small-3 columns"><label for="f[srv][IDPArtifactResolutionService][n_'+z+'][url]" class="right inline">URL</label></div><div class="small-6 large-7 columns inline"><input name="f[srv][IDPArtifactResolutionService][n_'+z+'][url]" id="f[srv][IDPArtifactResolutionService][n_'+z+'][url]" type="text"></div><div class="small-3 large-2 columns"><button class="inline left button tiny alert rmfield" value="" name="rmfield" type="button">Remove</button></div></div>';$(this).parent().before(w)});$("#nspartifactbtn").click(function(){var z="";var x="abcdefghijklmnopqrstuvwxyz0123456789";for(var y=0;y<5;y++){z+=x.charAt(Math.floor(Math.random()*x.length))}var w='<div class="srvgroup"><div class="small-12 columns"><div class="small-3 columns"><label for="f[srv][SPArtifactResolutionService][n_'+z+'][bind]" class="right inline">Binding Name</label></div><div class="small-8 large-7 columns inline"><select name="f[srv][SPArtifactResolutionService][n_'+z+'][bind]"> <option value="urn:oasis:names:tc:SAML:2.0:bindings:SOAP" selected="selected">urn:oasis:names:tc:SAML:2.0:bindings:SOAP</option> <option value="urn:oasis:names:tc:SAML:1.0:bindings:SOAP-binding">urn:oasis:names:tc:SAML:1.0:bindings:SOAP-binding</option></select> </div> <div class="small-1  columns left"><input type="text" name="f[srv][SPArtifactResolutionService][n_'+z+'][order]" value="" id="f[srv][SPArtifactResolutionService][n_'+z+'][order]" size="2" maxlength="2" class="acsindex "  /></div></div>           <div class="small-12 columns"><div class="small-3 columns"><label for="f[srv][SPArtifactResolutionService][n_'+z+'][url]" class="right inline">URL</label></div><div class="small-6 large-7 columns inline"><input name="f[srv][SPArtifactResolutionService][n_'+z+'][url]" id="f[srv][SPArtifactResolutionService][n_'+z+'][url]" type="text"> </div><div class="small-3 large-2 columns"><button class="inline left button tiny alert rmfield"  name="rmfield" type="button">Remove</button></div></div>';$(this).parent().before(w)});$("#ndrbtn").click(function(){var z="";var x="abcdefghijklmnopqrstuvwxyz0123456789";for(var y=0;y<5;y++){z+=x.charAt(Math.floor(Math.random()*x.length))}var w='<div class="srvgroup"><div class="small-12 columns"><div class="small-3 columns"><label for="f[srv][DiscoveryResponse][n_'+z+'][bind]" class="right inline">Binding Name</label></div><div class="small-6 large-7 columns"><select name="f[srv][DiscoveryResponse][n_'+z+'][bind]"><option value="urn:oasis:names:tc:SAML:profiles:SSO:idp-discovery-protocol">urn:oasis:names:tc:SAML:profiles:SSO:idp-discovery-protocol</option></select> </div><div class="small-1 columns end"><input type="text" name="f[srv][DiscoveryResponse][n_'+z+'][order]" value="" id="f[srv][DiscoveryResponse][n_'+z+'][order]" size="2" maxlength="2" class="acsindex "  /></div></div><div class="small-12 columns"><div class="small-3 columns"><label for="f[srv][DiscoveryResponse][n_'+z+'][url]" class="right inline">URL</label></div><div class="small-6 large-7 columns"><input name="f[srv][DiscoveryResponse][n_'+z+'][url]" id="f[srv][DiscoveryResponse][n_'+z+'][url]" type="text"></div><div class="small-1 columns end"><button class="rmfield button alert tiny left" name="rmfield">Remove</button></div></div></div>';$(this).parent().before(w)});$("#nribtn").click(function(){var z="";var x="abcdefghijklmnopqrstuvwxyz0123456789";for(var y=0;y<5;y++){z+=x.charAt(Math.floor(Math.random()*x.length))}var w='<div class="small-12 columns srvgroup"><div class="small-3 columns"><label for="f[srv][RequestInitiator][n_'+z+'][url]" class="right inline">URL</label></div><div class="small-6 large-7 columns"><input name="f[srv][RequestInitiator][n_'+z+'][url]" id="f[srv][RequestInitiator][n_'+z+'][url]" type="text"></div><div class="small-3 large-2 columns"><button type="button" class="inline left button tiny alert rmfield" name="rmfield" value="">remove</button></div></div>';$(this).parent().before(w)});$("button.addnewlogo").click(function(){var x;var C=$(this).closest("div.reviewlogo");var z="abcdefghijklmnopqrstuvwxyz0123456789";var I=C.attr("id");var F;var w="";if(I==="idpreviewlogo"){F="idp"}else{F="sp"}for(var A=0;A<5;A++){w+=z.charAt(Math.floor(Math.random()*z.length))}var K=C.find("input[name='"+F+"inputurl']").attr("value");var E=C.find("input[name='"+F+"inputsize']").attr("value");var H=C.find("select[name='"+F+"logolang']").val();if(H==="0"){x="unspec"}else{x=H}var D='<input type="hidden" name="f[uii]['+F+"sso][logo][n"+w+'][url]" value="'+K+'">';var B='<input type="hidden" name="f[uii]['+F+"sso][logo][n"+w+'][size]" value="'+E+'">';var G='<input type="hidden" name="f[uii]['+F+"sso][logo][n"+w+'][lang]" value="'+H+'">';var y=$("li#nlogo"+F+"row");var J=y.clone(true);J.removeAttr("id");J.find("img").first().attr("src",K).append(D).append(B).append(G);J.find("div.logoinfo").first().append(""+x+"<br />").append(K+"<br />").append(E+"<br />");J.insertBefore(y).show()});$("button.getlogo").click(function(){var B,D;var x=$(this).attr("name");var C,E;var z=$(this).attr("value");if(x==="idpgetlogo"){E=$("div#idpreviewlogo");E.hide();B=$("small.idplogoretrieve");B.empty().hide();C=$("[name='idplogoretrieve']").val();D=$("div#idpreviewlogo div.imgsource")}else{E=$("div#spreviewlogo");E.hide();B=$("small.splogoretrieve");B.empty().hide();C=$("[name='splogoretrieve']").val();D=$("div#spreviewlogo div.imgsource")}var A=$("[name='csrfname']").val();var w=$("[name='csrfhash']").val();var y=[{name:A,value:w},{name:"logourl",value:C}];$.ajax({type:"POST",url:z,cache:false,data:y,dataType:"json",success:function(N){if(N){if(N.error){B.append(N.error).show()}else{if(N.data){var K=new Image();K.onload=function(){};K.src=N.data.url;var G=N.data.width+"x"+N.data.height;var M,L,H;var I="abcdefghijklmnopqrstuvwxyz0123456789";var F="";for(var J=0;J<5;J++){F+=I.charAt(Math.floor(Math.random()*I.length))}if(x==="idpgetlogo"){H='<input type="hidden" name="logotype" value="idp">';M='<input type="hidden" name="idpinputurl" value="'+N.data.url+'">';L='<input type="hidden" name="idpinputsize" value="'+G+'">';$("div#idpreviewlogo div.imgsource").empty().append(K).append(M).append(L).append(H);$("div#idpreviewlogo div.logoinfo").empty().append(G);E.show()}else{if(x==="spgetlogo"){H='<input type="hidden" name="logotype" value="idp">';M='<input type="hidden" name="spinputurl" value="'+N.data.url+'">';L='<input type="hidden" name="spinputsize" value="'+G+'">';$("div#spreviewlogo div.imgsource").empty().append(K).append(M).append(L).append(H);$("div#spreviewlogo div.logoinfo").empty().append(G);E.show()}}}}}}})});g.on("click","button.contactrm",function(y){var x=$(this).attr("value");var z=$(this).attr("name");var w=$(this).closest("div.group");w.remove()});g.on("click","button.certificaterm",function(y){var x=$(this).attr("value");var z=$(this).attr("name");var w=$(this).closest("div.certgroup");w.remove()});g.on("click","input.acsdefault",function(w){if($(this).is(":checked")){$(".acsdefault").not(this).removeAttr("checked")}});g.on("click","button.rmfield",function(y){var x=$(this).closest("div.srvgroup");var w=$(this).attr("value");var z=$(this).attr("name");x.find("input").each(function(){$(this).attr("value","")});x.find("textarea").each(function(){$(this).val("")});x.remove()});g.on("click","button.langinputrm",function(z){z.preventDefault();var y=$(this).closest("div").parent();var x=$(this).attr("value");var A=$(this).attr("name");var w=$(this).closest("div.group").find("select").first();y.find("input").each(function(){$(this).attr("value","")});y.find("textarea").each(function(){$(this).val("")});w.find("option[value="+x+"]").each(function(){$(this).toggleOption(true);$(this).attr("disabled",false)});y.remove()})}if($("#matrixloader").length>0){var s=$("#policyupdater");var j=s.attr("data-jagger-link");var q=$(s).find("form").first();var e=$("#matrixloader").attr("data-jagger-providerdetails");var l=$(s).find("span.mrequester").first();var d=$(s).find("span.mattribute").first();var m=$(s).find("div.yes").first();var r=$(s).find("div.attrflow").first();var c=$("#idpmatrixdiv");var k;s.on("click","div.yes",function(x){x.preventDefault();var w=q.attr("action");$.ajax({type:"POST",url:w,data:q.serializeArray(),success:function(z){s.foundation("reveal","close");if(!k.hasClass("dis")){var y=$.trim(k.text());if((z==="2"&&(y==="R"||y==="D"))||(z==="1"&&y==="R")){k.attr("class","perm")}else{if((z==="2c"&&(y==="R"||y==="D"))||(z==="1c"&&y==="R")){k.attr("class","spec")}else{if((z==="1"&&y==="D")||(z==="0")){k.attr("class","den")}else{if((z==="1c"&&y==="D")||(z==="0c")){k.attr("class","den")}}}}}}})});c.on("click","td",function(y){k=$(this);var x=$(this).attr("data-jagger-entidlink");if(x!==undefined){var A=e+"/"+x;document.location.href=A;return false}var z=$(this).attr("data-jagger-spid");var w=$(this).attr("data-jagger-attrid");if(z!==undefined&&w!==undefined){$.ajax({type:"GET",url:j+"/"+z+"/"+w,cache:false,dataType:"json",success:function(D){q.find("select[name='policy']").prop("selected",false).filter('[value=""]').prop("selected",true);q.find("input[name='attribute']").first().val(D.attributename);q.find("input[name='requester']").first().val(D.requester);l.html(D.requester);d.html(D.attributename);var C=$("<tbody></tbody>");var B='<thead><tr><th colspan="2">Current attribute flow</th></tr></thead>';$.each(D.details,function(H,G){var I="<tr><td>"+G.name+"</td><td>"+G.value+"</td/></tr>";C.append(I)});var F=$("<table/>").css({"font-size":"smaller"}).addClass("detailsnosort").addClass("small-12").addClass("columns");var E=$("<div/>");F.append(B);F.append(C);E.append(F);r.html(E.html());s.foundation("reveal","open")}})}});var n=$("#matrixloader").attr("data-jagger-link");if(typeof n==="undefined"){return false}$.ajax({type:"GET",url:n,cache:false,dataType:"json",success:function(L){$("#spinner").hide();if(L){var z=new Date();var J;var E=L.attributes;var y=L.policies;var F=L.total;var x=L.message;if(F!==undefined&&F===0&&x!==undefined){var G='<div class="small-12 medium-11 columns small-centered"><div data-alert class="alert-box warning">'+x+"</div></div>";c.html(G);return false}var K=0;var C='<table class="table table-header-rotated" id="idpmatrixresult"><thead><tr>';C+="<th></th>";$.each(E,function(M,N){C+='<th class="rotate"><div><span>'+M+"</span></div></th>";K++});if(K>52){$("#container").css({"max-width":"100%"})}var I,H,A;C+="</tr></thead><tbody>";$.each(y,function(N,M){C+='<tr><td data-jagger-entidlink="'+M.spid+'" class="searchcol"><span data-tooltip aria-haspopup="true" class="has-tip" data-options="disable_for_touch:true" title="'+N+'" >'+M.name+'</span><span class="hidden">'+N+"</span></td>";$.each(E,function(P,O){H=null;if(M.attributes[P]!==undefined){A=M.attributes[P]}else{A=null}if(M.req[P]!==undefined){H=M.req[P]}if(H!==null){I=H[0].toUpperCase()}else{I=""}if(A!==null){if(A===0){J="den"}else{if(A===1){if(M.custom[P]!==undefined){J="spec"}else{J="perm"}}else{J="dis"}}}else{J="dis"}C+='<td data-jagger-spid="'+M.spid+'" data-jagger-attrid="'+O+'" class="'+J+'" title="'+P+'">';C+=I+"</td>"})});C+="</tbody></table>";var D=new Date();var w=D-z;console.log("time of generating matrix: "+w);c.html(C);var B=new Date();w=B-D;console.log("time of input matrinx into DOM: "+w);$("#idpmatrixresult").searcher({inputSelector:"#tablesearchinput",textSelector:".searchcol"})}},beforeSend:function(){$("#spinner").show()},error:function(z,w,x){$("#spinner").hide();var y='<div class="small-12 medium-11 columns small-centered"><div data-alert class="alert-box error">'+x+"</div></div>";c.html(y);return false}})}var b=$("#showhelps");if(b.length){if(b.hasClass("helpactive")){$(".dhelp").show()}else{$(".dhelp").hide()}}var h=$("a#fedlogin").attr("href");var u=new Date();var t=-u.getTimezoneOffset();$("a#fedlogin").attr("href",""+h+"/"+t+"");if($("#fedcategories dd.active").length){var f=$("dd.active").find("a").first().attr("href");var o=$("table.fedistpercat");var v;$.ajax({url:f,timeout:2500,cache:true,value:$("table.fedistpercat"),success:function(w){$("#spinner").hide();v=$.parseJSON(w);if(!v){alert("no data in federation category")}else{$("table.fedistpercat tbody tr").remove();$.each(v,function(z,y){var x="<tr><td>"+y.name+"</td><td>"+y.urn+"</td><td>"+y.labels+"</td><td>"+y.desc+"</td><td>"+y.members+"</td></tr>";o.append(x)})}GINIT.initialize()}})}$(".fedcategory").on("click","",function(x){$("dd").removeClass("active");$(this).closest("dd").addClass("active");var w=$(this).attr("href");var z=$("table.fedistpercat");var y;$.ajax({url:w,timeout:2500,cache:true,value:z,success:function(A){$("#spinner").hide();y=$.parseJSON(A);if(!y){alert("no data in federation category")}else{$("table.fedistpercat tbody tr").remove();$.each(y,function(D,C){var B="<tr><td>"+C.name+"</td><td>"+C.urn+"</td><td>"+C.labels+"</td><td>"+C.desc+"</td><td>"+C.members+"</td></tr>";z.append(B)})}GINIT.initialize()},beforeSend:function(){$("#spinner").show()},error:function(){$("#spinner").hide();alert("problem with loading data")}}).done(function(){var A=z.html()});return false})});$(function(){$("div.floating-menu").addClass("mobilehidden");$("table.idplist tr td:first-child").addClass("homeorg");$("table.idplist tr td:first-child span.alert").removeClass("alert").parent().addClass("alert");var b=$("table.filterlist");b.find("tbody > tr").find("td:eq(1)").mousedown(function(){});$("#filter").keyup(function(){$.uiTableFilter(b,this.value)});$("#filter-form").submit(function(){b.find("tbody > tr:visible > td:eq(1)").mousedown();return false}).focus();$("table.splist tr td:first-child span.alert").removeClass("alert").parent().addClass("alert");var a=$("table.splist");a.find("tbody > tr").find("td:eq(1)").mousedown(function(){});$("#filter").keyup(function(){$.uiTableFilter(a,this.value)});$("#filter-form").submit(function(){a.find("tbody > tr:visible > td:eq(1)").mousedown();return false}).focus();$(".datepicker").datepicker({dateFormat:"yy-mm-dd"});var d=$("[name='baseurl']").val();if(d===undefined){d=""}var c;$("#responsecontainer").load(d+"reports/awaiting/ajaxrefresh");c=setInterval(function(){$("#responsecontainer").load(d+"reports/awaiting/ajaxrefresh")},172000);$("#dashresponsecontainer").load(d+"reports/awaiting/dashajaxrefresh");c=setInterval(function(){$("#dashresponsecontainer").load(d+"reports/awaiting/dashajaxrefresh")},172000);$.ajaxSetup({cache:false});$("#qcounter").load(d+"reports/awaiting/counterqueue");c=setInterval(function(){$("#qcounter").load(d+"reports/awaiting/counterqueue")},86000);$("#languageset select").on("change",function(){var f=$("div#languageset form").attr("action");var e=f+this.value;$.ajax({url:e,timeout:2500,cache:false}).done(function(){$("#languageset").foundation("reveal","close");setTimeout("go_to_private_page()",1000)});return false});$("select.nuseraccesstype").on("change",function(){var e=$(this).find("option:selected");var f=e.val();if(f==="fed"){$("div.passwordrow").hide()}else{$("div.passwordrow").show()}});$("button#idpadduiiprvurl").click(function(){var e=$("span.idpuiiprvurladd option:selected").val();var f=$("span.idpuiiprvurladd option:selected").text();$("span.idpuiiprvurladd option[value="+e+"]").remove();$(this).parent().prepend('<li class="localized"><label for="f[[uii][idpsso][prvurl]['+e+']">'+f+'</label><input id="f[uii][idpsso][prvurl]['+e+']" name="f[uii][idpsso][prvurl]['+e+']" type="text"/></li>')});$("button#spadduiiprvurl").click(function(){var e=$("span.spuiiprvurladd option:selected").val();var f=$("span.spuiiprvurladd option:selected").text();$("span.spuiiprvurladd option[value="+e+"]").remove();$(this).parent().prepend('<li class="localized"><label for="f[[uii][spsso][prvurl]['+e+']">'+f+'</label><input id="f[uii][spsso][prvurl]['+e+']" name="f[uii][spsso][prvurl]['+e+']" type="text"/></li>')});$("button#addlprivacyurl").click(function(){var e=$("li.addlprivacyurl option:selected").val();var f=$("li.addlprivacyurl option:selected").text();$("li.addlprivacyurl option[value="+e+"]").toggleOption(false);$(this).parent().append('<li class="localized"><label for="lprivacyurl['+e+']">'+f+'</label><input id="lprivacyurl['+e+']" name="lprivacyurl['+e+']" type="text"/></li>')});$("a#fedmetasigner").click(function(){var f=$(this),e=f.attr("href");$.ajax({url:e,timeout:2500,cache:false,success:function(g){alert(g)}});return false});$("a#providermetasigner").click(function(){var f=$(this),e=f.attr("href");$.ajax({url:e,timeout:2500,cache:false,success:function(g){alert(g)}});return false});$("a.downloadstat").click(function(){var f=$(this),e=f.attr("href");var g;$.ajax({url:e,timeout:2500,cache:false,success:function(h){g=$.parseJSON(h);if(!g){alert("no data")}else{alert(g.status)}}});return false});$("a.lateststat").click(function(){var f=$(this),e=f.attr("href");var g=$('<div id="#statisticdiag">');$.ajax({url:e,timeout:2500,cache:true,success:function(h){$("#spinner").hide();var j=$.parseJSON(h);if(!j){alert("no data")}else{$("div#statisticdiag").replaceWith('<div id="statisticdiag"></div>');$.each(j,function(l,k){l=new Image();l.src=k.url;$("#statisticdiag").append('<div style="text-align:center; font-weight: bold; width: 90%;">'+k.title+"</div>").append('<div style="font-weight: bolder; width: 90%; text-align: right;">'+k.subtitle+"</div>").append(l)})}i=null},beforeSend:function(){$("#spinner").show()},error:function(){$("#spinner").hide();alert("problem with loading data")}});return false});$("a.clearcache").click(function(){var f=$(this),e=f.attr("href");$.ajax({type:"GET",url:e,timeout:2500,cache:false,success:$(this).remove()});return false});$("a.delbookentity").click(function(){var f=$(this),e=f.attr("href");$.ajax({url:e,timeout:2500,cache:false,success:$(this).parent().remove()});return false});$("a.delbookfed").click(function(){var f=$(this),e=f.attr("href");$.ajax({url:e,timeout:2500,cache:false,success:$(this).parent().remove()});return false});$("a#synchsettings").click(function(){var f=$(this),e=f.attr("href");var g=$("<ul/>");$.ajax({url:e,timeout:2500,cache:false,success:function(h){$("#spinner").hide();var k=$.parseJSON(h);if(!k){alert("no data")}else{var j=$("<ul/>");$.each(k,function(m,l){var n="<li>"+l.result+"</li>";j.append(n)});g.append(j)}},beforeSend:function(){$("#spinner").show()},error:function(){$("#spinner").hide();alert("problem with loading data")}}).done(function(){var h=g.html();$("div#syncresult").replaceWith(h)});return false});$("table.reqattraddform").addClass("hidden");$("button.hideform").addClass("hidden");$("form.reqattraddform").addClass("hidden");$("button.showform").click(function(){$("table.reqattraddform").removeClass("hidden");$("form.reqattraddform").removeClass("hidden");$("button.showform").addClass("hidden");$("button.hideform").removeClass("hidden")});$("button.hideform").click(function(){$("table.reqattraddform").addClass("hidden");$("form.reqattraddform").addClass("hidden");$("button.showform").removeClass("hidden");$("button.hideform").addClass("hidden")});$("#sortable").sortable();$("div.nsortable").sortable();$("#sortable").disableSelection();$(".accordionButton1").click(function(){$(".accordionButton1").removeClass("on");$(".accordionButton1").addClass("off");$(".accordionContent1").slideUp("fast");if($(this).next().is(":hidden")===true){$(this).addClass("on");$(this).removeClass("off");$(this).next().slideDown("fast")}});$(".accordionButton1").mouseover(function(){$(this).addClass("over")}).mouseout(function(){$(this).removeClass("over")})});var ww=document.body.clientWidth;$(document).ready(function(){$(".nav li a").each(function(){if($(this).next().length>0){$(this).addClass("parent")}});$(".toggleMenu").click(function(a){a.preventDefault();$(this).toggleClass("active");$(".nav").toggle()})});$(document).on("click","a.refreshurl",function(f){f.preventDefault();var b=$(this).attr("data-jagger-getmoreajaxonclick");var d=$(this).attr("data-jagger-response-msg");var c=$(this);if(d===undefined||d===null){console.log('attribute data-jagger-response-msg not found in element with data-jagger-getmoreajax="'+b+'" - exiting');return false}else{console.log('attribute data-jagger-response-msg="'+d+'" in element data-jagger-getmoreajax="'+b+'"')}var a=$("div#"+d);if(a===undefined||a===null||$(a).length===0){console.log('div with id="'+d+'" not found');return false}else{console.log('div with id="'+d+'" found')}$.ajax({dataType:"json",type:"GET",url:b,cache:true,success:function(h){if(!h){console.log("no json got from "+b);return false}var g=h.length;if(g<1){return false}var e=$("<div/>");$.each(h,function(k,j){e.append("<div>"+j.msg+"</div>")});a.empty().append(c).append(e).show()}})});$(window).bind("resize orientationchange",function(){ww=document.body.clientWidth;adjustMenu()});var adjustMenu=function(){if(ww<768){$("#filter-form").remove();$(".toggleMenu").css("display","inline-block");if(!$(".toggleMenu").hasClass("active")){$(".nav").hide()}else{$(".nav").show()}$(".nav li").unbind("mouseenter mouseleave");$(".nav li a.parent").unbind("click").bind("click",function(a){a.preventDefault();$(this).parent("li").toggleClass("hover")})}else{if(ww>=768){$(".toggleMenu").css("display","none");$(".nav").show();$(".nav li").removeClass("hover");$(".nav li a").unbind("click");$(".nav li").unbind("mouseenter mouseleave").bind("mouseenter mouseleave",function(){$(this).toggleClass("hover")})}}};$(function(){$("#details").tablesorter({sortList:[[0,0],[1,0]],widgets:["zebra"]});$(".userlist#details").tablesorter({sortList:[[3,1],[0,0]],widgets:["zebra"]});$("#options").tablesorter({sortList:[[0,0]],headers:{3:{sorter:false},4:{sorter:false}}});$("#formtabs").tabs({cache:false,activate:function(a,b){GINIT.initialize()}});$(".mytabs").tabs({cache:false,activate:function(a,b){GINIT.initialize()}});$("#fedtabs").tabs({cache:true,load:function(a,b){$(".accordionButton").unbind();GINIT.initialize()}});$("#arptabs").tabs({cache:true,load:function(a,b){$(".accordionButton").unbind();$(".tablesorter").unbind();GINIT.initialize()}});$("#logotabs").tabs({load:function(a,b){$("#availablelogos").unbind();$("#assignedlogos").unbind();$("#uploadlogo").unbind();$("table#details").unbind();GINIT.initialize()}})});if($("#usepredefined").attr("checked")){$("fieldset#stadefext").hide()}$("#usepredefined").click(function(){if($(this).is(":checked")){$("#usepredefined").not(this).removeAttr("checked");$("fieldset#stadefext").hide()}else{$("fieldset#stadefext").show();$("#usepredefined").not(this).addAttr("checked")}});$("#nattrreqbtn").click(function(g){g.preventDefault();var f="";var b="abcdefghijklmnopqrstuvwxyz0123456789";for(var d=0;d<5;d++){f+=b.charAt(Math.floor(Math.random()*b.length))}var c=$('select[name="nattrreq"]');var h=c.find(":selected").text();var e=c.find(":selected").val();var a="<fieldset><legend>"+h+'</legend><div class="small-12 columns"><div class="medium-3 columns medium-text-right"><select name="f[reqattr]['+f+'][status]"><option value="required">required</option><option value="desired">desired</option></select><input type="hidden" name="f[reqattr]['+f+'][attrname]" value="'+h+'"><input type="hidden" name="f[reqattr]['+f+'][attrid]" value="'+e+'"></div><div class="medium-6 collumns end"><textarea name="f[reqattr]['+f+'][reason]"></textarea></div></div></fieldset>';$(this).parent().parent().before(a);GINIT.initialize()});$(document).on("click","a.pCookieAccept",function(c){c.preventDefault();var b=$(this),a=b.attr("href");$.ajax({url:a,timeout:2500,cache:false});$("#cookiesinfo").hide();return false});$("[id='f[entityid]']").change(function(){if($(this).hasClass("alertonchange")){var a=$("div#entitychangealert").text();alert(a)}});$(document).ready(function(){var f=$("[name='baseurl']").val();if(f===undefined){f=""}var e=new Image(16,16);e.src=f+"images/spinner.gif";var d=new Image(220,19);d.src=f+"images/ajax-loader.gif";if($("#eds2").is("*")){$("#idpSelect").modal({Height:"500px",minHeight:"500px"})}$("button#vormversion").click(function(){$.ajax({cache:false,type:"GET",url:f+"smanage/reports/vormversion",success:function(g){$("#spinner").hide();$("#rvormversion").show();$("tr#rvormversion td:first-child").html(g)},beforeSend:function(){$("#spinner").show()},error:function(){$("#spinner").hide();alert("Error occurred")}});return false});$("button#vschema").click(function(){$.ajax({cache:false,type:"GET",url:f+"smanage/reports/vschema",success:function(g){$("#spinner").hide();$("#rvschema").show();$("tr#rvschema td:first-child").html(g)},beforeSend:function(){$("#spinner").show()},error:function(){$("#spinner").hide();alert("Error ocured")}});return false});$("button#vschemadb").click(function(){$.ajax({cache:false,type:"GET",url:f+"smanage/reports/vschemadb",success:function(g){$("#spinner").hide();$("#rvschemadb").show();$("tr#rvschemadb td:first-child").html(g)},beforeSend:function(){$("#spinner").show()},error:function(){$("#spinner").hide();alert("Error ocured")}});return false});$("button#vmigrate").click(function(){$.ajax({cache:false,type:"GET",url:f+"smanage/reports/vmigrate",success:function(g){$("#spinner").hide();$("#rvmigrate").show();$("tr#rvmigrate td:first-child").html(g)},beforeSend:function(){$("#spinner").show()},error:function(){$("#spinner").hide();alert("Error ocured")}});return false});$("#status form").submit(function(){$("#submit").hide();$("#ajax_loading").show();var h=new Date();var g=-h.getTimezoneOffset();var j=$(this).serializeArray();j.push({name:"browsertimeoffset",value:""+g+""});$.ajax({type:"POST",url:f+"authenticate/dologin",data:j,success:function(k){$("#status").ajaxComplete(function(o,n,m){$("#submit").show();$("#ajax_loading").hide();if(k==="OK"){var l='<div id="logged_in"><div style="width: 350px; float: left; margin-left: 70px;"><div style="width: 40px; float: left;"><img style="margin: 10px 0px 10px 0px;" align="absmiddle" src="'+f+'images/ajax-loader.gif"></div><div style="margin: 10px 0px 0px 10px; float: right; width: 300px;">You are successfully logged in! <br /> Please wait while you\'re redirected...</div></div>';$("a.modalCloseImg").hide();$("#simplemodal-container").css("width","auto").css("height","auto").css("background","transparent").css("box-shadow","none").css("text-align","center");$(this).html(l);setTimeout("go_to_private_page()",1000)}else{$("#login_response").html(k)}})},error:function(){$("#status").ajaxComplete(function(n,m,l){$("#submit").show();$("#ajax_loading").hide();var k="Invalid token, please refresh page and try again";$("#login_response").html(k).css("color","red").css("font-weight","bold")})}});return false});$("button#registernotification2").click(function(h){h.preventDefault();var g=$("form#notificationaddform");b("",function(k){var j=g.serializeArray();$.ajax({type:"POST",url:g.attr("action"),data:$("form#notificationaddform").serializeArray(),success:function(l){$(".message").html(l);if(l==="OK"){$(this).foundation("reveal","close");location.reload()}},error:function(l,n,m){alert("Error occured: "+m)}})})});$('button[name="fedstatus"]').click(function(o){var m=$(this).attr("value");var j=$(this).attr("title");if(j===undefined){j=""}var p=$("[name='csrfname']").val();var h=$("[name='csrfhash']").val();var l=$("[name='baseurl']").val();var n=$("span#fednameencoded").text();var g=l+"federations/manage/changestatus";var k=[{name:"status",value:m},{name:p,value:h},{name:"fedname",value:n}];a(""+j+"",function(q){$.ajax({type:"POST",url:g,data:k,success:function(r){if(r){if(r==="deactivated"){$('button[value="disablefed"]').hide();$('button[value="enablefed"]').show();$('button[value="delfed"]').show();$("td.fedstatusinactive").show();$("show.fedstatusinactive").show()}else{if(r==="activated"){$('button[value="disablefed"]').show();$('button[value="enablefed"]').hide();$('button[value="delfed"]').hide();$("td.fedstatusinactive").hide();$("span.fedstatusinactive").hide()}else{if(r==="todelete"){$('button[value="disablefed"]').hide();$('button[value="enablefed"]').hide();$('button[value="delfed"]').hide()}}}}},error:function(r){alert("Error  ocurred")}})})});$("#rmstatdef button").click(function(j){var g=$("form#rmstatdef").attr("action");var h=$("form#rmstatdef").serialize();a("",function(k){$.ajax({type:"POST",url:g,data:h,success:function(l){$("#resultdialog").modal({position:["20%",],overlayId:"simpledialog-overlay",containerId:"simpledialog-container",closeHTML:"<a href='#' title='Close' class='modal-close'>x</a>"})},error:function(l){alert("Error")}})});j.preventDefault()});$("#rmfedcategory").click(function(j){var g=$(this).attr("action");var h=$(this).serialize();a("",function(k){$("<input>").attr({type:"hidden",id:"formsubmit",name:"formsubmit",value:"remove"}).appendTo("form");$("form").submit()});j.preventDefault()});$("#rmfedvalidator").click(function(j){var g=$(this).attr("action");var h=$(this).serialize();a("",function(k){$("<input>").attr({type:"hidden",id:"formsubmit",name:"formsubmit",value:"remove"}).appendTo("form");$("form").submit()});j.preventDefault()});function b(g,h){$("#notificationaddmodal").foundation("reveal","open",{});$(document).on("opened","#notificationaddmodal",function(){var j=$(this);$("select#sfederation").parent().hide();$("select#sprovider").parent().hide();$("select#type").change(function(){$("select#sfederation").parent().hide();$("select#sprovider").parent().hide();var o=$(this).find("option:selected");var k=o.val();var l=o.text();var n=$("#sfederation");var m=$("#sprovider");n.find("option").remove();m.find("option").remove();if(k==="joinfedreq"||k==="fedmemberschanged"){$.ajax({type:"GET",url:f+"ajax/getfeds",cache:true,success:function(p){$.each(p,function(q,r){$("<option>").val(r.id).text(r.name).appendTo(n)});$("select#sfederation").parent().show()},error:function(p,r,q){$(".message").html(q)}})}else{if(k==="requeststoproviders"){$.ajax({type:"GET",url:f+"ajax/getproviders",cache:false,datatype:"json",success:function(p){var q=p;$.each(q,function(r,s){$("<option>").val(s.key).text(s.value).appendTo(m)});$("select#sprovider").parent().show()},error:function(p,r,q){$(".message").html(q)}})}}});$(".no").click(function(){$("#notificationaddmodal").foundation("reveal","close")});$(".yes").click(function(){if($.isFunction(h)){h.apply()}})})}function c(g,h){$("#notificationaddform").modal({closeHTML:"<a href='#' title='Close' class='modal-close'>x</a>",position:["20%",],overlayId:"simpledialog-overlay",minHeight:"400px",minWidth:"500px",containerId:"simpledialog-container",onOpen:function(j){j.overlay.fadeIn("fast",function(){j.container.slideDown("fast",function(){j.data.fadeIn("fast")})})},onShow:function(j){$("select#sfederation").parent().hide();$("select#sprovider").parent().hide();$("select#type").change(function(){$("select#sfederation").parent().hide();$("select#sprovider").parent().hide();var p=$(this).find("option:selected");var l=p.val();var m=p.text();var o=$("#sfederation");var n=$("#sprovider");o.find("option").remove();n.find("option").remove();if(l==="joinfedreq"||l==="fedmemberschanged"){$.ajax({type:"GET",url:f+"ajax/getfeds",cache:true,success:function(q){$.each(q,function(r,s){$("<option>").val(s.id).text(s.name).appendTo(o)});$("select#sfederation").parent().show()},error:function(q,s,r){$(".message").html(r)}})}else{if(l==="requeststoproviders"){$.ajax({type:"GET",url:f+"ajax/getproviders",cache:false,success:function(q){var r=$.parseJSON(q);$.each(r,function(s,t){$("<option>").val(t.key).text(t.value).appendTo(n)});$("select#sprovider").parent().show()},error:function(q,s,r){$(".message").html(r)}})}}});var k=this;$(".message",j.data[0]).append(g);$(".yes",j.data[0]).click(function(){if($.isFunction(h)){h.apply()}})}})}function a(g,h){$("#sconfirm").modal({closeHTML:"<a href='#' title='Close' class='modal-close'>x</a>",position:["20%",],minHeight:"300px",minWidth:"300px",overlayId:"simpledialog-overlay",containerId:"simpledialog-container",onShow:function(j){var k=this;$(".message",j.data[0]).append("<br />"+g);$(".yes",j.data[0]).click(function(){if($.isFunction(h)){h.apply()}k.close()})}})}});function go_to_private_page(){window.location.reload()}$("button#parsemetadataidp").click(function(){var p=$("textarea#metadatabody").val();var q;try{q=$.parseXML(p)}catch(e){alert(e);return false}var k=$(q);var o=null;var r=null;k.find("md\\:IDPSSODescriptor,IDPSSODescriptor").each(function(){if($(this).attr("protocolSupportEnumeration")){var t=$(this).parent();var s=$(this);return false}return true});if(o===null){alert("IDPSSODescriptor element not found");return false}$("#entityid").val(o.attr("entityID"));var m=null;o.find("md\\:OrganizationName,OrganizationName").each(function(){m=$(this);var s=m.attr("xml:lang");if(s==="en"){return false}});var l=null;o.find("md\\:OrganizationDisplayName,OrganizationDisplayName").each(function(){l=$(this);var s=l.attr("xml:lang");if(s==="en"){return false}});var c=null;o.find("md\\:OrganizationURL,OrganizationURL").each(function(){c=$(this);var s=c.attr("xml:lang");if(s==="en"){return false}});var a=null;o.find("md\\:ContactPerson,ContactPerson").each(function(){a=$(this);var s=a.attr("contactType");if(s==="administrative"){return false}});if(a!==null){var g="";a.find("md\\:GivenName,GivenName").each(function(){g=$(this).text()});a.find("md\\:SurName,SurName").each(function(){g=g+" "+$(this).text()});var f="";a.find("md\\:EmailAddress,EmailAddress").each(function(){f=$(this).text()});$("#contact_name").val(g);$("#contact_mail").val(f)}var d="";$idpssodescriptor.find("md\\:NameIDFormat,NameIDFormat").each(function(){d=d+" "+$(this).text()});var j="";$idpssodescriptor.find("shibmd\\:Scope,Scope").each(function(){if($(this).attr("regexp")&&$(this).attr("regexp")==="false"){if(j!==""){j=j+","+$(this).text()}else{j=$(this).text()}}});$("#idpssoscope").val($.trim(j));$idpssodescriptor.find("md\\:SingleSignOnService,SingleSignOnService").each(function(){var s=$(this).attr("Binding");var t=$(this).attr("Location");if(s==="urn:oasis:names:tc:SAML:2.0:bindings:HTTP-Redirect"){$("#sso\\[saml2httpredirect\\]").val($.trim(t))}else{if(s==="urn:oasis:names:tc:SAML:2.0:bindings:HTTP-POST"){$("#sso\\[saml2httppost\\]").val($.trim(t))}else{if(s==="urn:oasis:names:tc:SAML:2.0:bindings:HTTP-POST-SimpleSign"){$("#sso\\[saml2httppostsimplesign\\]").val($.trim(t))}else{$("#sso\\["+s+"\\]").val($.trim(t))}}}});var b=false;var n=false;var h;$idpssodescriptor.find("md\\:KeyDescriptor, KeyDescriptor").each(function(){if(!b||!n){if($(this).attr("use")==="signing"){if(!b){s=$(this).find("ds\\:X509Certificate,X509Certificate");$("#sign_cert_body").val($.trim(s.text()));b=true}}else{if($(this).attr("use")==="encryption"){if(!n){s=$(this).find("ds\\:X509Certificate,X509Certificate");$("#encrypt_cert_body").val($.trim(s.text()));n=true}}else{var s=$(this).find("ds\\:X509Certificate,X509Certificate");if(!n){$("#encrypt_cert_body").val($.trim(s.text()));n=true}if(!b){$("#sign_cert_body").val($.trim(s.text()));b=true}}}}else{return false}});if(m===null){$("#homeorg").val("")}else{$("#homeorg").val(m.text())}if(l===null){$("#deschomeorg").val("")}else{$("#deschomeorg").val(l.text())}if(c===null){$("#helpdeskurl").val("")}else{$("#helpdeskurl").val(c.text())}$("#nameids").val($.trim(d));alert("Success");GINIT.initialize()});$("button#parsemetadatasp").click(function(){$("div.spregacsopt").remove();var n=$("textarea#metadatabody").val();var o;try{o=$.parseXML(n)}catch(e){alert(e);return false}var g=$(o);var m=null;g.find("md\\:SPSSODescriptor,SPSSODescriptor").each(function(){if($(this).attr("protocolSupportEnumeration")){m=$(this).parent();return false}return true});if(m===null){alert("SPSSODescriptor not found");return false}$("div.optspregacs").remove();$("#entityid").val(m.attr("entityID"));var k=m.find("md\\:OrganizationName,OrganizationName").first();var j=m.find("md\\:OrganizationDisplayName,OrganizationDisplayName").first();var c=m.find("md\\:OrganizationURL,OrganizationURL").first();$("#resource").val(k.text());$("#descresource").val(j.text());$("#helpdeskurl").val(c.text());var d="";var f="abcdefghijklmnopqrstuvwxyz0123456789";var a=false;m.find("md\\:AssertionConsumerService,AssertionConsumerService").each(function(){d="";for(var p=0;p<5;p++){d+=f.charAt(Math.floor(Math.random()*f.length))}if(a!=true){$("#acs_url\\[0\\]").val($(this).attr("Location"));$("#acs_order\\[0\\]").val($(this).attr("index"));$("#acs_bind\\[0\\]").val($(this).attr("Binding"));a=true}else{var q=$("div.spregacs").first().clone().removeAttr("class").addClass("spregacsopt");$("#acs_url\\[0\\]",q).removeAttr("name").attr("name","acs_url["+d+"]").attr("id","acs_url["+d+"]").val($(this).attr("Location"));$("#acs_order\\[0\\]",q).removeAttr("name").attr("name","acs_order["+d+"]").attr("id","acs_order["+d+"]").val($(this).attr("index"));var r=$("#acs_bind\\[0\\]",q).removeAttr("name").attr("name","acs_bind["+d+"]").attr("id","acs_bind["+d+"]");$("option",r).removeAttr("selected").filter('[value="'+$(this).attr("Binding")+'"]').attr("selected",true);$("div.spregacs").after(q)}});var h="";m.find("md\\:NameIDFormat, NameIDFormat").each(function(){h=h+" "+$(this).text()});$("#nameids").val(h);var b=false;var l=false;m.find("md\\:KeyDescriptor, KeyDescriptor").each(function(){if(!b||!l){if($(this).attr("use")==="signing"){if(!b){var p=$(this).find("ds\\:X509Certificate,X509Certificate");$("#sign_cert_body").val(p.text());b=true}}else{if($(this).attr("use")==="encryption"){if(!l){var p=$(this).find("ds\\:X509Certificate,X509Certificate");$("#encrypt_cert_body").val(p.text());l=true}}else{var p=$(this).find("ds\\:X509Certificate,X509Certificate");if(!l){$("#encrypt_cert_body").val(p.text());l=true}if(!b){$("#sign_cert_body").val(p.text());b=true}}}}else{return false}});alert("Success");GINIT.initialize()});var current_fs,next_fs,previous_fs;var left,opacity,scale;var animating;var addheight=$("#progressbar").height()+30;var fieldsetheight=$("#multistepform fieldset").height()+addheight;$("form#multistepform").css({height:fieldsetheight});$(".next").click(function(){var a=true;$(this).parent().find("input.required").each(function(){if(!$.trim($(this).val())){alert("Missing input");a=false;return false}});if(!a){return false}if(animating){return false}animating=true;current_fs=$(this).parent();next_fs=$(this).parent().next();fieldsetheight=next_fs.height()+addheight;$("form#multistepform").css({height:fieldsetheight});$("#progressbar li").eq($("#multistepform fieldset").index(next_fs)).addClass("active");next_fs.show();current_fs.animate({opacity:0},{step:function(b,c){scale=1-(1-b)*0.2;left=(b*50)+"%";opacity=1-b;current_fs.css({transform:"scale("+scale+")"});next_fs.css({left:left,opacity:opacity})},duration:200,complete:function(){current_fs.hide();animating=false}})});$(".previous").click(function(){if(animating){return false}animating=true;current_fs=$(this).parent();previous_fs=$(this).parent().prev();fieldsetheight=previous_fs.height()+addheight;$("form#multistepform").css({height:fieldsetheight});$("#progressbar li").eq($("#multistepform fieldset").index(current_fs)).removeClass("active");previous_fs.show();current_fs.animate({opacity:0},{step:function(a,b){scale=0.8+(1-a)*0.2;left=((1-a)*50)+"%";opacity=1-a;current_fs.css({left:left});previous_fs.css({transform:"scale("+scale+")",opacity:opacity})},duration:200,complete:function(){current_fs.hide();animating=false}})});$(".submit").click(function(){return false});$("#joinfed select#fedid").on("change",function(){$("div.validaronotice").hide();$("ul.validatorbuttons").replaceWith('<ul class="button-group validatorbuttons"></ul>');var f=$("[name='csrfname']").val();var c=$("[name='csrfhash']").val();if(f===undefined){f=""}if(c===undefined){c=""}var a=$(this).find("option:selected").val();var d=$(this).find("option:selected").text();var e=$("div#retrfvalidatorjson").text();var b={};b[f]=c;b.fedid=a;if(a!=0){$.ajax({type:"POST",url:e,timeout:2500,cache:true,data:b,success:function(g){$("#spinner").hide();var h=$.parseJSON(g);if(h){$.each(h,function(k,j){$("ul.validatorbuttons").append('<li><button  value="'+e+"/"+j.fedid+"/"+j.id+'" class="small button">'+j.name+"</button></li>")});$("div.validaronotice").show()}},beforeSend:function(){$("#spinner").show()},error:function(){$("#spinner").hide();$("#fvform").hide();$("#fvresult").hide()}}).done(function(){BINIT.initFvalidators()})}});$("#showhelps").click(function(b){b.preventDefault();var a=$(this).attr("href");var c="n";if($("#showhelps").hasClass("helpactive")){c="n"}else{c="y"}$.ajax({type:"GET",url:a+"/"+c,success:function(){$("#showhelps").toggleClass("helpinactive").toggleClass("helpactive");$(".dhelp").toggle();$("img.iconhelpshow").toggle();$("img.iconhelpcross").toggle()}})});$("div.section").parent().addClass("section");$("form#notificationupdateform").submit(function(h){h.preventDefault();var c=$(this).serializeArray();var a=$(this).attr("action");var b=$("input[name=noteid]").val();var g=$('button[type="button"][value="'+b+'"]');var d=$(g).closest("tr");var f=d.find("div.subscrstatus:first");$.ajax({type:"POST",url:a,data:c,success:function(e){if(e){var j=false;$.each(e,function(l,k){if(k.id===b){j=true;f.text(k.langstatus)}});if(!j){d.hide()}}else{}$("#notificationupdatemodal").foundation("reveal","close")},error:function(e,k,j){alert("Error occured: "+j)}})});$(document).on("submit","div#loginform form",function(h){h.preventDefault;var b=$("#loginform");var c=$(b).find(":submit").first();var g=$(b).find("div.secondfactorrow").first();var f=$("div#loginform form").attr("action");var j=$(this).serializeArray();var d=new Date();var a=-d.getTimezoneOffset();j.push({name:"browsertimeoffset",value:""+a+""});$.ajax({type:"POST",cache:false,timeout:3500,url:f,data:j,beforeSend:function(){$("#loginresponse").html("").hide()},success:function(e){if(e){if(e.success===true&&e.result==="OK"){$("#loginform").foundation("reveal","close");setTimeout("go_to_private_page()",1000)}else{if(e.result==="secondfactor"){$("#password").val("");g.empty();g.append(e.html).show();c.prop("disabled",true)}}}else{$("#loginresponse").html(e).show()}},error:function(e,l,k){$("#loginresponse").html(e.responseText).show()}});return false});$("button.advancedmode").click(function(){var b=$("textarea#metadatabody").val();if(b.length===0){alert("You did not inserted any metadata. You will have to fill in all the individual information manually.")}var c=$(this);var d=c.val();var e=$("[name='csrfname']").val();var a=$("[name='csrfhash']").val();$(this).closest("form").attr("action",d)});$("a.afilter").click(function(){var a=$(this).attr("href");$("a.initiated").removeClass("initiatied");var b;if($(this).hasClass("filterext")){b=1}else{if($(this).hasClass("filterlocal")){b=2}else{b=0}}$.ajax({type:"GET",url:a,timeout:9500,cache:true,dataType:"json",success:function(r){$("#spinner").hide();if(b===1){$("dd.filterext").addClass("active")}else{if(b===2){$("dd.filterlocal").addClass("active")}else{$("dd.filterall").addClass("active")}}var t=r;if(t){var q=$("<table/>");q.attr("id","details");q.addClass("filterlist");var l=$("<thead/>");q.append(l);var f=$("<tr/>");l.append(f);var s=new Array();var p=t.columns;var o;var d=0;$.each(p,function(x,w){o=w.status;if(o){var u=new Array();$.each(w.cols,function(v,y){u.push(y)});s.push(u);f.append("<th>"+w.colname+"</th>")}});var h=$("<tbody/>");q.append(h);var g=t.data;var e=new Date();var m=[];var n=0;$.each(g,function(v,u){if((u.plocal===1&&(b===2||b===0))||(u.plocal===0&&b<2)){m[n++]="<tr>";$.each(s,function(x,y){var w="";$.each(y,function(A,z){if(u[z]!==null){if(z==="pname"){w=w+'<a href="'+t.baseurl+"providers/detail/show/"+u.pid+'">'+u[z]+"</a><br />"}else{if(z==="phelpurl"){w=w+'<a href="'+u.phelpurl+'">'+u.phelpurl+"</a>"}else{if(z==="plocked"||z==="pactive"||z==="plocal"||z==="pstatic"||z==="pvisible"||z==="pavailable"){if(t.statedefs[z][u[z]]!=undefined){w=w+' <span class="lbl lbl-'+z+"-"+u[z]+'">'+t.statedefs[z][u[z]]+"</span>"}}else{w=w+"  "+u[z]}}}}});m[n++]="<td>"+w+"</td>"});d++;m[n++]="</tr>"}});h.append(m.join(""));var k=new Date();var c=k-e;console.log("Providerlist table gen time: "+c);var j=$("div.subtitleprefix").text();$("div.subtitle").empty().append(j+": "+d);$("div#providerslistresult").append(q);if(d>1){q.tablesorter({sortList:[[0,0]]});$("#filter").keyup(function(){$.uiTableFilter(q,this.value)});$("#filter-form").submit(function(){q.find("tbody > tr:visible > td:eq(1)").mousedown();return false}).focus()}}},beforeSend:function(){$("dd.afilter").removeClass("active");$("div#providerslistresult").empty();$("div.alert-box").empty().hide();$("#spinner").show()},error:function(e,c,d){$("#spinner").hide();$("div.subtitle").empty();$("div.alert-box").append(d).show()}});return false});$("a.initiated").trigger("click");$('button[name="mrolebtn"]').click(function(b){var a=$(this).attr("value");$.ajax({type:"GET",url:a,timeout:2500,cache:false,dataType:"json",success:function(c){var d=new Array();$.each(c,function(f,e){d.push(e)});$("input[name='checkrole[]']").each(function(){var e=$(this).attr("value");var f=$(this).attr("checked");if($.inArray(e,d)===-1){$(this).prop("checked",false)}else{$(this).prop("checked",true)}})}})});$('button[name="updaterole"]').click(function(c){c.preventDefault();var b=$(this).parents("form:first");var a=b.attr("action");$.ajax({type:"POST",url:a,cache:false,data:b.serializeArray(),dataType:"json",success:function(d){$("#mroles").foundation("reveal","close");if(d){var e="";$.each(d,function(g,f){e=e+f+","});$("span#currentroles").empty().append(e.substring(0,e.length-1))}}})});$('button[name="update2f"]').click(function(d){d.preventDefault();var c=$(this).parents("form:first");var a=c.find("div.alert-box");var b=c.attr("action");$.ajax({type:"POST",url:b,cache:false,data:c.serializeArray(),dataType:"json",success:function(e){a.hide();if(e){var f="";$.each(e,function(h,g){f=f+g+","});$("span#val2f").empty().append(f.substring(0,f.length-1))}$("#m2f").foundation("reveal","close")},error:function(e,g,f){a.html(f).show()}})});var checkRegpol;$('input[type="radio"].withuncheck').hover(function(){checkRegpol=$(this).is(":checked")});$('input[type="radio"].withuncheck').click(function(){checkRegpol=!checkRegpol;$(this).attr("checked",checkRegpol)});$(document).on("click","#resetloginform",function(a){a.preventDefault();var b=$("[name='baseurl']").val();$.ajax({type:"GET",url:b+"authenticate/resetloginform",cache:false,success:function(c){$(".secondfactorrow").empty();$("#loginform").foundation("reveal","close");return false}})});$(document).on("submit","#duo_form",function(b){b.preventDefault();var a=$(this).attr("action");$.ajax({type:"POST",url:a,cache:false,data:$(this).serializeArray(),beforeSend:function(){$("#loginresponse").html("").hide()},success:function(c){if(c){if(c.success===true&&c.result==="OK"){$("#loginform").foundation("reveal","close");setTimeout("go_to_private_page()",1000)}else{if(c.result==="secondfactor"){secondfactorrow.append(c.html).show()}}}else{$("#loginresponse").html(c).show()}},error:function(c,e,d){$("#loginresponse").html(c.responseText).show()}})});$(document).ready(function(){var a=$("a.autoclick");if(a!==undefined){a.click()}});$("#updateprefsmodal").on("submit",function(d){d.preventDefault();var c=$(this).attr("data-jagger-link");var a=$(this).find("div.alert").first();var b=$(this).find("form").first();$.ajax({url:c,type:"POST",cache:false,data:b.serializeArray(),success:function(j){if(j){if(j.result==="OK"){var g=$(document).find('[data-jagger-record="'+j.confname+'"]').first();var h=g.closest("tr");var f=j.type;if(f==="text"){h.find('span[data-jagger-name="vtext"]').first().html(j.vtext)}var e=h.find('span[data-jagger-name="status"]').first();if(j.status){e.removeClass("alert").html(j.statusstring)}else{e.addClass("alert").html(j.statusstring)}$(document).foundation("reveal","close")}else{if(j.error){a.html(j.error).show()}}}else{a.html("No data").show()}},error:function(e,g,f){a.html(f).show()}})});$(document).on("click","a.updateprefs",function(f){f.preventDefault();var k=$("#updateprefsmodal");var g=$(this).attr("href");if(k===undefined||g===undefined){return false}var c=k.find('span[data-jagger-name="displayname"]').first();var j=k.find('input[name="confname"]').first();var h=k.find('div[data-jagger-name="desc"]').first();var b=k.find('input[name="status"]').first();var d=k.find('textarea[data-jagger-name="vtext"]').first();var a=k.find("div.alert").first();a.html("").hide();if(d===null){alert("d")}$.ajax({url:g,type:"GET",cache:false,success:function(l){if(l){c.html('"'+l.displayname+'"');j.val(l.confname);h.html("<b>"+l.displayname+":</b> "+l.desc);var e=l.type;if(e==="text"){d.val(l.vtext);d.closest("div.row").show()}else{d.closest("div.row").hide()}if(l.status===true){b.prop("checked",true)}else{b.prop("checked",false)}}}});k.foundation("reveal","open");return false});