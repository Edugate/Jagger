jQuery.fn.toggleOption=function(a){jQuery(this).toggle(a);if(a){while(jQuery(this).parent("span.toggleOption").length){jQuery(this).unwrap()}}else{jQuery(this).wrap('<span class="toggleOption" style="display: none;" />')}};var createRowWithLangRm=function(d,c,a,b){console.log("createRowWithLangRm fired");return $('<div class="large-12 small-12 columns"><div class="small-3 columns"><label for="'+a+'" class="right inline">'+c+'</label></div><div class="small-6 large-7 columns"><input id="'+a+'" name="'+a+'" type="text" class="validurl"/></div><div class="small-3 large-2 columns"> <button type="button" class="btn langinputrm button inline tiny left alert" name="langrm" value="'+d+'">'+b+"</button></div></div>")};var BINIT={initFvalidators:function(){console.log("BININT");$("ul.validatorbuttons button").on("click",function(b){var a=$(this).attr("value");$.ajax({type:"GET",url:a,timeout:2500,cache:true,success:function(e){$("#spinner").hide();var f=$.parseJSON(e);if(f){var c=f.fedid;var h=f.id;var d=f.name;var g=f.desc;$('#fvform input[name="fedid"]').val(c);$('#fvform input[name="fvid"]').val(h);$("div#fvalidesc").replaceWith('<div id="fvalidesc"><b>'+d+"</b><p>"+g+"</p></div>");$("#fvform").show()}},beforeSend:function(){$("#fvresult").hide();$("#spinner").show()},error:function(){$("#spinner").hide();$("#fvform").hide();$("#fvresult").hide()}})})}};var GINIT={initialize:function(){var a=$("#membership2").first();if(a!==undefined&&a.length>0){var c=$(a).attr("data-jagger-link");var d=["idp","sp","both"];var b;$.ajax({url:c,type:"GET",cache:"false",dataType:"json",success:function(l){if(l){var n=l.definitions.preurl;var g=[],m=-1;var k,f;g[++m]="<table><tbody>";for(var h=0,j=d.length;h<j;h++){b=d[h];if(l[b]){g[++m]='<tr><td colspan="2" class="highlight">'+l.definitions[b]+"</td></tr>";g[++m]='<tr><td colspan="2"><div class="zebramembers">';k=0;$.each(l[b],function(p,o){++k;if(k%2){g[++m]='<div class="small-12 column odd">'}else{g[++m]='<div class="small-12 column even">'}g[++m]='<div class="large-5 column">'+k+'. <a href="'+n+o.pid+'">'+o.pname+"</a></div>";g[++m]='<div class="large-5 column">'+o.entityid+"</div>";g[++m]='<div class="large-2 column"></div>';g[++m]="</div>"});g[++m]="</div></td></tr>"}}g[++m]="</tbody></table>";$(a).html(g.join(""))}}})}$("div[data-jagger-getmoreajax]").each(function(k){var g=$(this).attr("data-jagger-getmoreajax");var j=$(this).attr("data-jagger-response-msg");var h=$(this).attr("data-jagger-refreshurl");var i="";if(j===undefined||j===null){console.log('attribute data-jagger-response-msg not found in element with data-jagger-getmoreajax="'+g+'" - exiting');return false}else{console.log('attribute data-jagger-response-msg="'+j+'" in element data-jagger-getmoreajax="'+g+'"')}var f=$("div#"+j);if(f===undefined||f===null||$(f).length===0){console.log('div with id="'+j+'" not found');return false}else{console.log('div with id="'+j+'" found')}$.ajax({dataType:"json",type:"GET",url:g,cache:true,success:function(o){if(!o){console.log("no json got from "+g);return false}var m=o.length;if(m<1){return false}var l=$("<div/>");var n;$.each(o,function(q,p){n="<div>"+p.msg+"</div>";l.append(n)});if(h!==null){i='<a class="refreshurl right" href="#"  data-jagger-getmoreajaxonclick= "'+h+'" data-jagger-response-msg="prdetails"><i class="fi-refresh" ></i></a>'}f.empty().append(i).append(l).show()}})});$("#password").on("keypress",function(h){var g=h.keyCode?h.keyCode:h.which;var f=h.shiftKey?h.shiftKey:(g===16);if(((g>=65&&g<=90)&&!f)||((g>=97&&g<=122)&&f)){$("#capswarn").show()}else{$("#capswarn").hide()}});$("table.sortable").tablesorter();var e=$("[name='baseurl']").val();if(e===undefined){e=""}$("#loginbtn").on("click",function(l){l.preventDefault();var i=$(this).attr("href");var h=$("#loginform");var k=$(h).find(":submit").first();var g=$(h).find("div.usernamerow").first();var j=$(h).find("div.passwordrow").first();var m=$(h).find("div.secondfactorrow").first();var f=$("#loginresponse");$.ajax({type:"GET",url:i,dataType:"json",cache:false,success:function(n){if(n.logged!==1){if(n.partiallogged===0){k.prop("disabled",false);g.show();j.show();f.hide();h.foundation("reveal","open");return false}if(n.twofactor===1&&n.secondfactor!==null){k.prop("disabled",true);g.show();$("#password").val(null);j.show();f.hide();if(n.html){m.html(n.html).show()}h.foundation("reveal","open");return false}}else{var o=$("[name='baseurl']").val();if(o!==undefined){window.location.href=o}}g.show();j.show();f.hide();h.foundation("reveal","open")}});return false});$("button.modal-close").on("click",function(f){$(this).foundation("reveal","close")});$("#providerlogtab").on("toggled",function(h,f){var i=f.find("[data-reveal-ajax-tab]").first();var g=i.attr("data-reveal-ajax-tab");if(g!==undefined){$.ajax({cache:true,type:"GET",url:g,success:function(j){$("#providerlogtab").empty().append(j);$(document).foundation("accordion","reflow")}})}});$("button.cleartarget").on("click",function(h){h.preventDefault();var g=$(this).attr("data-jagger-textarea");var f=$(this).attr("data-jagger-input");if(g!==undefined){$("textarea[name='"+g+"']").val("")}if(f!==undefined){$("input[name='"+f+"']").val("")}return false});$("button.postajax").on("click",function(j){j.preventDefault();var h=$(this).closest("form");var i=$(this).attr("data-jagger-response-msg");var g=$("div#"+i);var f=h.attr("action");$.ajax({type:"POST",url:f,data:h.serializeArray(),beforeSend:function(){g.empty()},success:function(k){if(k){g.append(k)}else{g.append("no result")}},error:function(n,k,l){var m="<div>"+l+"</div>";g.append(m);return false}});return false});$("#confirmremover").on("click","div.yes",function(j){j.preventDefault();var i=$(this).closest("form");var h=i.attr("action");var f=i.attr("data-jagger-regpolicy");var g=i.attr("data-jagger-ec");$.ajax({type:"POST",url:h,data:i.serializeArray(),success:function(k){if(f!==undefined&&f!==null){$('a[data-jagger-regpolicy="'+f+'"]').closest("tr").hide()}else{$('a[data-jagger-ec="'+g+'"]').closest("tr").hide()}$("#confirmremover").foundation("reveal","close")},error:function(n,k,l){var m=""+l+"";window.alert(m);return false}})});$("a.withconfirm").on("click",function(k){k.preventDefault();var g=$(this).attr("href");var f=$(this).attr("data-jagger-regpolicy");var h=$(this).attr("data-jagger-ec");if(g===undefined){return false}var j=$("#confirmremover");var i=j.find("form").first();i.attr("action",g);if(h!==undefined&&h!==null){i.attr("data-jagger-ec",h)}else{i.attr("data-jagger-regpolicy",f)}j.foundation("reveal","open")});$(".dhelp").click(function(){var f=parseInt($(this).css("font-size"));if(f<=10){$(this).css("font-size",f+5).removeClass("zoomin").addClass("zoomout")}else{$(this).css("font-size",f-5).removeClass("zoomout").addClass("zoomin")}});$("form#availablelogos input[name='filename']").click(function(){$(this).after($("form#availablelogos div.buttons").show())});$("button.reqattrrm").click(function(){var f=$(this).closest("fieldset");f.remove()});$("form#availablelogos").on("submit",function(h){h.preventDefault();var f=$("div.uploadresult");var g=$("div.assignedlogosgrid").text();$("#uploadlogo").unbind();$.ajax({type:"POST",url:$(this).attr("action"),data:$("form#availablelogos").serializeArray(),dataType:"html",cache:false,beforeSend:function(){$("form#availablelogos div.buttons").hide().appendTo("form#availablelogos")},success:function(i){$("form#availablelogos #filename").prop("checked",false);$.ajax({type:"GET",url:g,cache:false,success:function(j){$("#uploadlogo").unbind();$("div#t1").empty().append(j);$("#assignedlogos").unbind();$("#availablelogos").unbind();GINIT.initialize()}});$("#spinner").hide();f.html(i).append('<p><input type="button" value="Close" class="simplemodal-close" /></p>').modal({closeHTML:"<a href='#' title='Close' class='modal-close'>x</a>",position:["20%",],overlayId:"simpledialog-overlay",minHeight:"200px",containerId:"simpledialog-container",onShow:function(j){var k=this}})},error:function(i,k,j){$("#spinner").hide();f.css("color","red");f.html(i.responseText).append('<p><input type="button" value="Close" class="simplemodal-close" /></p>').modal({closeHTML:"<a href='#' title='Close' class='modal-close'>x</a>",position:["20%",],overlayId:"simpledialog-overlay",minHeight:"200px",containerId:"simpledialog-container",onShow:function(l){var m=this}})}})});$("#uploadlogo").on("submit",(function(j){j.preventDefault();var i=new FormData(document.forms.namedItem("uploadlogo"));var f=$("div.uploadresult");var g=$("div.availablelogosgrid").text();var h=$("div.assignedlogosgrid").text();$.ajax({type:"POST",url:$(this).attr("action"),data:i,dataType:"html",cache:false,processData:false,contentType:false,beforeSend:function(){f.html("");f.css("color","black");$("form#availablelogos div.buttons").hide().appendTo("form#availablelogos");$("#spinner").show()},success:function(k){$("#spinner").hide();f.html(k);$("div.uploadresult").append('<p><input type="button" value="Close" class="simplemodal-close" /></p>').modal({closeHTML:"<a href='#' title='Close' class='modal-close'>x</a>",position:["20%",],overlayId:"simpledialog-overlay",minHeight:"200px",containerId:"simpledialog-container",onShow:function(l){var m=this}});$.ajax({type:"GET",url:h,cache:false,success:function(l){$("form#assignedlogos").replaceWith(l);$("#availablelogos").unbind();$("form#assignedlogos").unbind();$("#uploadlogo").unbind();$("table#details").unbind();$("form#availablelogos input[name='filename']").unbind("click");GINIT.initialize()},error:function(l,n,m){$("#spinner").hide();$("#availablelogos").unbind();$("#assignedlogos").unbind();$("#uploadlogo").unbind();$("table#details").unbind();$("form#availablelogos input[name='filename']").unbind("click");GINIT.initialize()}});$.ajax({type:"GET",url:g,cache:false,success:function(l){$("form#availablelogos").replaceWith(l);$("form#availablelogos").unbind();$("form#assignedlogos").unbind();$("#uploadlogo").unbind();$("table#details").unbind();$("form#availablelogos input[name='filename']").unbind("click");GINIT.initialize()},error:function(l,n,m){$("#spinner").hide();$("#availablelogos").unbind();$("#uploadlogo").unbind();$("table#details").unbind();$("form#availablelogos input[name='filename']").unbind("click");f.html(l.responseText).append('<p><input type="button" value="Close" class="simplemodal-close" /></p>').modal({closeHTML:"<a href='#' title='Close' class='modal-close'>x</a>",position:["20%",],overlayId:"simpledialog-overlay",minHeight:"200px",containerId:"simpledialog-container",onShow:function(o){var p=this}});GINIT.initialize()}})},error:function(k,m,l){$("#spinner").hide();f.html(k.responseText).append('<p><input type="button" value="Close" class="simplemodal-close" /></p>').modal({closeHTML:"<a href='#' title='Close' class='modal-close'>x</a>",position:["20%",],overlayId:"simpledialog-overlay",minHeight:"200px",containerId:"simpledialog-container",onShow:function(n){var o=this}});f.css("color","red")}}).done(function(){})}));$("li.fromprevtoright").each(function(){var j=$(this).prev();var g=j.offset().left;var i=$(this).prev().find("input,textarea").last();var k=i.offset().left;var f=i.width();var h=(k+f)-g;$(this).css("text-align","right").width(h)});$("form#assignedlogos input[name='logoid']").click(function(){$(this).after($("div#unsignlogosbtn").show())});$("form#applyforaccount").on("submit",function(h){h.preventDefault();var f=$("div.result");var g=$("form#applyforaccount").serializeArray();$.ajax({type:"POST",url:$(this).attr("action"),data:g,dataType:"html",cache:false,beforeSend:function(){f.html("");$("#spinner").show()},success:function(i){$("#spinner").hide();f.html(i);$("form#applyforaccount").remove()},error:function(i,k,j){$("#spinner").hide();f.html(i.responseText);f.css("color","red");$("form#applyforaccount").remove()}})});$("form#assignedlogos").on("submit",(function(j){j.preventDefault();var f=$("div.uploadresult");var h=$("form#assignedlogos").serializeArray();var i=$("input[name=logoid]:radio:checked");var k=$("#messagereveal");var g=k.find("p.infomsg");$.ajax({type:"POST",url:$(this).attr("action"),data:h,dataType:"html",cache:false,beforeSend:function(){$("div#unsignlogosbtn").hide().appendTo("form#assignedlogos");f.html("");$("#spinner").show()},success:function(l){$("#spinner").hide();g.html(l);k.foundation("reveal","open");i.parent().remove()},error:function(l,n,m){$("#spinner").hide();g.html(l.responseText);k.foundation("reveal","open")}})}));$("button.updatenotifactionstatus").click(function(m){var h=$("#notificationupdateform");var l;var g=$(this).attr("value");var k=$(this).closest("tbody");var i=$(this).closest("tr");var j=i.find("div.subscrstatus:first");var f=e+"notifications/subscriber/updatestatus/"+g;h.attr("action",f);h.find("#noteid").first().val(g)});$("a.showmetadata").click(function(){var f=$("div.metadataresult");var g=$(this).attr("href");$.ajax({type:"GET",url:g,dataType:"xml",cache:true,timeout:10000,success:function(i){$("#spinner").hide();var h=i.xml?i.xml:(new XMLSerializer()).serializeToString(i);f.text(h).append('<p><input type="button" value="Close" class="simplemodal-close" /></p>').modal({containerCss:{padding:5,width:800},maxHeight:800,closeHTML:"<a href='#' title='Close' class='modal-close'>x</a>",position:["10%"],overlayId:"simpledialog-overlay",minHeight:"500",minWidth:"500",containerId:"simpledialog-container",onShow:function(j){var k=this}})},beforeSend:function(){f.text("");$("#spinner").show()},error:function(h,j,i){$("#spinner").hide();window.alert(h.responseText)}});return false});$("#fvform").submit(function(h){h.preventDefault();var j=$(this);var i=j.serializeArray();var g=j.attr("action");var f=j.find("button:focus").attr("id");$.ajax({type:"POST",url:g,cache:false,data:i,timeout:120000,success:function(k){$("#spinner").hide();var m=$.parseJSON(k);if(!m){alert("no data received from upstream server")}else{if(m.returncode){$("span#fvreturncode").append(m.returncode);$("div#fvresult").show()}if(m.returncode==="success"){j.find("button:focus").css("background-color","#00aa00");j.find("button:focus").data("passed","true");j.find("button:focus").attr("disabled","true")}else{if(m.returncode==="error"){j.find("button:focus").css("background-color","#aa0000");j.find("button:focus").data("passed","false")}}if(m.message){var l;$.each(m.message,function(o,n){$.each(n,function(q,p){l="<div>"+o+": "+p+"</div>";$("div#fvmessages").append(l)})})}}},beforeSend:function(){$("span#fvreturncode").text("");$("div#fvmessages").text("");$("#spinner").show()},error:function(l,n,k){$("#spinner").hide();if(n==="timeout"){window.alert("got timeout from validation server")}else{window.alert("unknown problem with receiving data")}}})});$("form#approvequeue").submit(function(h){var f=0;var g=0;$("button[name='mandatory']").each(function(j){if($(this).data("passed")==="true"){f+=1}g+=1});if(g!==f){window.alert("All mandatory validations have to pass successfully!");h.preventDefault()}});$(document).on("click",".fmembers","a",function(){var g=$(this),f=g.attr("href");var i=$(this).parent().parent();if($(i).hasClass("opened")===true){$(i).next().remove();$(i).removeClass("opened").removeClass("highlight")}else{var h=$("<ul/>");$.ajax({url:f,timeout:9500,cache:true,success:function(m){$("#spinner").hide();var k;var l;var j;$(i).addClass("opened").addClass("highlight");if(!m){window.alert("no data")}else{if(!m.idp&&!m.sp&&!m.both){j="<div>"+m.definitions.nomembers+"</div>";h.append(j)}else{var n=m.definitions.preurl;if(m.idp){k=$("<div>"+m.definitions.idps+"</div>");l=$("<ol/>");$.each(m.idp,function(p,o){j='<li class="homeorg"><a href="'+n+o.pid+'">'+o.pname+"</a> ("+o.entityid+") </li>";l.append(j)});k.append(l);h.append(k)}if(m.sp){k=$("<div>"+m.definitions.sps+"</div>");l=$("<ol/>");$.each(m.sp,function(p,o){j='<li class="resource"><a href="'+n+o.pid+'">'+o.pname+"</a> ("+o.entityid+") </li>";l.append(j)});k.append(l);h.append(k)}if(m.both){k=$("<div>"+m.definitions.both+"</div>");l=$("<ol/>");$.each(m.both,function(p,o){j='<li class="both"><a href="'+n+o.pid+'">'+o.pname+"</a> ("+o.entityid+") </li>";l.append(j)});k.append(l);h.append(k)}}}},beforeSend:function(){$("#spinner").show()},error:function(){$("#spinner").hide();window.alert("problem with loading data")}}).done(function(){var j='<tr class="feddetails"><td colspan="7"><ul class="feddetails">'+h.html()+"</ul></td></tr>";$(j).insertAfter(i)})}return false});$("a#getmembers").click(function(){var g=$(this),f=g.attr("href");var h=$("<ul/>");$.ajax({url:f,timeout:22500,cache:true,success:function(j){$("#spinner").hide();var m=$.parseJSON(j);if(!m){window.alert("no data")}else{var l=$("<div/>");l.addClass("zebralist row");l.css("list-style-type","decimal");var k;var o=1;var i=1;$.each(m,function(q,p){var n=$("<span/>");$.each(p.feds,function(r,s){var t='<span class="label">'+s+"</span>&nbsp;";n.append(t)});k='<div class="large-12 columns" style="margin-top: 2px; margin-bottom: 2px"><div class="large-9 columns">'+i+'. <a href="'+p.url+'">'+p.name+"</a> <i> ("+p.entityid+') </i></div><div class="fedlbl large-3 end text-right columns">'+n.html()+"</div></div>";l.append(k);o=o+1;i=i+1});h.append(l)}},beforeSend:function(){$("#spinner").show()},error:function(){$("#spinner").hide();window.alert("problem with loading data")}}).done(function(){var i=h.html();$("div#membership").replaceWith(i)});return false});$(".accordionButton").addClass("off");$(".accordionButton").mouseover(function(){$(this).addClass("over")}).mouseout(function(){$(this).removeClass("over")});$(".accordionButton").click(function(){$(".accordionButton").removeClass("on");$(".accordionButton").addClass("off");$(".accordionContent").slideUp("fast");if($(this).next().is(":hidden")===true){$(this).addClass("on");$(this).removeClass("off");$(this).next().slideDown("fast")}});$(".accordionContent").hide()}};$(document).ready(function(){GINIT.initialize();var g=$("#providereditform");if(g.length){var o;g.find("div.group").each(function(){var v=$(this).find("select").first();$(this).find("button.langinputrm").each(function(){o=$(this).attr("value");v.find("option[value="+o+"]").each(function(){$(this).toggleOption(true);$(this).attr("disabled",true)})})});$("button#idpssoadddomainhint").click(function(){var x="";var v="0123456789";for(var w=0;w<5;w++){x+=v.charAt(Math.floor(Math.random()*v.length))}var B=$("button#helperbutttonrm").html();var y=$(this).attr("value");var z="f[uii][idpsso][domainhint][n"+x+"]";var A=createRowWithLangRm("Domain Hint","Domain Hint",z,B);A.insertBefore($(this).closest("span").parent())});$("button#idpssoaddiphint").click(function(){var x="";var v="0123456789";for(var w=0;w<5;w++){x+=v.charAt(Math.floor(Math.random()*v.length))}var B=$("button#helperbutttonrm").html();var y=$(this).attr("value");var z="f[uii][idpsso][iphint][n"+x+"]";var A=createRowWithLangRm("IP Hint","IP Hint",z,B);A.insertBefore($(this).closest("span").parent())});$("button#addlhelpdesk").click(function(){var v=$("span.lhelpdeskadd option:selected").first();var y=v.val();var B=$("button#helperbutttonrm").html();if(typeof y==="undefined"){return false}var z=v.text();var w=$(this).attr("value");v.attr("disabled",true).attr("selected",false);var x="f[lhelpdesk]["+y+"]";var A=createRowWithLangRm(y,z,x,B);A.insertBefore($(this).closest("span").parent())});$("button#addldisplayname").click(function(){var v=$("span.ldisplaynameadd option:selected").first();var y=v.val();var B=$("button#helperbutttonrm").html();if(typeof y==="undefined"){return false}var z=v.text();var w=$(this).attr("value");v.attr("disabled",true).attr("selected",false);var x="f[ldisplayname]["+y+"]";var A=createRowWithLangRm(y,z,x,B);A.insertBefore($(this).closest("span").parent())});$("button#idpadduiidisplay").click(function(){var v=$("span.idpuiidisplayadd option:selected").first();var y=v.val();var B=$("button#helperbutttonrm").html();if(typeof y==="undefined"){return false}var z=v.text();var w=$(this).attr("value");v.attr("disabled",true).attr("selected",false);var x="f[uii][idpsso][displayname]["+y+"]";var A=createRowWithLangRm(y,z,x,B);A.insertBefore($(this).closest("span").parent())});$("button#idpadduiihelpdesk").click(function(){var v=$("span.idpuiihelpdeskadd option:selected").first();var y=v.val();if(typeof y==="undefined"){return false}var B=$("button#helperbutttonrm").html();var z=v.text();var w=$(this).attr("value");v.attr("disabled",true).attr("selected",false);var x="f[uii][idpsso][helpdesk]["+y+"]";var A=createRowWithLangRm(y,z,x,B);A.insertBefore($(this).closest("span").parent())});$("button#spadduiidisplay").click(function(){var v=$("span.spuiidisplayadd option:selected").first();var x=v.val();if(typeof x==="undefined"){return false}var y=v.text();var A=$("button#helperbutttonrm").html();v.attr("disabled",true).attr("selected",false);var w="f[uii][spsso][displayname]["+x+"]";var z=createRowWithLangRm(x,y,w,A);z.insertBefore($(this).closest("span").parent())});$("button#spadduiihelpdesk").click(function(){var v=$("span.spuiihelpdeskadd option:selected").first();var x=v.val();if(typeof x==="undefined"){return false}var y=v.text();var A=$("button#helperbutttonrm").html();v.attr("disabled",true).attr("selected",false);var w="f[uii][spsso][helpdesk]["+x+"]";var z=createRowWithLangRm(x,y,w,A);z.insertBefore($(this).closest("span").parent())});$("button#spadduiidesc").click(function(){var v=$("span.spuiidescadd option:selected").first();var w=v.val();if(typeof w==="undefined"){return false}var x=v.text();var y=$("button#helperbutttonrm").html();v.attr("disabled",true).attr("selected",false);$('<div class="small-12 columns"><div class="small-3 columns"><label for="f[uii][spsso][desc]['+w+']" class="right inline">'+x+'</label></div><div class="small-6 large-7 columns"><textarea id="f[uii][spsso][desc]['+w+']" name="f[uii][spsso][desc]['+w+']" rows="5" cols="40"/></textarea></div><div class="small-3 large-2 columns"><button type="button" class="btn langinputrm button tiny left inline alert" name="uiispdescrm" value="'+w+'">'+y+"</button></div></div>").insertBefore($(this).closest("span").parent())});$("button#addlname").click(function(){var v=$("span.lnameadd option:selected").first();var y=v.val();if(typeof y==="undefined"){return false}var B=$("button#helperbutttonrm").html();var z=v.text();var w=$(this).attr("value");v.attr("disabled",true).attr("selected",false);var x="f[lname]["+y+"]";var A=createRowWithLangRm(y,z,x,B);A.insertBefore($(this).closest("span").parent())});$("button#idpadduiidesc").click(function(){var v=$("span.idpuiidescadd option:selected").first();var x=v.val();if(typeof x==="undefined"){return false}var z=$("button#helperbutttonrm").html();var y=v.text();var w=$(this).attr("value");v.attr("disabled",true).attr("selected",false);$('<div class="small-12 columns"><div class="small-3 columns"><label for="f[uii][idpsso][desc]['+x+']" class="right inline">'+y+' </label></div><div class="small-6 large-7 columns"><textarea id="f[uii][idpsso][desc]['+x+']" name="f[uii][idpsso][desc]['+x+']" rows="5" cols="40"/></textarea></div><div class="small-3 large-2 columns"> <button type="button" class="btn langinputrm button tiny left inline" name="ldesc" value="'+x+'">'+z+"</button></div></div>").insertBefore($(this).closest("span").parent())});$("button#addlprivacyurlspsso").click(function(){var v=$("span.addlprivacyurlspsso option:selected").first();var y=v.val();if(typeof y==="undefined"){return false}var z=v.text();var B=$("button#helperbutttonrm").html();var w=$(this).attr("value");v.attr("disabled",true).attr("selected",false);var x="f[prvurl][spsso]["+y+"]";var A=createRowWithLangRm(y,z,x,B);A.insertBefore($(this).closest("span").parent())});$("button#addlprivacyurlidpsso").click(function(){var v=$("span.addlprivacyurlidpsso option:selected").first();var y=v.val();var B=$("button#helperbutttonrm").html();if(typeof y==="undefined"){return false}var z=v.text();var w=$(this).attr("value");v.attr("disabled",true).attr("selected",false);var x="f[prvurl][idpsso]["+y+"]";var A=createRowWithLangRm(y,z,x,B);A.insertBefore($(this).closest("span").parent())});$("#ncontactbtn").click(function(){var z="";var y=$(this).attr("value").split("|");var w="abcdefghijklmnopqrstuvwxyz0123456789";for(var x=0;x<5;x++){z+=w.charAt(Math.floor(Math.random()*w.length))}var v='<div class="group"><div class="small-12 columns"><fieldset><legend>'+y[5]+'</legend><div><div class="small-12 columns"><div class="small-3 columns"><label for="f[contact][n_'+z+'][type]" class="right inline">'+y[1]+'</label></div><div class="small-8 large-7 columns inline"><select name="f[contact][n_'+z+'][type]"> <option value="administrative">Administrative</option> <option value="technical">Technical</option> <option value="support" selected="selected">Support</option> <option value="billing">Billing</option> <option value="other">Other</option> </select></div><div class="small-1 large-2 columns"></div></div> <div class="small-12 columns"><div class="small-3 columns"><label for="f[contact][n_'+z+'][fname]" class="right inline">'+y[2]+'</label></div><div  class="small-8 large-7 columns"><input type="text" name="f[contact][n_'+z+'][fname]" value="" id="f[contact][n_'+z+'][fname]" class="right inline" /></div><div class="small-1 large-2 columns"></div></div> <div class="small-12 columns"><div  class="small-3 columns"><label for="f[contact][n_'+z+'][sname]" class="right inline">'+y[3]+'</label></div><div class="small-8 large-7 columns"><input type="text" name="f[contact][n_'+z+'][sname]" value="" id="f[contact][n_'+z+'][sname]" class="right inline" /></div><div class="small-1 large-2 columns"></div></div><div class="small-12 columns"><div class="small-3 columns"><label for="f[contact][n_'+z+'][email]" class="right inline ">'+y[4]+'</label></div><div class="small-8 large-7 columns"><input type="text" name="f[contact][n_'+z+'][email]" value="" id="f[contact][n_'+z+'][email]" class="right inline" /></div><div class="small-1 large-2 columns"></div></div><div class="rmelbtn small-12 columns"><div class="small-9 large-10 columns"><button type="button" class="btn contactrm tiny alert button inline right" name="contact" value="'+z+'">'+y[0]+'</button></div><div class="small-3 large-2 columns"></div></div></div></fieldset></div></div>';$(this).parent().before(v)});$("#nidpssocert").click(function(){var y="";var w="abcdefghijklmnopqrstuvwyz0123456789";for(var x=0;x<5;x++){y+=w.charAt(Math.floor(Math.random()*w.length))}y="newx"+y;var v='<div class="certgroup small-12 columns"><div class="small-12 columns hidden"><div class="small-3 columns"><label for="f[crt][idpsso]['+y+'][type]" class="inline right">Certificate type</label></div><div class="small-6 large-7 columns"><select name="f[crt][idpsso]['+y+'][type]"> <option value="x509">x509</option> </select></div><div class="small-3 large-2 columns"></div><div class="small-3 large-2 columns"></div></div><div class="small-12 columns"><div class="small-3 columns"><label for="f[crt][idpsso]['+y+'][usage]" class="inline right">Certificate use</label></div><div class="small-6 large-7 columns"><select name="f[crt][idpsso]['+y+'][usage]"> <option value="signing">signing</option> <option value="encryption">encryption</option> <option value="both" selected="selected">signing and encryption</option> </select> </div><div class="small-3 large-2 columns"></div></div><div class="small-12 columns hidden"><div class="small-3 columns"><label for="f[crt][idpsso]['+y+'][keyname]" class="inline right">KeyName</label></div><div class="small-6 large-7 columns"><input type="text" name="f[crt][idpsso]['+y+'][keyname]" value="" id="f[crt][idpsso]['+y+'][keyname]" class=""  /> </div><div class="small-3 large-2 columns"></div></div><div class="small-12 columns"><div class="small-3 columns"><label for="f[crt][idpsso]['+y+'][certdata]" class="inline right">Certificate</label></div><div class="small-6 large-7 columns"><textarea name="f[crt][idpsso]['+y+'][certdata]" cols="65" rows="20" id="f[crt][idpsso]['+y+'][certdata]" class="certdata notice" ></textarea></div><div class="small-3 large-2 columns"></div></div>';$(this).parent().before(v)});$("#naacert").click(function(){var y="";var w="abcdefghijklmnopqrstuvwyz0123456789";for(var x=0;x<5;x++){y+=w.charAt(Math.floor(Math.random()*w.length))}y="newx"+y;var v='<div class="certgroup small-12 columns"><div class="small-12 columns hidden"><div class="small-3 columns"><label for="f[crt][aa]['+y+'][type]" class="inline right">Certificate type</label></div><div class="small-6 large-7 columns"><select name="f[crt][aa]['+y+'][type]"> <option value="x509">x509</option> </select> </div><div class="small-3 large-2 columns"></div><div class="small-3 large-2 columns"></div></div><div class="small-12 columns"><div class="small-3 columns"><label for="f[crt][aa]['+y+'][usage]" class="inline right">Usage</label></div><div class="small-6 large-7 columns"><select name="f[crt][aa]['+y+'][usage]"> <option value="signing">signing</option> <option value="encryption">encryption</option> <option value="both" selected="selected">signing and encryption</option> </select> </div><div class="small-3 large-2 columns"></div></div><div class="small-12 columns hidden"><div class="small-3 columns"><label for="f[crt][aa]['+y+'][keyname]" class="inline right">KeyName</label></div><div class="small-6 large-7 columns"><input type="text" name="f[crt][aa]['+y+'][keyname]" value="" id="f[crt][aa]['+y+'][keyname]" class=""  /> </div><div class="small-3 large-2 columns"></div></div><div class="small-12 columns"><div class="small-3 columns"><label for="f[crt][aa]['+y+'][certdata]" class="inline right">Certificate</label></div><div class="small-6 large-7 columns"><textarea name="f[crt][aa]['+y+'][certdata]" cols="65" rows="20" id="f[crt][aa]['+y+'][certdata]" class="certdata notice" ></textarea> </div><div class="small-3 large-2 columns"></div></div> ';$(this).parent().before(v)});$("#nspssocert").click(function(){var y="";var w="abcdefghijklmnopqrstuvwyz0123456789";for(var x=0;x<5;x++){y+=w.charAt(Math.floor(Math.random()*w.length))}y="newx"+y;var v='<div class="certgroup small-12 columns"><div class="small-12 columns hidden"><div class="small-3 columns"><label for="f[crt][spsso]['+y+'][type]" class="right inline">Certificate type</label></div><div class="small-8 large-7 columns"><select name="f[crt][spsso]['+y+'][type]"><option value="x509">x509</option></select> </div><div class="small-1 large-2 columns end"></div></div><div class="small-12  columns"><div class="small-3 columns"><label for="f[crt][spsso]['+y+'][usage]" class="right inline">Certificate use</label></div><div class="small-8 large-7 columns"><select name="f[crt][spsso]['+y+'][usage]"><option value="signing">signing</option> <option value="encryption">encryption</option> <option value="both" selected="selected">signing and encryption</option> </select></div><div class="small-1 large-2 columns end"></div></div><div class="small-12 columns hidden"><div class="small-3 columns"><label for="f[crt][spsso]['+y+'][keyname]" class="right inline">KeyName</label></div><div class="small-8 large-7 columns"><input type="text" name="f[crt][spsso]['+y+'][keyname]" value="" id="f[crt][spsso]['+y+'][keyname]" class=""  /></div><div class="small-1 large-2 columns end"></div> </div><div class="small-12 columns"><div class="small-3 columns"><label for="f[crt][spsso]['+y+'][certdata]" class="right inline">Certificate</label></div><div class="small-8 large-7 columns"><textarea name="f[crt][spsso]['+y+'][certdata]" cols="65" rows="20" id="f[crt][spsso]['+y+'][certdata]" class="certdata" ></textarea></div><div class="small-1 large-2 columns end"></div></div><div class="small-12 columns"><div class="small-3 columns">&nbsp;</div><div class="small-6 large-7 columns"><button class="certificaterm button alert tiny right" value="'+y+'" name="certificate" type="button">Remove certificate</button></div><div class="small-3 large-2 columns"></div></div></div>';$(this).parent().before(v)});$("#nacsbtn").click(function(){var y="";var w="abcdefghijklmnopqrstuvwxyz0123456789";for(var x=0;x<5;x++){y+=w.charAt(Math.floor(Math.random()*w.length))}var v='<div class="srvgroup"><div class="small-12 columns"><div class="small-3 columns"><label for="f[srv][AssertionConsumerService][n_'+y+'][bind]" class="right inline">Binding Name</label></div><div class="small-5 columns inline"><select name="f[srv][AssertionConsumerService][n_'+y+'][bind]"> <option value="urn:oasis:names:tc:SAML:2.0:bindings:HTTP-POST">urn:oasis:names:tc:SAML:2.0:bindings:HTTP-POST</option> <option value="urn:oasis:names:tc:SAML:2.0:bindings:HTTP-Artifact" selected="selected">urn:oasis:names:tc:SAML:2.0:bindings:HTTP-Artifact</option> <option value="urn:oasis:names:tc:SAML:2.0:bindings:HTTP-POST-SimpleSign">urn:oasis:names:tc:SAML:2.0:bindings:HTTP-POST-SimpleSign</option> <option value="urn:oasis:names:tc:SAML:2.0:bindings:PAOS">urn:oasis:names:tc:SAML:2.0:bindings:PAOS</option> <option value="urn:oasis:names:tc:SAML:2.0:profiles:browser-post">urn:oasis:names:tc:SAML:2.0:profiles:browser-post</option> <option value="urn:oasis:names:tc:SAML:1.0:profiles:browser-post">urn:oasis:names:tc:SAML:1.0:profiles:browser-post</option> <option value="urn:oasis:names:tc:SAML:1.0:profiles:artifact-01">urn:oasis:names:tc:SAML:1.0:profiles:artifact-01</option> </select></div> <div class="small-4 columns"><div class="small-6 columns"><input type="text" name="f[srv][AssertionConsumerService][n_'+y+'][order]" value="" id="f[srv][AssertionConsumerService][n_'+y+'][order]" size="2" maxlength="2" class="acsindex "  /></div><div class="small-6 columns"><label for="f[srv][AssertionConsumerService][n_'+y+'][default]">Is default</label><input type="radio" name="f[srv][AssertionConsumerService][n_'+y+'][default]" value="1" id="f[srv][AssertionConsumerService][n_'+y+'][default]" class="acsdefault"/></div></div> </div>          <div class="small-12 columns"><div class="small-3 columns"><label for="f[srv][AssertionConsumerService][n_'+y+'][url]" class="right inline">URL</label></div><div class="small-8 large-7 columns inline"><input name="f[srv][AssertionConsumerService][n_'+y+'][url]" id="f[srv][AssertionConsumerService][n_'+y+'][url]" type="text"></div><div class="small-3 large-2 columns"><button class="inline left button tiny alert rmfield"  name="rmfield" type="button">Remove</button></div></div></div>';$(this).parent().before(v)});$("#nidpartifactbtn").click(function(){var y="";var w="abcdefghijklmnopqrstuvwxyz0123456789";for(var x=0;x<5;x++){y+=w.charAt(Math.floor(Math.random()*w.length))}var v='<div class="srvgroup"><div class="small-12 columns"><div class="small-3 columns"><label for="f[srv][IDPArtifactResolutionService][n_'+y+'][bind]" class="right inline">Binding Name</label></div><div class="small-6 large-7 columns inline"><select name="f[srv][IDPArtifactResolutionService][n_'+y+'][bind]"> <option value="urn:oasis:names:tc:SAML:2.0:bindings:SOAP" selected="selected">urn:oasis:names:tc:SAML:2.0:bindings:SOAP</option> <option value="urn:oasis:names:tc:SAML:1.0:bindings:SOAP-binding">urn:oasis:names:tc:SAML:1.0:bindings:SOAP-binding</option></select></div> <div class="small-2 large-1 columns end"><input type="text" name="f[srv][IDPArtifactResolutionService][n_'+y+'][order]" value="" id="f[srv][IDPArtifactResolutionService][n_'+y+'][order]" size="2" maxlength="2" class="acsindex "  /></div></div> <div class="small-12 columns"><div class="small-3 columns"><label for="f[srv][IDPArtifactResolutionService][n_'+y+'][url]" class="right inline">URL</label></div><div class="small-6 large-7 columns inline"><input name="f[srv][IDPArtifactResolutionService][n_'+y+'][url]" id="f[srv][IDPArtifactResolutionService][n_'+y+'][url]" type="text"></div><div class="small-3 large-2 columns"><button class="inline left button tiny alert rmfield" value="" name="rmfield" type="button">Remove</button></div></div>';$(this).parent().before(v)});$("#nspartifactbtn").click(function(){var y="";var w="abcdefghijklmnopqrstuvwxyz0123456789";for(var x=0;x<5;x++){y+=w.charAt(Math.floor(Math.random()*w.length))}var v='<div class="srvgroup"><div class="small-12 columns"><div class="small-3 columns"><label for="f[srv][SPArtifactResolutionService][n_'+y+'][bind]" class="right inline">Binding Name</label></div><div class="small-8 large-7 columns inline"><select name="f[srv][SPArtifactResolutionService][n_'+y+'][bind]"> <option value="urn:oasis:names:tc:SAML:2.0:bindings:SOAP" selected="selected">urn:oasis:names:tc:SAML:2.0:bindings:SOAP</option> <option value="urn:oasis:names:tc:SAML:1.0:bindings:SOAP-binding">urn:oasis:names:tc:SAML:1.0:bindings:SOAP-binding</option></select> </div> <div class="small-1  columns left"><input type="text" name="f[srv][SPArtifactResolutionService][n_'+y+'][order]" value="" id="f[srv][SPArtifactResolutionService][n_'+y+'][order]" size="2" maxlength="2" class="acsindex "  /></div></div>           <div class="small-12 columns"><div class="small-3 columns"><label for="f[srv][SPArtifactResolutionService][n_'+y+'][url]" class="right inline">URL</label></div><div class="small-6 large-7 columns inline"><input name="f[srv][SPArtifactResolutionService][n_'+y+'][url]" id="f[srv][SPArtifactResolutionService][n_'+y+'][url]" type="text"> </div><div class="small-3 large-2 columns"><button class="inline left button tiny alert rmfield"  name="rmfield" type="button">Remove</button></div></div>';$(this).parent().before(v)});$("#ndrbtn").click(function(){var y="";var w="abcdefghijklmnopqrstuvwxyz0123456789";for(var x=0;x<5;x++){y+=w.charAt(Math.floor(Math.random()*w.length))}var v='<div class="srvgroup"><div class="small-12 columns"><div class="small-3 columns"><label for="f[srv][DiscoveryResponse][n_'+y+'][bind]" class="right inline">Binding Name</label></div><div class="small-6 large-7 columns"><select name="f[srv][DiscoveryResponse][n_'+y+'][bind]"><option value="urn:oasis:names:tc:SAML:profiles:SSO:idp-discovery-protocol">urn:oasis:names:tc:SAML:profiles:SSO:idp-discovery-protocol</option></select> </div><div class="small-1 columns end"><input type="text" name="f[srv][DiscoveryResponse][n_'+y+'][order]" value="" id="f[srv][DiscoveryResponse][n_'+y+'][order]" size="2" maxlength="2" class="acsindex "  /></div></div><div class="small-12 columns"><div class="small-3 columns"><label for="f[srv][DiscoveryResponse][n_'+y+'][url]" class="right inline">URL</label></div><div class="small-6 large-7 columns"><input name="f[srv][DiscoveryResponse][n_'+y+'][url]" id="f[srv][DiscoveryResponse][n_'+y+'][url]" type="text"></div><div class="small-1 columns end"><button class="rmfield button alert tiny left" name="rmfield">Remove</button></div></div></div>';$(this).parent().before(v)});$("#nribtn").click(function(){var y="";var w="abcdefghijklmnopqrstuvwxyz0123456789";for(var x=0;x<5;x++){y+=w.charAt(Math.floor(Math.random()*w.length))}var v='<div class="small-12 columns srvgroup"><div class="small-3 columns"><label for="f[srv][RequestInitiator][n_'+y+'][url]" class="right inline">URL</label></div><div class="small-6 large-7 columns"><input name="f[srv][RequestInitiator][n_'+y+'][url]" id="f[srv][RequestInitiator][n_'+y+'][url]" type="text"></div><div class="small-3 large-2 columns"><button type="button" class="inline left button tiny alert rmfield" name="rmfield" value="">remove</button></div></div>';$(this).parent().before(v)});$("button.addnewlogo").click(function(){var w;var B=$(this).closest("div.reviewlogo");var y="abcdefghijklmnopqrstuvwxyz0123456789";var H=B.attr("id");var E;var v="";if(H==="idpreviewlogo"){E="idp"}else{E="sp"}for(var z=0;z<5;z++){v+=y.charAt(Math.floor(Math.random()*y.length))}var J=B.find("input[name='"+E+"inputurl']").attr("value");var D=B.find("input[name='"+E+"inputsize']").attr("value");var G=B.find("select[name='"+E+"logolang']").val();if(G==="0"){w="unspec"}else{w=G}var C='<input type="hidden" name="f[uii]['+E+"sso][logo][n"+v+'][url]" value="'+J+'">';var A='<input type="hidden" name="f[uii]['+E+"sso][logo][n"+v+'][size]" value="'+D+'">';var F='<input type="hidden" name="f[uii]['+E+"sso][logo][n"+v+'][lang]" value="'+G+'">';var x=$("li#nlogo"+E+"row");var I=x.clone(true);I.removeAttr("id");I.find("img").first().attr("src",J).append(C).append(A).append(F);I.find("div.logoinfo").first().append(""+w+"<br />").append(J+"<br />").append(D+"<br />");I.insertBefore(x).show()});$("button.getlogo").click(function(){var A,C;var w=$(this).attr("name");var B,D;var y=$(this).attr("value");if(w==="idpgetlogo"){D=$("#idpreviewlogo");D.hide();A=$("small.idplogoretrieve");A.empty().hide();B=$("[name='idplogoretrieve']").val();C=$("#idpreviewlogo").find("div.imgsource").first()}else{D=$("#spreviewlogo");D.hide();A=$("small.splogoretrieve");A.empty().hide();B=$("[name='splogoretrieve']").val();C=$("#spreviewlogo").find("div.imgsource").first()}var z=$("[name='csrfname']").val();var v=$("[name='csrfhash']").val();var x=[{name:z,value:v},{name:"logourl",value:B}];$.ajax({type:"POST",url:y,cache:false,data:x,dataType:"json",success:function(N){if(N){if(N.error){A.append(N.error).show()}else{if(N.data){var H=N.data;var K=new Image();K.onload=function(){};K.src=H.url;var F=H.width+"x"+N.data.height;var M,L,G;var I="abcdefghijklmnopqrstuvwxyz0123456789";var E="";for(var J=0;J<5;J++){E+=I.charAt(Math.floor(Math.random()*I.length))}if(w==="idpgetlogo"){G='<input type="hidden" name="logotype" value="idp">';M='<input type="hidden" name="idpinputurl" value="'+N.data.url+'">';L='<input type="hidden" name="idpinputsize" value="'+F+'">';C.empty().append(K).append(M).append(L).append(G);$("div#idpreviewlogo div.logoinfo").empty().append(F);D.show()}else{if(w==="spgetlogo"){G='<input type="hidden" name="logotype" value="idp">';M='<input type="hidden" name="spinputurl" value="'+N.data.url+'">';L='<input type="hidden" name="spinputsize" value="'+F+'">';C.empty().append(K).append(M).append(L).append(G);$("div#spreviewlogo div.logoinfo").empty().append(F);D.show()}}}}}}})});g.on("click","button.contactrm",function(x){var w=$(this).attr("value");var y=$(this).attr("name");var v=$(this).closest("div.group");v.remove()});g.on("click","button.certificaterm",function(x){var w=$(this).attr("value");var y=$(this).attr("name");var v=$(this).closest("div.certgroup");v.remove()});g.on("click","input.acsdefault",function(v){if($(this).is(":checked")){$(".acsdefault").not(this).removeAttr("checked")}});g.on("click","button.rmfield",function(x){var w=$(this).closest("div.srvgroup");var v=$(this).attr("value");var y=$(this).attr("name");w.find("input").each(function(){$(this).attr("value","")});w.find("textarea").each(function(){$(this).val("")});w.remove()});g.on("click","button.langinputrm",function(y){y.preventDefault();var x=$(this).closest("div").parent();var w=$(this).attr("value");var z=$(this).attr("name");var v=$(this).closest("div.group").find("select").first();x.find("input").each(function(){$(this).attr("value","")});x.find("textarea").each(function(){$(this).val("")});v.find("option[value="+w+"]").each(function(){$(this).toggleOption(true);$(this).attr("disabled",false)});x.remove()})}if($("#matrixloader").length>0){var r=$("#policyupdater");var i=r.attr("data-jagger-link");var p=$(r).find("form").first();var d=$("#matrixloader").attr("data-jagger-providerdetails");var k=$(r).find("span.mrequester").first();var c=$(r).find("span.mattribute").first();var l=$(r).find("div.yes").first();var q=$(r).find("div.attrflow").first();var b=$("#idpmatrixdiv");var j;r.on("click","div.yes",function(w){w.preventDefault();var v=p.attr("action");$.ajax({type:"POST",url:v,data:p.serializeArray(),success:function(y){r.foundation("reveal","close");if(!j.hasClass("dis")){var x=$.trim(j.text());if((y==="2"&&(x==="R"||x==="D"))||(y==="1"&&x==="R")){j.attr("class","perm")}else{if((y==="2c"&&(x==="R"||x==="D"))||(y==="1c"&&x==="R")){j.attr("class","spec")}else{if((y==="1"&&x==="D")||(y==="0")){j.attr("class","den")}else{if((y==="1c"&&x==="D")||(y==="0c")){j.attr("class","den")}}}}}}})});b.on("click","td",function(x){j=$(this);var w=$(this).attr("data-jagger-entidlink");if(w!==undefined){document.location.href=d+"/"+w;return false}var y=$(this).attr("data-jagger-spid");var v=$(this).attr("data-jagger-attrid");if(y!==undefined&&v!==undefined){$.ajax({type:"GET",url:i+"/"+y+"/"+v,cache:false,dataType:"json",success:function(B){p.find("select[name='policy']").prop("selected",false).filter('[value=""]').prop("selected",true);p.find("input[name='attribute']").first().val(B.attributename);p.find("input[name='requester']").first().val(B.requester);k.html(B.requester);c.html(B.attributename);var A=$("<tbody></tbody>");var z='<thead><tr><th colspan="2">Current attribute flow</th></tr></thead>';$.each(B.details,function(F,E){var G="<tr><td>"+E.name+"</td><td>"+E.value+"</td/></tr>";A.append(G)});var D=$("<table/>").css({"font-size":"smaller"}).addClass("detailsnosort").addClass("small-12").addClass("columns");var C=$("<div/>");D.append(z);D.append(A);C.append(D);q.html(C.html());r.foundation("reveal","open")}})}});var m=$("#matrixloader").attr("data-jagger-link");if(typeof m==="undefined"){return false}$.ajax({type:"GET",url:m,cache:false,dataType:"json",success:function(K){$("#spinner").hide();if(K){var y=new Date();var I;var D=K.attributes;var x=K.policies;var E=K.total;var w=K.message;if(E!==undefined&&E===0&&w!==undefined){var F='<div class="small-12 medium-11 columns small-centered"><div data-alert class="alert-box warning">'+w+"</div></div>";b.html(F);return false}var J=0;var B='<table class="table table-header-rotated" id="idpmatrixresult"><thead><tr>';B+="<th></th>";$.each(D,function(L,M){B+='<th class="rotate"><div><span>'+L+"</span></div></th>";J++});if(J>52){$("#container").css({"max-width":"100%"})}var H,G,z;B+="</tr></thead><tbody>";$.each(x,function(M,L){B+='<tr><td data-jagger-entidlink="'+L.spid+'" class="searchcol"><span data-tooltip aria-haspopup="true" class="has-tip" data-options="disable_for_touch:true" title="'+M+'" >'+L.name+'</span><span class="hidden">'+M+"</span></td>";$.each(D,function(O,N){G=null;if(L.attributes[O]!==undefined){z=L.attributes[O]}else{z=null}if(L.req[O]!==undefined){G=L.req[O]}if(G!==null){H=G[0].toUpperCase()}else{H=""}if(z!==null){if(z===0){I="den"}else{if(z===1){if(L.custom[O]!==undefined){I="spec"}else{I="perm"}}else{I="dis"}}}else{I="dis"}B+='<td data-jagger-spid="'+L.spid+'" data-jagger-attrid="'+N+'" class="'+I+'" title="'+O+'">';B+=H+"</td>"})});B+="</tbody></table>";var C=new Date();var v=C-y;console.log("time of generating matrix: "+v);b.html(B);var A=new Date();v=A-C;console.log("time of input matrinx into DOM: "+v);$("#idpmatrixresult").searcher({inputSelector:"#tablesearchinput",textSelector:".searchcol"})}},beforeSend:function(){$("#spinner").show()},error:function(y,v,w){$("#spinner").hide();var x='<div class="small-12 medium-11 columns small-centered"><div data-alert class="alert-box error">'+w+"</div></div>";b.html(x);return false}})}var a=$("#showhelps");if(a.length){if(a.hasClass("helpactive")){$(".dhelp").show()}else{$(".dhelp").hide()}}var e=$("#fedlogin").first();var h=e.attr("href");var t=new Date();var s=-t.getTimezoneOffset();e.attr("href",""+h+"/"+s+"");if($("#fedcategories dd.active").length){var f=$("dd.active").find("a").first().attr("href");var n=$("table.fedistpercat");var u;$.ajax({url:f,timeout:2500,cache:true,dataType:"json",value:$("table.fedistpercat"),success:function(v){$("#spinner").hide();if(!v){window.alert("no data in federation category")}else{$("table.fedistpercat tbody tr").remove();$.each(v,function(y,x){var w="<tr><td>"+x.name+"</td><td>"+x.urn+"</td><td>"+x.labels+"</td><td>"+x.desc+"</td><td>"+x.members+"</td></tr>";n.append(w)})}}})}$(".fedcategory").on("click","",function(w){$("dd").removeClass("active");$(this).closest("dd").addClass("active");var v=$(this).attr("href");var y=$("table.fedistpercat");var x;$.ajax({url:v,timeout:2500,cache:true,dataType:"json",value:y,success:function(z){$("#spinner").hide();if(!z){window.alert("no data in federation category")}else{$("table.fedistpercat tbody tr").remove();$.each(z,function(C,B){var A="<tr><td>"+B.name+"</td><td>"+B.urn+"</td><td>"+B.labels+"</td><td>"+B.desc+"</td><td>"+B.members+"</td></tr>";y.append(A)})}},beforeSend:function(){$("#spinner").show()},error:function(){$("#spinner").hide();window.alert("problem with loading data")}}).done(function(){var z=y.html()});return false})});$(function(){$("div.floating-menu").addClass("mobilehidden");$("table.idplist tr td:first-child").addClass("homeorg");$("table.idplist tr td:first-child span.alert").removeClass("alert").parent().addClass("alert");var b=$("table.filterlist");b.find("tbody > tr").find("td:eq(1)").mousedown(function(){});$("#filter").keyup(function(){$.uiTableFilter(b,this.value)});$("#filter-form").submit(function(){b.find("tbody > tr:visible > td:eq(1)").mousedown();return false}).focus();$("table.splist tr td:first-child span.alert").removeClass("alert").parent().addClass("alert");var a=$("table.splist");a.find("tbody > tr").find("td:eq(1)").mousedown(function(){});$("#filter").keyup(function(){$.uiTableFilter(a,this.value)});$("#filter-form").submit(function(){a.find("tbody > tr:visible > td:eq(1)").mousedown();return false}).focus();$(".datepicker").datepicker({dateFormat:"yy-mm-dd"});var c=$("[name='baseurl']").val();if(c===undefined){c=""}$("#responsecontainer").load(c+"reports/awaiting/ajaxrefresh");setInterval(function(){$("#responsecontainer").load(c+"reports/awaiting/ajaxrefresh")},172000);$("#dashresponsecontainer").load(c+"reports/awaiting/dashajaxrefresh");setInterval(function(){$("#dashresponsecontainer").load(c+"reports/awaiting/dashajaxrefresh")},172000);$.ajaxSetup({cache:false});$("#qcounter").load(c+"reports/awaiting/counterqueue");setInterval(function(){$("#qcounter").load(c+"reports/awaiting/counterqueue")},86000);$("#languageset").on("change","select",function(g){var f=$("div#languageset form").attr("action");var d=f+this.value;$.ajax({url:d,timeout:2500,cache:false}).done(function(){$("#languageset").foundation("reveal","close");setTimeout(function(){go_to_private_page()},1000)});return false});$("select.nuseraccesstype").on("change",function(){var d=$(this).find("option:selected");var e=d.val();if(e==="fed"){$("div.passwordrow").hide()}else{$("div.passwordrow").show()}});$("button#idpadduiiprvurl").click(function(){var d=$("span.idpuiiprvurladd option:selected").val();var e=$("span.idpuiiprvurladd option:selected").text();$("span.idpuiiprvurladd option[value="+d+"]").remove();$(this).parent().prepend('<li class="localized"><label for="f[[uii][idpsso][prvurl]['+d+']">'+e+'</label><input id="f[uii][idpsso][prvurl]['+d+']" name="f[uii][idpsso][prvurl]['+d+']" type="text"/></li>')});$("button#spadduiiprvurl").click(function(){var d=$("span.spuiiprvurladd option:selected").val();var e=$("span.spuiiprvurladd option:selected").text();$("span.spuiiprvurladd option[value="+d+"]").remove();$(this).parent().prepend('<li class="localized"><label for="f[[uii][spsso][prvurl]['+d+']">'+e+'</label><input id="f[uii][spsso][prvurl]['+d+']" name="f[uii][spsso][prvurl]['+d+']" type="text"/></li>')});$("button#addlprivacyurl").click(function(){var d=$("li.addlprivacyurl option:selected").val();var e=$("li.addlprivacyurl option:selected").text();$("li.addlprivacyurl option[value="+d+"]").toggleOption(false);$(this).parent().append('<li class="localized"><label for="lprivacyurl['+d+']">'+e+'</label><input id="lprivacyurl['+d+']" name="lprivacyurl['+d+']" type="text"/></li>')});$("a#fedmetasigner").click(function(){var e=$(this),d=e.attr("href");$.ajax({url:d,timeout:2500,cache:false,success:function(f){alert(f)}});return false});$("a#providermetasigner").click(function(){var e=$(this),d=e.attr("href");$.ajax({url:d,timeout:2500,cache:false,success:function(f){window.alert(f)}});return false});$("a.downloadstat").click(function(){var e=$(this),d=e.attr("href");var f;$.ajax({url:d,timeout:2500,cache:false,success:function(g){f=$.parseJSON(g);if(!f){window.alert("no data")}else{window.alert(f.status)}}});return false});$("a.lateststat").click(function(){var f=$(this),d=f.attr("href");var g=$('<div id="#statisticdiag">');var e;$.ajax({url:d,timeout:2500,cache:true,success:function(h){e=null;$("#spinner").hide();var i=$.parseJSON(h);if(!i){window.alert("no data")}else{$("div#statisticdiag").replaceWith('<div id="statisticdiag"></div>');$.each(i,function(k,j){k=new Image();k.src=j.url;$("#statisticdiag").append('<div style="text-align:center; font-weight: bold; width: 90%;">'+j.title+"</div>").append('<div style="font-weight: bolder; width: 90%; text-align: right;">'+j.subtitle+"</div>").append(k)})}},beforeSend:function(){$("#spinner").show()},error:function(){$("#spinner").hide();window.alert("problem with loading data")}});return false});$("a.clearcache").click(function(){var e=$(this),d=e.attr("href");$.ajax({type:"GET",url:d,timeout:2500,cache:false,success:$(this).remove()});return false});$(".updatebookmark").on("click",function(h){h.preventDefault();var d=$(this).attr("href");var f=$(this).attr("data-jagger-bookmark");var g=$(this).closest("[data-jagger-onsuccess]");var i=g.attr("data-jagger-onsuccess");if(d===undefined||f===undefined){return false}$.ajax({url:d+"/"+f,type:"GET",success:function(e){if(e&&e==="ok"){if(i!==undefined){if(i==="hide"){g.hide()}}else{window.alert("sdf")}}}});return false});$("a#synchsettings").click(function(){var e=$(this),d=e.attr("href");var f=$("<ul/>");$.ajax({url:d,timeout:2500,cache:false,success:function(g){$("#spinner").hide();var i=$.parseJSON(g);if(!i){window.alert("no data")}else{var h=$("<ul/>");$.each(i,function(k,j){var l="<li>"+j.result+"</li>";h.append(l)});f.append(h)}},beforeSend:function(){$("#spinner").show()},error:function(){$("#spinner").hide();window.alert("problem with loading data")}}).done(function(){var g=f.html();$("div#syncresult").replaceWith(g)});return false});$("table.reqattraddform").addClass("hidden");$("button.hideform").addClass("hidden");$("form.reqattraddform").addClass("hidden");$("button.showform").click(function(){$("table.reqattraddform").removeClass("hidden");$("form.reqattraddform").removeClass("hidden");$("button.showform").addClass("hidden");$("button.hideform").removeClass("hidden")});$("button.hideform").click(function(){$("table.reqattraddform").addClass("hidden");$("form.reqattraddform").addClass("hidden");$("button.showform").removeClass("hidden");$("button.hideform").addClass("hidden")});$("#sortable").sortable();$("div.nsortable").sortable();$("#sortable").disableSelection();$(".accordionButton1").click(function(){$(".accordionButton1").removeClass("on");$(".accordionButton1").addClass("off");$(".accordionContent1").slideUp("fast");if($(this).next().is(":hidden")===true){$(this).addClass("on");$(this).removeClass("off");$(this).next().slideDown("fast")}});$(".accordionButton1").mouseover(function(){$(this).addClass("over")}).mouseout(function(){$(this).removeClass("over")})});var ww=document.body.clientWidth;$(document).ready(function(){$(".nav li a").each(function(){if($(this).next().length>0){$(this).addClass("parent")}});$(".toggleMenu").click(function(a){a.preventDefault();$(this).toggleClass("active");$(".nav").toggle()})});$(document).on("click","a.refreshurl",function(f){f.preventDefault();var b=$(this).attr("data-jagger-getmoreajaxonclick");var d=$(this).attr("data-jagger-response-msg");var c=$(this);if(d===undefined||d===null){console.log('attribute data-jagger-response-msg not found in element with data-jagger-getmoreajax="'+b+'" - exiting');return false}else{console.log('attribute data-jagger-response-msg="'+d+'" in element data-jagger-getmoreajax="'+b+'"')}var a=$("div#"+d);if(a===undefined||a===null||$(a).length===0){console.log('div with id="'+d+'" not found');return false}else{console.log('div with id="'+d+'" found')}$.ajax({dataType:"json",type:"GET",url:b,cache:true,success:function(h){if(!h){console.log("no json got from "+b);return false}var g=h.length;if(g<1){return false}var e=$("<div/>");$.each(h,function(k,j){e.append("<div>"+j.msg+"</div>")});a.empty().append(c).append(e).show()}})});$(window).bind("resize orientationchange",function(){ww=document.body.clientWidth;adjustMenu()});var adjustMenu=function(){if(ww<768){$("#filter-form").remove();$(".toggleMenu").css("display","inline-block");if(!$(".toggleMenu").hasClass("active")){$(".nav").hide()}else{$(".nav").show()}$(".nav li").unbind("mouseenter mouseleave");$(".nav li a.parent").unbind("click").bind("click",function(a){a.preventDefault();$(this).parent("li").toggleClass("hover")})}else{if(ww>=768){$(".toggleMenu").css("display","none");$(".nav").show();$(".nav li").removeClass("hover");$(".nav li a").unbind("click");$(".nav li").unbind("mouseenter mouseleave").bind("mouseenter mouseleave",function(){$(this).toggleClass("hover")})}}};$(function(){$("#details").tablesorter({sortList:[[0,0],[1,0]],widgets:["zebra"]});$(".userlist#details").tablesorter({sortList:[[3,1],[0,0]],widgets:["zebra"]});$("#options").tablesorter({sortList:[[0,0]],headers:{3:{sorter:false},4:{sorter:false}}});$("#logotabs").tabs({load:function(a,b){$("#availablelogos").unbind();$("#assignedlogos").unbind();$("#uploadlogo").unbind();$("table#details").unbind();GINIT.initialize()}})});if($("#usepredefined").attr("checked")){$("fieldset#stadefext").hide()}$("#usepredefined").click(function(){if($(this).is(":checked")){$("#usepredefined").not(this).removeAttr("checked");$("fieldset#stadefext").hide()}else{$("fieldset#stadefext").show();$("#usepredefined").not(this).addAttr("checked")}});$("#nattrreqbtn").click(function(g){g.preventDefault();var f="";var b="abcdefghijklmnopqrstuvwxyz0123456789";for(var d=0;d<5;d++){f+=b.charAt(Math.floor(Math.random()*b.length))}var c=$('select[name="nattrreq"]');var h=c.find(":selected").text();var e=c.find(":selected").val();var a="<fieldset><legend>"+h+'</legend><div class="small-12 columns"><div class="medium-3 columns medium-text-right"><select name="f[reqattr]['+f+'][status]"><option value="required">required</option><option value="desired">desired</option></select><input type="hidden" name="f[reqattr]['+f+'][attrname]" value="'+h+'"><input type="hidden" name="f[reqattr]['+f+'][attrid]" value="'+e+'"></div><div class="medium-6 collumns end"><textarea name="f[reqattr]['+f+'][reason]"></textarea></div></div></fieldset>';$(this).parent().parent().before(a)});$(".pCookieAccept").on("click",function(){var a=$(this).attr("href");$.ajax({url:a,timeout:2500});$("#cookiesinfo").hide();return false});$("[id='f[entityid]']").change(function(){if($(this).hasClass("alertonchange")){var a=$("#entitychangealert").text();window.alert(a)}});$(document).ready(function(){var f=$("[name='baseurl']").val();if(f===undefined){f=""}var e=new Image(16,16);e.src=f+"images/spinner.gif";var d=new Image(220,19);d.src=f+"images/ajax-loader.gif";if($("#eds2").is("*")){$("#idpSelect").modal({Height:"500px",minHeight:"500px"})}$("#vormversion").click(function(){$.ajax({cache:false,type:"GET",url:f+"smanage/reports/vormversion",success:function(g){$("#spinner").hide();$("#rvormversion").show();$("tr#rvormversion td:first-child").html(g)},beforeSend:function(){$("#spinner").show()},error:function(){$("#spinner").hide();window.alert("Error occurred")}});return false});$("#vschema").click(function(){$.ajax({cache:false,type:"GET",url:f+"smanage/reports/vschema",success:function(g){$("#spinner").hide();$("#rvschema").show();$("tr#rvschema td:first-child").html(g)},beforeSend:function(){$("#spinner").show()},error:function(){$("#spinner").hide();window.alert("Error ocured")}});return false});$("#vschemadb").click(function(){$.ajax({cache:false,type:"GET",url:f+"smanage/reports/vschemadb",success:function(g){$("#spinner").hide();$("#rvschemadb").show();$("tr#rvschemadb td:first-child").html(g)},beforeSend:function(){$("#spinner").show()},error:function(){$("#spinner").hide();window.alert("Error ocured")}});return false});$("#vmigrate").click(function(){$.ajax({cache:false,type:"GET",url:f+"smanage/reports/vmigrate",success:function(g){$("#spinner").hide();$("#rvmigrate").show();$("tr#rvmigrate td:first-child").html(g)},beforeSend:function(){$("#spinner").show()},error:function(){$("#spinner").hide();window.alert("Error ocured")}});return false});$("button#registernotification2").click(function(h){h.preventDefault();var g=$("form#notificationaddform");b("",function(j){var i=g.serializeArray();$.ajax({type:"POST",url:g.attr("action"),data:$("form#notificationaddform").serializeArray(),success:function(k){$(".message").html(k);if(k==="OK"){$(this).foundation("reveal","close");location.reload()}},error:function(k,m,l){window.alert("Error occured: "+l)}})})});$('button[name="fedstatus"]').click(function(n){var l=$(this).attr("value");var i=$(this).attr("title");if(i===undefined){i=""}var o=$("[name='csrfname']").val();var h=$("[name='csrfhash']").val();var k=$("[name='baseurl']").val();var m=$("span#fednameencoded").text();var g=k+"federations/manage/changestatus";var j=[{name:"status",value:l},{name:o,value:h},{name:"fedname",value:m}];a(""+i+"",function(p){$.ajax({type:"POST",url:g,data:j,success:function(q){if(q){if(q==="deactivated"){$('button[value="disablefed"]').hide();$('button[value="enablefed"]').show();$('button[value="delfed"]').show();$("td.fedstatusinactive").show();$("show.fedstatusinactive").show()}else{if(q==="activated"){$('button[value="disablefed"]').show();$('button[value="enablefed"]').hide();$('button[value="delfed"]').hide();$("td.fedstatusinactive").hide();$("span.fedstatusinactive").hide()}else{if(q==="todelete"){$('button[value="disablefed"]').hide();$('button[value="enablefed"]').hide();$('button[value="delfed"]').hide()}}}}},error:function(q){window.alert("Error  ocurred")}})})});$("#rmstatdef").on("click","button",function(i){var g=$("form#rmstatdef").attr("action");var h=$(this).serialize();a("",function(j){$.ajax({type:"POST",url:g,data:h,success:function(k){$("#resultdialog").modal({position:["20%",],overlayId:"simpledialog-overlay",containerId:"simpledialog-container",closeHTML:"<a href='#' title='Close' class='modal-close'>x</a>"})},error:function(k){window.alert("Error")}})});i.preventDefault()});$("#rmfedcategory").click(function(i){var g=$(this).attr("action");var h=$(this).serialize();a("",function(j){$("<input>").attr({type:"hidden",id:"formsubmit",name:"formsubmit",value:"remove"}).appendTo("form");$("form").submit()});i.preventDefault()});$("#rmfedvalidator").click(function(i){var g=$(this).attr("action");var h=$(this).serialize();a("",function(j){$("<input>").attr({type:"hidden",id:"formsubmit",name:"formsubmit",value:"remove"}).appendTo("form");$("form").submit()});i.preventDefault()});function b(g,h){$("#notificationaddmodal").foundation("reveal","open",{});$(document).on("opened","#notificationaddmodal",function(){var i=$(this);$("select#sfederation").parent().hide();$("select#sprovider").parent().hide();$("select#type").change(function(){$("select#sfederation").parent().hide();$("select#sprovider").parent().hide();var n=$(this).find("option:selected");var j=n.val();var k=n.text();var m=$("#sfederation");var l=$("#sprovider");m.find("option").remove();l.find("option").remove();if(j==="joinfedreq"||j==="fedmemberschanged"){$.ajax({type:"GET",url:f+"ajax/getfeds",cache:true,success:function(o){$.each(o,function(p,q){$("<option>").val(q.id).text(q.name).appendTo(m)});$("select#sfederation").parent().show()},error:function(o,q,p){$(".message").html(p)}})}else{if(j==="requeststoproviders"){$.ajax({type:"GET",url:f+"ajax/getproviders",cache:false,datatype:"json",success:function(o){$.each(o,function(p,q){$("<option>").val(q.key).text(q.value).appendTo(l)});$("select#sprovider").parent().show()},error:function(o,q,p){$(".message").html(p)}})}}});$(".no").click(function(){$("#notificationaddmodal").foundation("reveal","close")});$(".yes").click(function(){if($.isFunction(h)){h.apply()}})})}function c(g,h){$("#notificationaddform").modal({closeHTML:"<a href='#' title='Close' class='modal-close'>x</a>",position:["20%",],overlayId:"simpledialog-overlay",minHeight:"400px",minWidth:"500px",containerId:"simpledialog-container",onOpen:function(i){i.overlay.fadeIn("fast",function(){i.container.slideDown("fast",function(){i.data.fadeIn("fast")})})},onShow:function(i){$("select#sfederation").parent().hide();$("select#sprovider").parent().hide();$("select#type").change(function(){$("select#sfederation").parent().hide();$("select#sprovider").parent().hide();var o=$(this).find("option:selected");var k=o.val();var l=o.text();var n=$("#sfederation");var m=$("#sprovider");n.find("option").remove();m.find("option").remove();if(k==="joinfedreq"||k==="fedmemberschanged"){$.ajax({type:"GET",url:f+"ajax/getfeds",cache:true,success:function(p){$.each(p,function(q,r){$("<option>").val(r.id).text(r.name).appendTo(n)});$("select#sfederation").parent().show()},error:function(p,r,q){$(".message").html(q)}})}else{if(k==="requeststoproviders"){$.ajax({type:"GET",url:f+"ajax/getproviders",cache:false,success:function(p){var q=$.parseJSON(p);$.each(q,function(r,s){$("<option>").val(s.key).text(s.value).appendTo(m)});$("select#sprovider").parent().show()},error:function(p,r,q){$(".message").html(q)}})}}});var j=this;$(".message",i.data[0]).append(g);$(".yes",i.data[0]).click(function(){if($.isFunction(h)){h.apply()}})}})}function a(g,h){$("#sconfirm").modal({closeHTML:"<a href='#' title='Close' class='modal-close'>x</a>",position:["20%",],minHeight:"300px",minWidth:"300px",overlayId:"simpledialog-overlay",containerId:"simpledialog-container",onShow:function(i){var j=this;$(".message",i.data[0]).append("<br />"+g);$(".yes",i.data[0]).click(function(){if($.isFunction(h)){h.apply()}j.close()})}})}});function go_to_private_page(){window.location.reload()}$(".submit").click(function(){return false});$("#joinfed").on("change","#fedid",function(g){$("div.validaronotice").hide();$("ul.validatorbuttons").replaceWith('<ul class="button-group validatorbuttons"></ul>');var h=$("[name='csrfname']").val();var c=$("[name='csrfhash']").val();if(h===undefined){h=""}if(c===undefined){c=""}var a=$(this).find("option:selected").val();var d=$(this).find("option:selected").text();var f=$("div#retrfvalidatorjson").text();var b={};b[h]=c;b.fedid=a;if(a!==0){$.ajax({type:"POST",url:f,timeout:2500,cache:true,data:b,dataType:"json",success:function(e){$("#spinner").hide();if(e){var i=$("ul.validatorbuttons");$.each(e,function(k,j){i.append('<li><button  value="'+f+"/"+j.fedid+"/"+j.id+'" class="small">'+j.name+"</button></li>")});$("div.validaronotice").show()}},beforeSend:function(){$("#spinner").show()},error:function(){$("#spinner").hide();$("#fvform").hide();$("#fvresult").hide()}}).done(function(){BINIT.initFvalidators()})}});$("#showhelps").click(function(b){b.preventDefault();var a=$(this).attr("href");var c="n";if($("#showhelps").hasClass("helpactive")){c="n"}else{c="y"}$.ajax({type:"GET",url:a+"/"+c,success:function(){$("#showhelps").toggleClass("helpinactive").toggleClass("helpactive");$(".dhelp").toggle();$("img.iconhelpshow").toggle();$("img.iconhelpcross").toggle()}})});$("div.section").parent().addClass("section");$("#notificationupdateform").on("submit",function(h){h.preventDefault();var c=$(this).serializeArray();var a=$(this).attr("action");var b=parseInt($("input[name=noteid]").val());var g=$('button[type="button"][value="'+b+'"]');var d=$(g).closest("tr");var f=d.find("div.subscrstatus:first");$.ajax({type:"POST",url:a,data:c,dataType:"json",success:function(e){if(e){var i=false;$.each(e,function(k,j){if(i===false&&parseInt(j.id)===b){i=true;f.text(j.langstatus)}if(i===false){d.hide()}})}$("#notificationupdatemodal").foundation("reveal","close")},error:function(e,j,i){window.alert("Error occured: "+i)}})});$(document).on("submit","div#loginform form",function(h){h.preventDefault();var b=$("#loginform");var c=$(b).find(":submit").first();var g=$(b).find("div.secondfactorrow").first();var f=$("div#loginform form").attr("action");var i=$(this).serializeArray();var d=new Date();var a=-d.getTimezoneOffset();i.push({name:"browsertimeoffset",value:""+a+""});$.ajax({type:"POST",cache:false,timeout:3500,url:f,data:i,beforeSend:function(){$("#loginresponse").html("").hide()},success:function(e){if(e){if(e.success===true&&e.result==="OK"){$("#loginform").foundation("reveal","close");setTimeout(function(){go_to_private_page()},1000)}else{if(e.result==="secondfactor"){$("#password").val("");g.empty();g.append(e.html).show();c.prop("disabled",true)}}}else{$("#loginresponse").html(e).show()}},error:function(e,k,j){$("#loginresponse").html(e.responseText).show()}});return false});$("button.advancedmode").click(function(){var b=$("textarea#metadatabody").val();if(b.length===0){window.alert("You did not inserted any metadata. You will have to fill in all the individual information manually.")}var c=$(this);var d=c.val();var e=$("[name='csrfname']").val();var a=$("[name='csrfhash']").val();$(this).closest("form").attr("action",d)});$(".afilter").click(function(){var a=$(this).attr("href");var b;if($(this).hasClass("filterext")){b=1}else{if($(this).hasClass("filterlocal")){b=2}else{b=0}}$("a.initiated").removeClass("initiatied");$.ajax({type:"GET",url:a,timeout:9500,cache:true,dataType:"json",success:function(r){$("#spinner").hide();if(b===1){$("dd.filterext").addClass("active")}else{if(b===2){$("dd.filterlocal").addClass("active")}else{$("dd.filterall").addClass("active")}}if(r){var p=$("<table/>");p.attr("id","details");p.addClass("filterlist");var k=$("<thead/>");p.append(k);var f=$("<tr/>");k.append(f);var q=[];var o=r.columns;var n;var d=0;$.each(o,function(u,t){n=t.status;if(n){var s=[];$.each(t.cols,function(v,w){s.push(w)});q.push(s);f.append("<th>"+t.colname+"</th>")}});var h=$("<tbody/>");p.append(h);var g=r.data;var e=new Date();var l=[];var m=0;$.each(g,function(t,s){if((s.plocal===1&&(b===2||b===0))||(s.plocal===0&&b<2)){l[m++]="<tr>";$.each(q,function(v,w){var u="";$.each(w,function(y,x){if(s[x]!==null){if(x==="pname"){u=u+'<a href="'+r.baseurl+"providers/detail/show/"+s.pid+'">'+s[x]+"</a><br />"}else{if(x==="phelpurl"){u=u+'<a href="'+s.phelpurl+'">'+s.phelpurl+"</a>"}else{if(x==="plocked"||x==="pactive"||x==="plocal"||x==="pstatic"||x==="pvisible"||x==="pavailable"){if(r.statedefs[x][s[x]]!==undefined){u=u+' <span class="lbl lbl-'+x+"-"+s[x]+'">'+r.statedefs[x][s[x]]+"</span>"}}else{u=u+"  "+s[x]}}}}});l[m++]="<td>"+u+"</td>"});d++;l[m++]="</tr>"}});h.append(l.join(""));var j=new Date();var c=j-e;console.log("Providerlist table gen time: "+c);var i=$("div.subtitleprefix").text();$("div.subtitle").empty().append(i+": "+d);$("div#providerslistresult").append(p);if(d>1){p.tablesorter({sortList:[[0,0]]});$("#filter").keyup(function(){$.uiTableFilter(p,this.value)});$("#filter-form").submit(function(){p.find("tbody > tr:visible > td:eq(1)").mousedown();return false}).focus()}}},beforeSend:function(){$("dd.afilter").removeClass("active");$("div#providerslistresult").empty();$("div.alert-box").empty().hide();$("#spinner").show()},error:function(e,c,d){$("#spinner").hide();$("div.subtitle").empty();$("div.alert-box").append(d).show()}});return false});$("a.initiated").trigger("click");$('button[name="mrolebtn"]').click(function(b){var a=$(this).attr("value");$.ajax({type:"GET",url:a,timeout:2500,cache:false,dataType:"json",success:function(c){var d=[];$.each(c,function(f,e){d.push(e)});$("input[name='checkrole[]']").each(function(){var e=$(this).attr("value");var f=$(this).attr("checked");if($.inArray(e,d)===-1){$(this).prop("checked",false)}else{$(this).prop("checked",true)}})}})});$('button[name="updaterole"]').click(function(c){c.preventDefault();var b=$(this).parents("form:first");var a=b.attr("action");$.ajax({type:"POST",url:a,cache:false,data:b.serializeArray(),dataType:"json",success:function(d){$("#mroles").foundation("reveal","close");if(d){var e="";$.each(d,function(g,f){e=e+f+","});$("span#currentroles").empty().append(e.substring(0,e.length-1))}}})});$('button[name="update2f"]').click(function(d){d.preventDefault();var c=$(this).parents("form:first");var a=c.find("div.alert-box");var b=c.attr("action");$.ajax({type:"POST",url:b,cache:false,data:c.serializeArray(),dataType:"json",success:function(e){a.hide();if(e){var f="";$.each(e,function(h,g){f=f+g+","});$("span#val2f").empty().append(f.substring(0,f.length-1))}$("#m2f").foundation("reveal","close")},error:function(e,g,f){a.html(f).show()}})});var checkRegpol;$('input[type="radio"].withuncheck').hover(function(){checkRegpol=$(this).is(":checked")});$('input[type="radio"].withuncheck').click(function(){checkRegpol=!checkRegpol;$(this).attr("checked",checkRegpol)});$(document).on("click","#resetloginform",function(a){a.preventDefault();var b=$("[name='baseurl']").val();$.ajax({type:"GET",url:b+"authenticate/resetloginform",cache:false,success:function(c){$(".secondfactorrow").empty();$("#loginform").foundation("reveal","close");return false}})});$(document).on("submit","#duo_form",function(c){c.preventDefault();var a=$(this).attr("action");var b=$(".secondfactorrow");$.ajax({type:"POST",url:a,cache:false,data:$(this).serializeArray(),beforeSend:function(){$("#loginresponse").html("").hide()},success:function(d){if(d){if(d.success===true&&d.result==="OK"){$("#loginform").foundation("reveal","close");setTimeout(function(){go_to_private_page()},1000)}else{if(d.result==="secondfactor"){b.append(d.html).show()}}}else{$("#loginresponse").html(d).show()}},error:function(d,f,e){$("#loginresponse").html(d.responseText).show()}})});$(document).ready(function(){var a=$("a.autoclick");if(a!==undefined){a.click()}});$("#updateprefsmodal").on("submit",function(d){d.preventDefault();var c=$(this).attr("data-jagger-link");var a=$(this).find("div.alert").first();var b=$(this).find("form").first();$.ajax({url:c,type:"POST",cache:false,data:b.serializeArray(),success:function(i){if(i){if(i.result==="OK"){var g=$(document).find('[data-jagger-record="'+i.confname+'"]').first();var h=g.closest("tr");var f=i.type;if(f==="text"){h.find('span[data-jagger-name="vtext"]').first().html(i.vtext)}var e=h.find('span[data-jagger-name="status"]').first();if(i.status){e.removeClass("alert").html(i.statusstring)}else{e.addClass("alert").html(i.statusstring)}$(document).foundation("reveal","close")}else{if(i.error){a.html(i.error).show()}}}else{a.html("No data").show()}},error:function(e,g,f){a.html(f).show()}})});$(document).on("click","a.updateprefs",function(f){f.preventDefault();var j=$("#updateprefsmodal");var g=$(this).attr("href");if(j===undefined||g===undefined){return false}var c=j.find('span[data-jagger-name="displayname"]').first();var i=j.find('input[name="confname"]').first();var h=j.find('div[data-jagger-name="desc"]').first();var b=j.find('input[name="status"]').first();var d=j.find('textarea[data-jagger-name="vtext"]').first();var a=j.find("div.alert").first();a.html("").hide();if(d===null){window.alert("d")}$.ajax({url:g,type:"GET",cache:false,success:function(k){if(k){c.html('"'+k.displayname+'"');i.val(k.confname);h.html("<b>"+k.displayname+":</b> "+k.desc);var e=k.type;if(e==="text"){d.val(k.vtext);d.closest("div.row").show()}else{d.closest("div.row").hide()}if(k.status===true){b.prop("checked",true)}else{b.prop("checked",false)}}}});j.foundation("reveal","open");return false});